(this["webpackJsonpnmr-displayer"]=this["webpackJsonpnmr-displayer"]||[]).push([[2],{201:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return b}));var a=n(52),i=n(40),r=n(11),o=n(0),c=n.n(o),l=Object(o.createContext)();function u(e,t){switch(t.type){case"SHOW":var n,a=Object(r.a)(Object(r.a)({},e),{},{highlights:Object(r.a)({},e.highlights)}),o=Object(i.a)(t.payload);try{for(o.s();!(n=o.n()).done;){var c=n.value;c in a.highlights||(a.highlights[c]=1)}}catch(f){o.e(f)}finally{o.f()}return a.highlighted=Object.keys(a.highlights),a;case"HIDE":var l,u=Object(r.a)(Object(r.a)({},e),{},{highlights:Object(r.a)({},e.highlights)}),s=Object(i.a)(t.payload);try{for(s.s();!(l=s.n()).done;){var d=l.value;d in u.highlights&&delete u.highlights[d]}}catch(f){s.e(f)}finally{s.f()}return u.highlighted=Object.keys(u.highlights),u;case"SET_PERMANENT":return Object(r.a)(Object(r.a)({},e),{},{highlightedPermanently:t.payload});case"UNSET_PERMANENT":return Object(r.a)(Object(r.a)({},e),{},{highlightedPermanently:[]});default:throw new Error("unknown action type: ".concat(t.type))}}var s={highlights:{},highlighted:[],highlightedPermanently:[]};function d(e){var t=Object(o.useReducer)(u,s),n=Object(a.a)(t,2),i=n[0],r=n[1],d=Object(o.useMemo)((function(){return{highlight:i,dispatch:r}}),[i]);return c.a.createElement(l.Provider,{value:d},e.children)}function f(){return Object(o.useContext)(l)}function b(e){if(!Array.isArray(e))throw new Error("highlights must be an array");var t=f(),n=Object(o.useMemo)((function(){var t,n=[],a=Object(i.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;if("string"!==typeof r&&"number"!==typeof r)throw new Error("highlight key must be a string or number");""!==r&&n.push(String(r))}}catch(o){a.e(o)}finally{a.f()}return n}),[e]);Object(o.useEffect)((function(){return function(){t.dispatch({type:"HIDE",payload:n}),t.dispatch({type:"UNSET_PERMANENT"})}}),[]);var a=Object(o.useMemo)((function(){return t.highlight.highlighted.some((function(e){return n.includes(e)}))}),[t.highlight.highlighted,n]),r=Object(o.useMemo)((function(){return t.highlight.highlightedPermanently.some((function(e){return n.includes(e)}))}),[t.highlight.highlightedPermanently,n]),c=Object(o.useCallback)((function(){t.dispatch({type:"SHOW",payload:n})}),[t,n]),l=Object(o.useCallback)((function(){t.dispatch({type:"HIDE",payload:n})}),[t,n]),u=Object(o.useCallback)((function(e){t.dispatch({type:"SHOW",payload:e})}),[t]),s=Object(o.useCallback)((function(e){t.dispatch({type:"HIDE",payload:e})}),[t]),d=Object(o.useCallback)((function(e){e&&(e.preventDefault(),e.stopPropagation()),r?t.dispatch({type:"UNSET_PERMANENT"}):t.dispatch({type:"SET_PERMANENT",payload:n})}),[t,n,r]);return{isActive:a,show:c,hide:l,onHover:{onMouseEnter:c,onMouseLeave:l},onClick:{onClick:d},isActivePermanently:r,click:d,add:u,remove:s}}},256:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"id",(function(){return U})),n.d(a,"name",(function(){return W})),n.d(a,"apply",(function(){return Z})),n.d(a,"isApplicable",(function(){return K})),n.d(a,"reduce",(function(){return J}));var i={};n.r(i),n.d(i,"id",(function(){return q})),n.d(i,"name",(function(){return $})),n.d(i,"apply",(function(){return ee})),n.d(i,"isApplicable",(function(){return te})),n.d(i,"reduce",(function(){return ne}));var r={};n.r(r),n.d(r,"id",(function(){return ce})),n.d(r,"name",(function(){return le})),n.d(r,"baselineAlgorithms",(function(){return ue})),n.d(r,"apply",(function(){return se})),n.d(r,"isApplicable",(function(){return de})),n.d(r,"reduce",(function(){return fe}));var o={};n.r(o),n.d(o,"id",(function(){return be})),n.d(o,"name",(function(){return pe})),n.d(o,"apply",(function(){return me})),n.d(o,"isApplicable",(function(){return ge})),n.d(o,"reduce",(function(){return he}));var c={};n.r(c),n.d(c,"id",(function(){return ve})),n.d(c,"name",(function(){return Oe})),n.d(c,"apply",(function(){return je})),n.d(c,"isApplicable",(function(){return ye})),n.d(c,"reduce",(function(){return xe}));var l={};n.r(l),n.d(l,"id",(function(){return ke})),n.d(l,"name",(function(){return Ee})),n.d(l,"apply",(function(){return Ce})),n.d(l,"isApplicable",(function(){return we})),n.d(l,"reduce",(function(){return De}));var u={};n.r(u),n.d(u,"id",(function(){return Se})),n.d(u,"name",(function(){return Te})),n.d(u,"apply",(function(){return Ie})),n.d(u,"isApplicable",(function(){return Ae})),n.d(u,"reduce",(function(){return Me}));var s={};n.r(s),n.d(s,"id",(function(){return _e})),n.d(s,"name",(function(){return Pe})),n.d(s,"apply",(function(){return Re})),n.d(s,"isApplicable",(function(){return Le})),n.d(s,"reduce",(function(){return Fe}));var d={};n.r(d),n.d(d,"id",(function(){return Ne})),n.d(d,"name",(function(){return ze})),n.d(d,"apply",(function(){return He})),n.d(d,"isApplicable",(function(){return Be})),n.d(d,"reduce",(function(){return Ve}));var f=n(190),b=n(11),p=n(52),m=n(189),g=n(0),h=n.n(g),v=n(197),O=n(456),j=n(457),y=n(781),x=n(782),k=n(195),E=n(53),C=n.n(E),w=n(40),D=n(80),S=n(24),T=n(25),I=n(192),A=n.n(I),M=n(224),_=n(770),P=n(81),R=n(265),L=n(194),F=[{key:"signal",label:"Signal",value:"signal"},{key:"reference",label:"Reference",value:"reference"},{key:"solvent",label:"Solvent",value:"solvent"},{key:"impurity",label:"Impurity",value:"impurity"},{key:"standard",label:"Standard",value:"standard"},{key:"p1",label:"P1",value:"p1"},{key:"p2",label:"P2",value:"p2"},{key:"p3",label:"P3",value:"p3"}],N=["signal"],z=["signal"],H=function(e){return function(e){return[].concat(e.diaID||[],e.signal?e.signal.map((function(e){return e.diaID||[]})).flat():[])}(e).length},B=function(e,t,n){void 0!==t?!0===t?delete e.diaID:void 0!==n&&delete e.signal[n].diaID:function(e){delete e.diaID,e.signal.forEach((function(e){delete e.diaID})),delete e.pubIntegral}(e),function(e){e.pubIntegral=H(e),0===e.pubIntegral&&delete e.pubIntegral}(e)},V=function(e,t){return!e.signal.some((function(e){return void 0===e.kind||!t.includes(e.kind)}))},Y=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var a=0;a<e.length;a++){var i=e.charAt(a),r=i.charCodeAt(0);if(255!==t[r])throw new TypeError("".concat(i," is ambiguous"));t[r]=a}var o=e.length,c=e.charAt(0),l=Math.log(256)/Math.log(o);return{encode:function(t){if(0===t.length)return"";for(var n=0,a=0,i=0,r=t.length;i!==r&&0===t[i];)i++,n++;for(var u=(r-i)*l+1>>>0,s=new Uint8Array(u);i!==r;){for(var d=t[i],f=0,b=u-1;(0!==d||f<a)&&-1!==b;b--,f++)d+=256*s[b]>>>0,s[b]=d%o>>>0,d=d/o>>>0;if(0!==d)throw new Error("Non-zero carry");a=f,i++}for(var p=u-a;p!==u&&0===s[p];)p++;for(var m=c.repeat(n);p<u;++p)m+=e.charAt(s[p]);return m}}}("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),X=new Uint8Array(8);function G(){for(var e=0;e<8;e++)X[e]=Math.floor(256*Math.random());return Y.encode(X).substring(0,8)}var U="absolute",W="absolute";function Z(e){if(!K(e))throw new Error("absolute not applicable on this data");e.data.re=Object(L.a)(e.data),e.data.im=new Float64Array(0),e.info.isComplex=!1}function K(e){return!(!e.info.isComplex||e.info.isFid)}function J(){return{once:!1,reduce:null}}var q="autoPhaseCorrection",$="automatic phase correction",Q={magnitudeMode:!1,minRegSize:30,maxDistanceToJoin:256};function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!te(e))throw new Error("phaseCorrection not applicable on this data");return t=Object.assign({},Q,t),Object(L.b)(e.data,t)}function te(e){return!(!e.info.isComplex||e.info.isFid)}function ne(e,t){var n=Object.assign({},e);for(var a in n)n[a]+=t[a];return{once:!0,reduce:n}}var ae=n(775),ie=n(772),re=n(479),oe=n(384),ce="baselineCorrection",le="baseline correction",ue={airpls:"airPLS",polynomial:"Polynomial"};function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!de(e))throw new Error("baselineCorrection not applicable on this data");var n,a=t.algorithm,i=t.zones,r=e.data,o=r.x,c=r.re;switch(a){case"airpls":n=Object(ae.a)(o,c,t).corrected;break;case"polynomial":var l=Object(ie.a)({x:o,y:c},{numberOfPoints:4096,zones:i});if(0===i.length){var u=Object(re.a)(l.x,l.y,t),s=u.regression;n=new Float64Array(o.length);for(var d=0;d<c.length;d++)n[d]=c[d]-s.predict(o[d])}else{var f=new oe.a(o,c,t.degree);n=new Float64Array(o.length);for(var b=0;b<c.length;b++)n[b]=c[b]-f.predict(o[b])}break;default:throw new Error("baselineCorrection: algorithm unknown: ".concat(a))}Object.assign(e.data,{re:n})}function de(e){return!e.info.isFid}function fe(){return{once:!1,reduce:null}}var be="digitalFilter",pe="Digital Filter";function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ge(e))throw new Error("Digital Filter is not applicable on this data");var n=t.digitalFilterValue,a=void 0===n?0:n,i=new Float64Array(e.data.re),r=new Float64Array(e.data.im),o=Math.floor(a),c=0;o+=0;var l=new Float64Array(i.length),u=new Float64Array(r.length);l.set(i.slice(o)),l.set(i.slice(c,o),i.length-o),u.set(r.slice(o)),u.set(r.slice(c,o),r.length-o),e.data.re=l,e.data.im=u}function ge(e){return!(!e.info.isComplex||!e.info.isFid)}function he(){return{once:!0,reduce:void 0}}var ve="fft",Oe="FFT";function je(e){if(!ye(e))throw new Error("fft not applicable on this data");var t=e.filters.some((function(e){return"digitalFilter"===e.name&&e.flag}));if(Object.assign(e.data,Object(L.c)(e.data,{applyZeroShift:!0})),t){var n=e.info.digitalFilter,a=(n-Math.floor(n))*Math.PI*2;Object.assign(e.data,Object(L.d)(e.data,0,a))}e.data.x=function(e){for(var t=e.info,n=parseFloat(t.baseFrequency),a=parseFloat(t.frequencyOffset),i=parseFloat(t.spectralWidth),r=a/n,o=.5*i,c=e.data.x.length,l=r-o,u=i/(c-1),s=new Array(c),d=0;d<c;d++)s[d]=l,l+=u;return s}(e),e.info=Object(b.a)(Object(b.a)({},e.info),{},{isFid:!1})}function ye(e){return!(!e.info.isComplex||!e.info.isFid)}function xe(){return{once:!0,reduce:void 0}}var ke="lineBroadening",Ee="line broadening";function Ce(e,t){if(!we(e))throw new Error("lineBroadening not applicable on this data");var n,a=e.info.digitalFilter;n=a>0?Math.floor(a):0;for(var i=e.data.re,r=e.data.im,o=e.data.x,c=i.length,l=new Float64Array(c),u=new Float64Array(c),s=(o[c-1]-o[0])/(c-1),d=-t*Math.exp(1),f=Math.exp(d*s),p=Math.exp(d*o[0]),m=0;m<c-n;m++)l[m]=i[m]*p,u[m]=r[m]*p,p*=f;p=Math.exp(d*o[0]);for(var g=c;g>c-n;g--)l[g]=i[g]*p,u[g]=r[g]*p,p*=f;e.data=Object(b.a)(Object(b.a)({},e.data),{re:l,im:u})}function we(e){return!(!e.info.isComplex||!e.info.isFid)}function De(e,t){return{once:!0,reduce:e+t}}var Se="phaseCorrection",Te="phase correction";function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ae(e))throw new Error("phaseCorrection not applicable on this data");var n=t.ph0,a=t.ph1;n*=Math.PI/180,a*=Math.PI/180,Object.assign(e.data,Object(L.d)(e.data,n,a))}function Ae(e){return!(!e.info.isComplex||e.info.isFid)}function Me(e,t){var n=Object.assign({},e);for(var a in n)n[a]+=t[a];return{once:!0,reduce:n}}var _e="shiftX",Pe="shift X";function Re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.data.x=e.data.x.map((function(e){return e+t}))}function Le(){return!0}function Fe(){return{once:!1,reduce:null}}var Ne="zeroFilling",ze="Zero Filling";function He(e,t){if(!Be(e))throw new Error("zeroFilling not applicable on this data");var n,a=e.filters.some((function(e){return"digitalFilter"===e.name&&e.flag})),i=e.info.digitalFilter;n=i>0&&a?Math.floor(i):0;var r=e.data,o=r.re,c=r.im,l=r.x,u=new Float64Array(t),s=new Float64Array(t),d=new Float64Array(t),f=Math.min(t,o.length);u.set(o.slice(0,f-n)),s.set(c.slice(0,f-n)),d.set(l.slice(0,f-n));for(var p=l[1]-l[0],m=l[f-n-1],g=f-n;g<t;g++)m+=p,d[g]=m;n>0&&n<t&&(u.set(o.slice(o.length-n),t-n),s.set(c.slice(o.length-n),t-n)),e.data=Object(b.a)(Object(b.a)({},e.data),{re:u,im:s,x:d})}function Be(e){return!(!e.info.isComplex||!e.info.isFid)}function Ve(e,t){return{once:!0,reduce:t}}var Ye={absolute:a,baselineCorrection:r,lineBroadening:l,fft:c,phaseCorrection:u,autoPhaseCorrection:i,shiftX:s,zeroFilling:d,digitalFilter:o},Xe=function(){function e(){Object(S.a)(this,e)}return Object(T.a)(e,null,[{key:"applyFilter",value:function(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=!1,r=Object(w.a)(a);try{for(r.s();!(n=r.n()).done;){var o=n.value,c={name:o.name,label:Ye[o.name].name,value:o.options},l=e.lookupForFilter(t,o.name);if(l){var u=Ye[o.name].reduce(l.value,c.value);u.once?(i||(i=!0),null!=u.reduce&&void 0!==u.reduce&&e.replaceFilter(t,l.id,u.reduce)):e.addFilter(t,c,!Object.prototype.hasOwnProperty.call(o,"isDeleteAllow")||o.isDeleteAllow)}else e.addFilter(t,c,!Object.prototype.hasOwnProperty.call(o,"isDeleteAllow")||o.isDeleteAllow)}}catch(b){r.e(b)}finally{r.f()}if(i)1===a.length&&e.isLastFilter(t,a[0].name)?Ye[a[0].name].apply(t,a[0].options):e.reapplyFilters(t);else{var s,d=Object(w.a)(a);try{for(d.s();!(s=d.n()).done;){var f=s.value;Ye[f.name].apply(t,f.options)}}catch(b){d.e(b)}finally{d.f()}}}},{key:"isLastFilter",value:function(e,t){var n=e.filters.findIndex((function(e){return e.name===t}));return e.filters.length===n+1}},{key:"lookupForFilter",value:function(e,t){return e.filters.find((function(e){return e.name===t}))}},{key:"reapplyFilters",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=n||e.filters,i=Object(w.a)(a);try{for(i.s();!(t=i.n()).done;){var r=t.value,o=r.id,c=r.flag;this.enableFilter(e,o,c,n)}}catch(l){i.e(l)}finally{i.f()}}},{key:"enableFilter",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.filters=e.filters.slice(0);var i=e.filters.findIndex((function(e){return e.id===t}));e.filters[i]=Object(b.a)(Object(b.a)({},e.filters[i]),{},{flag:n}),e.data=Object(b.a)(Object(b.a)({},e.data),e.source.original),e.info=Object(b.a)(Object(b.a)({},e.info),e.originalInfo);var r=a||e.filters;for(var o in r){var c=e.filters[o];if(e.filters[o]=Object(b.a)(Object(b.a)({},e.filters[o]),{},{error:null}),c.flag)try{Ye[c.name].apply(e,c.value)}catch(l){e.filters[o]=Object(b.a)(Object(b.a)({},e.filters[o]),{},{error:l.message})}}}},{key:"deleteFilter",value:function(e,t){for(var n in e.filters=e.filters.slice(0),e.filters=e.filters.filter((function(e){return e.id!==t})),e.data=Object(b.a)(Object(b.a)({},e.data),e.source.original),e.info=Object(b.a)(Object(b.a)({},e.info),e.originalInfo),e.filters){var a=e.filters[n];if(e.filters[n]=Object(b.a)(Object(b.a)({},e.filters[n]),{},{error:null}),a.flag)try{Ye[a.name].apply(e,a.value)}catch(i){e.filters[n]=Object(b.a)(Object(b.a)({},e.filters[n]),{},{error:i.message})}}}},{key:"addFilter",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=G();e.filters=e.filters.slice(0),delete t.isSnapshot,e.filters.push(Object(b.a)(Object(b.a)({},t),{},{id:a,flag:!0,isDeleteAllow:n}))}},{key:"replaceFilter",value:function(e,t,n){e.filters=e.filters.slice(0);var a=e.filters.findIndex((function(e){return e.id===t}));delete e.filters[a].isSnapshot,e.filters[a]=Object(b.a)(Object(b.a)({},e.filters[a]),{},{value:n})}}]),e}(),Ge=n(266),Ue=n(235);var We={minMaxRatio:.05,realTopDetection:!0,maxCriteria:!0,smoothY:!1,nH:100,compile:!0,frequencyCluster:16,clean:!0,keepPeaks:!0,sgOptions:{windowSize:7,polynomial:3}};var Ze=n(383),Ke=function(e,t,n,a,i){var r=Object(L.g)(e,{from:n,to:a}),o=r.fromIndex,c=r.toIndex,l={x:e.slice(o,c),y:t.slice(o,c)},u=Object(Ze.a)(l,{frequency:i,takeBestPartMultiplet:!0,symmetrizeEachStep:!0});return{multiplicity:u.j.map((function(e){return e.multiplicity})).join(""),kind:"signal",delta:u.chemShift,j:u.j}},Je=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(S.a)(this,e),this.id=t.id||G(),this.source=Object.assign({jcamp:null,jcampURL:null,original:[]},t.source),this.display=Object.assign({name:t.display&&t.display.name?t.display.name:G(),color:"black",isVisible:!0,isPeaksMarkersVisible:!0,isRealSpectrumVisible:!0,isVisibleInDomain:!0},t.display),this.info=Object.assign({nucleus:"1H",isFid:!1,isComplex:!1},t.info),this.originalInfo=Object.assign({nucleus:"1H",isFid:!1,isComplex:!1},t.info),this.meta=Object.assign({},t.meta),this.data=Object.assign({x:[],re:[],im:[]},t.data),this.peaks=Object.assign({values:[],options:{}},t.peaks),this.integrals=Object.assign({values:[],options:{sum:100}},t.integrals),this.filters=Object.assign([],t.filters),this.ranges=Object.assign({values:[],options:{sum:100}},t.ranges),Xe.reapplyFilters(this),this.preprocessing()}return Object(T.a)(e,[{key:"reapplyFilters",value:function(){Xe.reapplyFilters(this)}},{key:"applyFilterSnapshot",value:function(e){if(e){var t=this.filters.findIndex((function(t){return t.id===e})),n=this.filters.slice(0,t+1);Xe.reapplyFilters(this,n)}else Xe.reapplyFilters(this)}},{key:"preprocessing",value:function(){this.info.isFid&&-1===this.filters.findIndex((function(e){return e.name===Ye.digitalFilter.id}))&&this.applyFilter([{name:Ye.digitalFilter.id,options:{digitalFilterValue:this.info.digitalFilter},isDeleteAllow:!1}])}},{key:"setIsRealSpectrumVisible",value:function(e){this.isRealSpectrumVisible=e}},{key:"setPeaks",value:function(e){this.peaks=e}},{key:"getPeaks",value:function(){return this.peaks}},{key:"setRanges",value:function(e){this.ranges=e,this.updateIntegralRanges()}},{key:"setRange",value:function(e){this.ranges=Object.assign({},this.ranges),this.ranges.values=this.ranges.values.slice();var t=this.ranges.values.findIndex((function(t){return t.id===e.id}));this.ranges.values[t]=e,this.updateIntegralRanges()}},{key:"getRanges",value:function(){return this.ranges}},{key:"addIntegral",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={id:G(),from:e[0],to:e[1],absolute:this.getIntegration(e[0],e[1]),kind:"signal"};this.integrals.values.push(t),this.updateIntegralIntegrals()}},{key:"getIntegration",value:function(e,t){return Object(L.j)({x:this.data.x,y:this.data.re},{from:e,to:t,reverse:!0})}},{key:"changeIntegralSum",value:function(e){this.integrals=Object.assign({},this.integrals),this.integrals.options=Object(b.a)(Object(b.a)({},this.integrals.options),{},{sum:e}),this.updateIntegralIntegrals()}},{key:"changeRangesSum",value:function(e){this.ranges=Object.assign({},this.ranges),this.ranges.options=Object(b.a)(Object(b.a)({},this.ranges.options),{},{sum:e}),this.updateIntegralRanges()}},{key:"updateIntegralIntegrals",value:function(){void 0===this.integrals.options.sum&&(this.integrals.options=Object(b.a)(Object(b.a)({},this.integrals.options),{},{sum:100}));this.integrals.values=this.updateRelatives(this.integrals.values.slice(),this.integrals.options.sum,"integral",(function(e){return e.kind&&N.includes(e.kind)}))}},{key:"updateIntegralRanges",value:function(){void 0===this.ranges.options.sum&&(this.ranges.options=Object(b.a)(Object(b.a)({},this.ranges.options),{},{sum:100}));this.ranges.values=this.updateRelatives(this.ranges.values.slice(),this.ranges.options.sum,"integral",(function(e){return e.signal&&V(e,N)}))}},{key:"updateRelatives",value:function(e,t,n,a){var i=e.reduce((function(e,t){return void 0!==a&&!0===a(t)?e+=t.absolute:e}),0),r=i>0?t/i:0;return e.map((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(P.a)({},n,e.absolute*r))}))}},{key:"changeIntegral",value:function(e){var t=this.integrals.values.findIndex((function(t){return t.id===e.id}));-1!==t&&(this.integrals.values[t]=Object(b.a)(Object(b.a)(Object(b.a)({},this.integrals.values[t]),e),{absolute:this.getIntegration(e.from,e.to)}),this.updateIntegralIntegrals())}},{key:"getIntegrals",value:function(){return A.a.cloneDeep(this.integrals)}},{key:"getInfo",value:function(){return this.info}},{key:"baseline",value:function(){}},{key:"applyAutoPeakPicking",value:function(e){this.peaks=Object.assign({},this.peaks),this.peaks.values=this.peaks.values.slice();var t=function(e,t){var n=t.minMaxRatio,a=t.maxNumberOfPeaks,i=t.noiseFactor,r=Object(Ge.a)(e.data.re.map((function(e){return Math.abs(e)}))),o=e.data,c=o.re,l=o.x,u=Object(Ue.b)({x:l,y:c},{noiseLevel:r*i,minMaxRatio:n,realTopDetection:!0,maxCriteria:!0,smoothY:!1,sgOptions:{windowSize:15,polynomial:3}});return u.sort((function(e,t){return t.y-e.y})),a<u.length&&(u=u.slice(0,a)),u.map((function(t){return{id:G(),xIndex:t.index,intensity:t.y,width:t.width,xShift:e.data.x[t.index]-t.x}}))}(this,e);return this.peaks.values=t,this.peaks}},{key:"detectRanges",value:function(e){var t=this;this.ranges=Object.assign({},this.ranges),this.ranges.values=this.ranges.values.slice();var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.data.re.map((function(e){return Math.abs(e)})).sort()[Math.floor(e.data.re.length/2)],a=e.data,i=a.re,r=a.x,o=e.info,c=o.originFrequency,l=o.nucleus;t.peakPicking=Object.assign({},We,t.peakPicking,{frequency:c,nucleus:l,noiseLevel:3*n});var u=Object(Ue.c)({x:r,y:i},t);return u}(this,e);return this.ranges.values=n.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{id:G(),absolute:t.getIntegration(e.from,e.to),signal:e.signal.map((function(e){return Object(b.a)({kind:"signal"},e)}))})})),this.updateIntegralRanges(),this.ranges}},{key:"deletePeak",value:function(e){return this.peaks.values=null==e?[]:this.peaks.values.filter((function(t){return t.xIndex!==e.xIndex})),this.peaks.values.slice()}},{key:"deleteRange",value:function(e){this.ranges=Object.assign({},this.ranges),this.ranges.values=this.ranges.values.slice(),this.ranges.values=void 0===e?[]:this.ranges.values.filter((function(t){return t.id!==e})),this.updateIntegralRanges()}},{key:"deleteIntegral",value:function(e){return this.integrals.values=null==e?[]:this.integrals.values.filter((function(t){return t.id!==e})),this.updateIntegralIntegrals(),this.integrals.values.slice()}},{key:"setIntegral",value:function(e){var t=this.integrals.values.findIndex((function(t){return t.id===e.id}));this.integrals.values[t]=e,this.updateIntegralIntegrals()}},{key:"applyFilter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Xe.applyFilter(this,e)}},{key:"enableFilter",value:function(e,t){Xe.enableFilter(this,e,t)}},{key:"deleteFilter",value:function(e){Xe.deleteFilter(this,e)}},{key:"getReal",value:function(){return{x:this.data.x,y:this.data.re}}},{key:"getImaginary",value:function(){return{x:this.data.x,y:this.data.im}}},{key:"getData",value:function(){return this.data}},{key:"lookupPeak",value:function(e,t){var n=this.data.x.findIndex((function(t){return t>=e})),a=this.data.x.findIndex((function(e){return e>=t}))-1;n>a&&(a=n=a);var i=this.data.re.slice(n,a);if(i&&i.length>0){var r=Object(R.a)(i),o=i.findIndex((function(e){return e===r}));return{x:this.data.x[n+o],y:r,xIndex:n+o}}return null}},{key:"checkPeakIsExists",value:function(e){return!!this.peaks.values.map((function(e){return e.xIndex})).includes(e.xIndex)}},{key:"detectSignal",value:function(e,t){return Ke(this.data.x,this.data.re,e,t,this.info.originFrequency)}},{key:"addRange",value:function(e,t){this.ranges=Object.assign({},this.ranges),this.ranges.values=this.ranges.values.slice();try{var n={id:G(),from:e,to:t,absolute:this.getIntegration(e,t),signal:[this.detectSignal(e,t)]};this.ranges.values.push(n),this.updateIntegralRanges()}catch(a){throw new Error("Could not calculate the multiplicity")}}},{key:"changeRange",value:function(e){this.ranges=Object.assign({},this.ranges),this.ranges.values=this.ranges.values.slice();var t=this.ranges.values.findIndex((function(t){return t.id===e.id}));-1!==t&&(this.ranges.values[t]=Object(b.a)(Object(b.a)(Object(b.a)({},this.ranges.values[t]),e),{absolute:this.getIntegration(e.from,e.to)}),this.updateIntegralRanges())}},{key:"addPeak",value:function(e){if(!this.checkPeakIsExists(e)){var t=Object(b.a)({id:G()},e);return this.peaks.values.push(t),t}return null}},{key:"addPeaks",value:function(e,t){if(e!==t){var n=this.lookupPeak(e,t);if(n&&!this.checkPeakIsExists(n)){var a=Object(b.a)({id:G()},n);return this.peaks.values.push(a),a}}return null}},{key:"addFilter",value:function(e){Xe.addFilter(this,e)}},{key:"getFilters",value:function(){return this.filters}},{key:"setDisplay",value:function(e){this.display=Object.assign({},this.display),this.display=Object(b.a)(Object(b.a)({},this.display),e)}},{key:"toJSON",value:function(){return{data:this.data,id:this.id,source:{jcamp:this.source.jcamp,jcampURL:this.source.jcampURL,original:this.source.jcampURL||this.source.jcamp?[]:this.source.original},display:this.display,info:this.originalInfo,meta:this.meta,peaks:this.peaks,integrals:this.integrals,ranges:this.ranges,filters:this.filters}}}]),e}(),qe=function e(){Object(S.a)(this,e)};function $e(e){var t=e[0]&&e[0].data&&e[0].data.x?e[0].data.x:[],n=e[0]&&e[0].data&&e[0].data.y?e[0].data.y:[],a=e[1]&&e[1].data&&e[1].data.y?e[1].data.y:null;return t[0]>t[1]&&(t.reverse(),n.reverse(),a&&a.reverse()),{x:t,re:n,im:a}}qe.fromBruker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.info,i=e.meta,r=$e(n[0].components);r.im&&(a.isComplex=!0),Array.isArray(a.nucleus)&&(a.nucleus=a.nucleus[0]);var o=new Je(Object(b.a)(Object(b.a)({},t),{},{info:a,meta:i,data:r,source:{jcamp:null,jcampURL:null,original:r}}));return o},qe.fromCSD=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dimensions[0],a=e.dependentVariables,i=n.quantityName,r=n.count,o=n.increment.magnitude,c=n.originOffset.magnitude,l=n.coordinatesOffset.magnitude,u=a[0].components[0],s=[],d=[],f=u.length-1;f>0;f-=2)s.push(u[f-1]),d.push(u[f]);var p,m,g={};switch(i){case"frequency":m=0+l/c*1e6,p=o/c*1e6,g.re=s,g.im=d;break;case"time":m=c,p=o,g.re=s.reverse(),g.im=d.reverse().map((function(e){return-e}))}for(var h=[],v=0;v<r;v++)h.push(m+v*p);g.x=h;var O=new Je(Object(b.a)(Object(b.a)({},t),{},{meta:t.meta,data:g,source:{jcamp:null,jcampURL:null,original:g}}));return O},qe.fromParsedJcamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.info,i=e.meta,r=$e(n[0].components);Array.isArray(a.nucleus)&&(a.nucleus=a.nucleus[0]);var o=new Je(Object(b.a)(Object(b.a)({},t),{},{info:a,meta:i,data:r,source:{jcamp:null,jcampURL:t.source&&t.source.jcampURL?t.source.jcampURL:null,original:r}}));return o};var Qe=n(774),et=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;Object(S.a)(this,e),this.currentLevelPositive=n,this.currentLevelNegative=a;var i=tt(t.minX,t.maxX,t.z[0].length),r=tt(t.minY,t.maxY,t.z.length);this.conrec=new Qe.a(t.z,{xs:i,ys:r,swapAxes:!1}),this.median=t.noise,this.minMax=t}return Object(T.a)(e,[{key:"getLevel",value:function(){return{levelPositive:this.currentLevelPositive,levelNegative:this.currentLevelNegative}}},{key:"setLevel",value:function(e,t){this.currentLevelPositive=e,this.currentLevelNegative=t}},{key:"wheel",value:function(e){var t=Math.sign(e);(this.currentLevelPositive>0&&-1===t||this.currentLevelPositive<21&&1===t)&&(this.currentLevelPositive+=t),(this.currentLevelNegative>0&&-1===t||this.currentLevelNegative<21&&1===t)&&(this.currentLevelNegative+=t)}},{key:"shiftWheel",value:function(e){var t=Math.sign(e);if(!(0===this.currentLevelNegative&&-1===t||this.currentLevelNegative>20&&1===t))return this.currentLevelNegative+=t,[]}},{key:"drawContours",value:function(){var e=this.currentLevelPositive/2+1,t=this.currentLevelNegative/2+1;return{positive:this.getContours(e),negative:this.getContours(t,{negative:!0})}}},{key:"getContours",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.negative,a=void 0!==n&&n,i=t.timeout,r=void 0===i?4e3:i,o=t.nbLevels,c=void 0===o?10:o,l=Math.max(Math.abs(this.minMax.maxZ),Math.abs(this.minMax.minZ)),u=tt(3*this.median*Math.pow(2,e),l,c,2);a&&(u=u.map((function(e){return-e})));var s=[];try{s=this.conrec.drawContour({contourDrawer:"shape",levels:u,timeout:r})}catch(d){console.log(d)}return s}}]),e}();function tt(e,t,n,a){if(a){var i=[];i[0]=0;for(var r=1;r<=n;r++)i[r]=i[r-1]+(a-1)/Math.pow(a,r);for(var o=i[n],c=new Array(n),l=0;l<n;l++)c[l]=(t-e)*(1-i[l+1]/o)+e;return c}var u=(t-e)/(n-1);return function(e,t,n){for(var a=[],i=e;i<t;i+=n)a.push(i);return a}(e,t+u/2,u)}var nt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(S.a)(this,e),this.id=t.id||G(),this.source=Object.assign({jcamp:null,jcampURL:null,original:[]},t.source),this.display=Object.assign({name:t.display.name||G(),positiveColor:"red",negativeColor:"blue",isPositiveVisible:!0,isNegativeVisible:!0},t.display),this.info=Object.assign({nucleus:["1H","1H"],isFid:!1,isComplex:!1},t.info),this.originalInfo=Object.assign({nucleus:["1H","1H"],isFid:!1,isComplex:!1},t.info),this.meta=Object.assign({},t.meta),this.data=Object.assign({z:[],minX:0,minY:0,maxX:0,maxY:0},t.data),this.zones=Object.assign({values:[],options:{}},t.zones),this.processingController=new et(this.data)}return Object(T.a)(e,[{key:"getProcessingController",value:function(){return this.processingController}},{key:"getContourLines",value:function(){return this.processingController.drawContours()}},{key:"setDisplay",value:function(e){this.display=Object.assign({},this.display),this.display=Object(b.a)(Object(b.a)({},this.display),e)}},{key:"getZones",value:function(){return this.zones=Object.assign({},this.zones)}},{key:"addZone",value:function(e){var t=e.fromX,n=e.toX,a=e.fromY,i=e.toY,r={x:{from:t,to:n},y:{from:a,to:i},signal:[{peak:[],x:{delta:(t+n)/2,diaID:[]},y:{delta:(a+i)/2,diaID:[]}}]};this.zones.values.push(Object(b.a)({id:G()},r))}},{key:"deleteZone",value:function(e){this.zones=Object.assign({},this.zones),this.zones.values=this.zones.values.slice(),this.zones.values=void 0===e?[]:this.zones.values.filter((function(t){return t.id!==e}))}},{key:"setZone",value:function(e){this.zones=Object.assign({},this.zones),this.zones.values=this.zones.values.slice();var t=this.zones.values.findIndex((function(t){return t.id===e.id}));this.zones.values[t]=e}},{key:"getSlice",value:function(e){var t=this.data,n=(t.maxX-t.minX)/(t.z[0].length-1),a=(t.maxY-t.minY)/(t.z.length-1),i=Math.floor((e.x-t.minX)/n),r=Math.floor((e.y-t.minY)/a);if(!(i<0||i>=t.z[0].length)&&!(r<0||r>=t.z.length)){for(var o={nucleus:this.info.nucleus[0],isFid:!1,isComplex:!1,dimension:1},c={x:Object(L.l)({from:this.data.minX,to:this.data.maxX},this.data.z[0].length),re:new Float64Array(this.data.z[0].length)},l=0;l<this.data.z[0].length;l++)c.re[l]+=this.data.z[r][l];for(var u={nucleus:this.info.nucleus[1],isFid:!1,isComplex:!1,dimension:1},s={x:Object(L.l)({from:this.data.minY,to:this.data.maxY},this.data.z.length),re:new Float64Array(this.data.z.length)},d=this.data.z.length-1,f=0;f<this.data.z.length;f++)s.re[f]+=this.data.z[d--][i];return{horizontal:new Je({info:o,data:c}),vertical:new Je({info:u,data:s})}}}},{key:"getMissingProjection",value:function(e){var t=this.info.nucleus.indexOf(e);-1===t&&(t=0);var n={nucleus:this.info.nucleus[t],isFid:!1,isComplex:!1,dimension:1},a=0===t?this.data.minX:this.data.minY,i=0===t?this.data.maxX:this.data.maxY,r=0===t?this.data.z.length:this.data.z[0].length,o=new Float64Array(r);if(1===t)for(var c=0;c<this.data.z.length;c++)for(var l=0;l<this.data.z[0].length;l++)o[c]+=this.data.z[c][l];else for(var u=0;u<this.data.z[0].length;u++)for(var s=0;s<this.data.z.length;s++)o[u]+=this.data.z[s][u];var d={x:Object(L.l)({from:a,to:i},r),re:o};return new Je({info:n,data:d})}},{key:"detectZones",value:function(e){this.zones=Object.assign({},this.zones),this.zones.values=this.zones.values.slice();var t={};t=e.selectedZone?this.getSubMatrix(e.selectedZone):this.data,e.info=this.info;var n=function(e,t){var n=t.thresholdFactor,a=t.clean,i=t.maxPercentCutOff,r=t.enhanceSymmetry,o=t.convolutionByFFT,c=t.info,l=c.nucleus,u=c.originFrequency,s=l[0]===l[1];return Object(Ue.d)(e,{isHomoNuclear:s,nucleus:l,observeFrequencies:u,thresholdFactor:n,clean:a,maxPercentCutOff:i,enhanceSymmetry:r,convolutionByFFT:o})}(t,e).map((function(e){return{id:G(),x:{from:e.fromTo[0].from,to:e.fromTo[0].to},y:{from:e.fromTo[1].from,to:e.fromTo[1].to},signal:[{peak:e.peaks,x:{delta:(e.fromTo[0].from+e.fromTo[0].to)/2,diaID:[]},y:{delta:(e.fromTo[1].from+e.fromTo[1].to)/2,diaID:[]}}]}}));return this.zones.values=this.zones.values.concat(n),this.zones}},{key:"toJSON",value:function(){return{data:this.data,id:this.id,source:{jcamp:this.source.jcamp,jcampURL:this.source.jcampURL,original:this.source.jcampURL?[]:this.source.original},display:this.display,info:this.originalInfo,meta:this.meta}}},{key:"getSubMatrix",value:function(e){for(var t=e.fromX,n=e.toX,a=e.fromY,i=e.toY,r=this.data,o=(r.maxX-r.minX)/r.z[0].length,c=(r.maxY-r.minY)/r.z.length,l=Math.floor((t-r.minX)/o),u=Math.floor((a-r.minY)/c),s=Math.floor((n-r.minX)/o),d=Math.floor((i-r.minY)/c),f={z:[],maxX:n,minX:t,maxY:i,minY:a},b=Number.MIN_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER,m=l-s+1,g=u;g<d;g++){for(var h=new Float32Array(m),v=l,O=0;O<m;O++)h[O]=r.z[g][v--];for(var j=0;j<h.length;j++)b<h[j]&&(b=h[j]),p>h[j]&&(p=h[j]);f.z.push(Array.from(h))}return f.minZ=p,f.maxZ=b,f}}]),e}(),at=function e(){Object(S.a)(this,e)};at.fromParsedJcamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.info,i=e.meta,r=n[0].components,o=new nt(Object(b.a)(Object(b.a)({},t),{},{info:a,meta:i,data:r,source:{jcamp:null,jcampURL:t.source&&t.source.jcampURL?t.source.jcampURL:null,original:r}}));return o},at.fromBruker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.meta,i=n[0].components,r=new nt(Object(b.a)(Object(b.a)({},t),{},{meta:a,data:i,source:{jcamp:null,jcampURL:null,original:i}}));return r};var it=["#FFB300","#803E75","#FF6800","#A6BDD7","#C10020","#CEA262","#817066","#007D34","#F6768E","#00538A","#FF7A5C","#53377A","#FF8E00","#B32851","#F4C800","#7F180D","#93AA00","#593315","#F13A13","#232C16"],rt=function(e){var t=Math.max(0,Math.min(100,e)),n=Math.round(t/100*255).toString(16);return 100===t?"":n.padStart(2,"0")},ot=function(e,t){return e+rt(t)},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=it.filter((function(e){return!t.includes(e)}));if(a.length>0&&!e)return a[0]+rt(n);var i=-.25,r=String("#".concat(Math.random().toString(16).slice(2,8).toUpperCase())).replace(/[^0-9a-f]/gi,"");r.length<6&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);var o,c,l="#";for(c=0;c<3;c++)o=parseInt(r.substr(2*c,2),16),o=Math.round(Math.min(Math.max(0,o+o*i),255)).toString(16),l+="00".concat(o).substr(o.length);return l+rt(n)};function lt(e,t,n){return fetch(t,{credentials:"include"}).then((function(e){return e.text()})).then((function(t){ut(e,t,n)}))}function ut(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(_.b)(t,{noContour:!0,xy:!0,keepRecordsRegExp:/.*/,profiling:!0});if(0!==a.length){var i,r=Object(w.a)(a);try{for(r.s();!(i=r.n()).done;){var o=i.value,c=o.dependentVariables;c[0].components&&(c[0].components.length>0||c[0].components.z.length)&&st(e,o,n)}}catch(l){r.e(l)}finally{r.f()}}}function st(e,t,n){var a=t.info.dimension;1===a&&e.push(qe.fromParsedJcamp(t,n)),2===a&&e.push(at.fromParsedJcamp(t,n))}function dt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(_.c)(t,{}),i=a.description,r=i.metadata;if(delete i.metadata,i.acquisitionMode=0,i.experiment=1===i.dimension?"1d":"2d",i.type="NMR SPECTRUM",i.nucleus=i.nucleus[0],i.numberOfPoints=i.numberOfPoints[0],i.acquisitionTime=i.acquisitionTime[0],i.baseFrequency=i.baseFrequency[0],i.frequencyOffset=i.offset[0],i.spectralWidthClipped=a.application.spectralWidthClipped,1===i.dimension){var o=[];if(a.dependentVariables){var c=ct(o);e.push(qe.fromCSD(a,Object(b.a)(Object(b.a)({},n),{},{display:Object(b.a)(Object(b.a)({},n.display),{},{color:c}),info:i,meta:r}))),o.push(c)}}if(2===i.dimension&&i.isFt){var l=[],u=ct(!1,l),s=ot(u,50);l.push(u),e.push(at.fromCSD(a,Object(b.a)(Object(b.a)({},n),{},{display:Object(b.a)(Object(b.a)({},n.display),{},{positiveColor:u,negativeColor:s}),info:i})))}}function ft(e){return bt.apply(this,arguments)}function bt(){return(bt=Object(D.a)(C.a.mark((function e(t){var n,a,i,r,o,c=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:[],a=[],i=Object(w.a)(n);try{for(i.s();!(r=i.n()).done;)null!=(o=r.value).source.jcamp?ut(t,o.source.jcamp,o):null!=o.source.jcampURL?a.push(lt(t,o.source.jcampURL,o)):t.push(new Je(Object(b.a)(Object(b.a)({},o),{},{data:o.source.original})))}catch(l){i.e(l)}finally{i.f()}return e.next=6,Promise.all(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(e,t,n){return mt.apply(this,arguments)}function mt(){return(mt=Object(D.a)(C.a.mark((function e(t,n,a){var i,r,o,c,l,u,s,d,f,p,m,g;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)(a,{xy:!0,noContours:!0});case 2:i=e.sent,r=[],o=[],c=i,l=Object(w.a)(c);try{for(l.s();!(u=l.n()).done;)s=u.value,d=s.info,f=s.dependentVariables,1===d.dimension&&f[0].components&&(p=ct(r),t.push(qe.fromBruker(s,Object(b.a)(Object(b.a)({},n),{},{display:Object(b.a)(Object(b.a)({},n.display),{},{color:p})}))),r.push(p)),2===d.dimension&&d.isFt&&(m=ct(!1,o),g=ot(m,50),o.push(m),t.push(at.fromBruker(s,Object(b.a)(Object(b.a)({},n),{},{info:d,display:Object(b.a)(Object(b.a)({},n.display),{},{positiveColor:m,negativeColor:g})}))))}catch(h){l.e(h)}finally{l.f()}case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gt=n(486),ht=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(S.a)(this,e),this.key=t.key||G(),this.molfile=t.molfile||"";var n=new M.Molecule.fromMolfile(this.molfile),a=n.getMolecularFormula();this.mf=a.formula,this.em=a.absoluteWeight,this.mw=a.relativeWeight,this.svg=n.toSVG(50,50);var i=new gt.MF(this.mf);this.atoms=i.getInfo().atoms}return Object(T.a)(e,[{key:"toJSON",value:function(){return{molfile:this.molfile}}}]),e}(),vt=function e(){Object(S.a)(this,e)};vt.fromJSON=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0;n<e.length;n++){var a,i=M.Molecule.fromMolfile(e[n].molfile),r=i.getFragments(),o=Object(w.a)(r);try{for(o.s();!(a=o.n()).done;){var c=a.value;t.push(new ht({molfile:c.toMolfileV3()}))}}catch(l){o.e(l)}finally{o.f()}}return t};var Ot=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;Object(S.a)(this,e),this.spectra=[],this.molecules=[],this.spectra=t.slice(),this.molecules=n.slice(),this.preferences=a||{}}return Object(T.a)(e,[{key:"fromZip",value:function(){var e=Object(D.a)(C.a.mark((function e(t){var n,a,i,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(w.a)(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=10;break}return i=a.value,r=ct(!0),e.next=8,pt(this.spectra,{display:{color:r,name:i.name}},i.binary);case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addJcampFromURL",value:function(){var e=Object(D.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lt(this.spectra,t,n);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addJcamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ut(this.spectra,e,t)}},{key:"addJDF",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};dt(this.spectra,e,t)}},{key:"addMolfileFromURL",value:function(){var e=Object(D.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.text()}));case 2:n=e.sent,this.addMolfile(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMolecules",value:function(){return this.molecules}},{key:"getPreferences",value:function(){return this.preferences}},{key:"removeMolecule",value:function(e){this.molecules=this.molecules.filter((function(t){return t.key!==e}))}},{key:"addMolfile",value:function(e){var t=M.Molecule.fromMolfile(e).getFragments();this.molecules=Object.assign([],this.molecules);var n,a=Object(w.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;this.molecules.push(new ht({molfile:i.toMolfileV3(),svg:i.toSVG(150,150),mf:i.getMolecularFormula().formula,em:i.getMolecularFormula().absoluteWeight,mw:i.getMolecularFormula().relativeWeight}))}}catch(r){a.e(r)}finally{a.f()}}},{key:"setMolecules",value:function(e){this.molecules=e}},{key:"setMolfile",value:function(e,t){var n=M.Molecule.fromMolfile(e).getFragments();if(n.length>1){this.molecules=this.molecules.filter((function(e){return e.key!==t}));var a,i=Object(w.a)(n);try{for(i.s();!(a=i.n()).done;){var r=a.value;this.molecules.push(new ht({molfile:r.toMolfileV3(),svg:r.toSVG(150,150),mf:r.getMolecularFormula().formula,em:r.getMolecularFormula().absoluteWeight,mw:r.getMolecularFormula().relativeWeight}))}}catch(s){i.e(s)}finally{i.f()}}else if(1===n.length){var o=n[0],c=new ht({molfile:o.toMolfileV3(),svg:o.toSVG(150,150),mf:o.getMolecularFormula().formula,em:o.getMolecularFormula().absoluteWeight,mw:o.getMolecularFormula().relativeWeight,key:t}),l=this.molecules.findIndex((function(e){return e.key===t})),u=this.molecules.slice();u.splice(l,1,c),this.molecules=u}return this.molecules}},{key:"toJSON",value:function(){return{spectra:this.spectra.map((function(e){return Object(b.a)(Object(b.a)({},e.toJSON()),{},{data:{}})})),molecules:this.molecules.map((function(e){return e.toJSON()})),preferences:this.preferences}}},{key:"setPreferences",value:function(e){this.preferences=Object(b.a)(Object(b.a)({},this.preferences),e)}},{key:"pushDatum",value:function(e){this.spectra.push(e)}},{key:"createSlice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},n=this.getDatum(e);if(n)return n.getSlice(t)}},{key:"addMissingProjection",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=this.getDatum(e),i=Object(w.a)(n);try{for(i.s();!(t=i.n()).done;){var r=t.value,o=a.getMissingProjection(r);this.spectra.push(o)}}catch(c){i.e(c)}finally{i.f()}}},{key:"getDatum",value:function(e){return this.spectra.find((function(t){return t.id===e}))}},{key:"getSpectraData",value:function(){return this.spectra?A.a.cloneDeep(this.spectra.map((function(e){var t=e instanceof Je?Object(b.a)(Object(b.a)({},e.data),{},{y:e.data.re}):e.data,n=(e.data,Object(k.a)(e,["data"]));return Object(b.a)(Object(b.a)(Object(b.a)({},n),t),{},{isVisibleInDomain:e.display.isVisibleInDomain})}))):[]}},{key:"deleteDatumByIDs",value:function(e){var t=this.spectra.filter((function(t){return!e.includes(t.id)}));this.spectra=t.length>0?t:[]}}],[{key:"build",value:function(){var t=Object(D.a)(C.a.mark((function t(){var n,a,i,r=arguments;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:{},a=n.molecules?vt.fromJSON(n.molecules):[],i=new e([],a,n.preferences),t.next=5,ft(i.spectra,n.spectra);case 5:return t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),e}();Ot.usedColors=[];var jt=n(787),yt=n(788),xt=Object(g.createContext)(),kt={step:"initial",brush:{start:null,end:null}},Et=[];function Ct(e){var t=e.children,n=e.className,a=e.style,i=e.onBrush,r=e.onZoom,o=e.onDoubleClick,c=e.onClick,l=e.noPropagation,u=Object(g.useReducer)(wt,kt),s=Object(p.a)(u,2),d=s[0],f=s[1],m=Object(g.useState)(),v=Object(p.a)(m,2),O=v[0],j=v[1],y=Object(g.useCallback)((function(e){return l&&e.stopPropagation(),f({type:"DOWN",shiftKey:e.shiftKey,altKey:e.altKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,boundingRect:e.currentTarget.getBoundingClientRect()}),j(e.timeStamp),!1}),[l]),x=Object(g.useCallback)((function(e){e.persist();var t=e.timeStamp,n=e.currentTarget.getBoundingClientRect(),a=e.clientX-n.x,i=e.clientY-n.y,r=A.a.debounce((function(){t-O<=150&&1===Et.length&&c(Object(b.a)(Object(b.a)({},e),{},{x:a,y:i})),Et=[]}),200);Et.push(r),r(),Et.length>1&&(A.a.map(Et,(function(e){return e.cancel()})),Et=[],o(Object(b.a)(Object(b.a)({},e),{},{x:a,y:i})))}),[O,c,o]),k=Object(g.useCallback)((function(e){e.stopPropagation(),e.preventDefault();var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y,i=e.deltaY,o=e.deltaX,c=e.shiftKey,l=e.deltaMode;r({deltaY:i||o,shiftKey:c,deltaMode:l,x:n,y:a})}),[r]);return Object(g.useEffect)((function(){"end"===d.step&&(i(d),f({type:"DONE"}))}),[i,d]),Object(g.useEffect)((function(){var e=function(e){f({type:"MOVE",screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY})},t=function(e){return f({type:"UP",clientX:e.clientX,clientY:e.clientY}),!1};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),function(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}),[]),h.a.createElement(xt.Provider,{value:d},h.a.createElement("div",{className:n,style:a,onMouseDown:y,onClick:x,onWheel:k},t))}function wt(e,t){switch(t.type){case"UP":if("brushing"===e.step||"start"===e.step){var n=t.clientX,a=t.clientY;return Object(b.a)(Object(b.a)({},e),{},{endX:n-e.boundingRect.x,endY:a-e.boundingRect.y,step:"start"===e.step?"initial":"end"})}return e;case"DOWN":if("initial"===e.step||"end"===e.step){var i=t.screenX,r=t.screenY,o=t.clientX,c=t.clientY,l=t.boundingRect,u=t.shiftKey,s=t.altKey,d=o-l.x,f=c-l.y;return Object(b.a)(Object(b.a)({},e),{},{shiftKey:u,altKey:s,startX:d,startY:f,startScreenX:i,startScreenY:r,startClientX:o,startClientY:c,boundingRect:l,step:"start"})}return e;case"MOVE":if("start"===e.step||"brushing"===e.step){t.screenX,t.screenY;var p=t.clientX,m=t.clientY;return Object(b.a)(Object(b.a)({},e),{},{step:"brushing",endX:p-e.boundingRect.x,endY:m-e.boundingRect.y})}return e;case"DONE":if("end"===e.step)return Object(b.a)(Object(b.a)({},e),{},{step:"initial"});break;default:return e}}Ct.defaultProps={onBrush:function(){return null},onZoom:function(){return null},onDoubleClick:function(){return null},onClick:function(){return null}};var Dt=Object(g.createContext)(),St=Dt.Provider;function Tt(e){var t=e.children,n=e.className,a=e.style,i=e.noPropagation,r=Object(g.useState)(null),o=Object(p.a)(r,2),c=o[0],l=o[1],u=Object(g.useCallback)((function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;l({x:n,y:a}),i&&e.stopPropagation()}),[i]),s=Object(g.useCallback)((function(e){l(null),i&&e.stopPropagation()}),[i]);return h.a.createElement(St,{value:c},h.a.createElement("div",{className:n,style:a,onMouseMove:u,onMouseLeave:s},t))}var It=h.a.createContext(),At=It.Provider;function Mt(){return Object(g.useContext)(It)}var _t=Object(g.createContext)(),Pt=_t.Provider;function Rt(){return Object(g.useContext)(_t)}var Lt=h.a.createContext(),Ft=Lt.Provider;function Nt(){return Object(g.useContext)(Lt)}var zt=h.a.createContext(),Ht=zt.Provider;function Bt(){return Object(g.useContext)(zt)}var Vt={outerContainer:{position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(255,255,255,0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1},innerContainer:{boxSizing:"initial",backgroundColor:"#fff",boxShadow:"0 0 0 0, 0 8px 16px rgba(0,0,0,.30)",display:"flex",flexDirection:"column",minWidth:"300px",minHeight:"140px",justifyContent:"space-between",borderRadius:"5px"}},Yt=function(e){var t=e.children,n=e.open,a=e.onClose,i=e.style,r=Object(g.useCallback)((function(e){a(e)}),[a]);return Object(g.useEffect)((function(){!1===n&&r()}),[r,n]),n&&h.a.createElement("div",{style:Vt.outerContainer,onClick:r},h.a.createElement("div",{style:Object(b.a)(Object(b.a)({},Vt.innerContainer),i),onClick:function(e){e.preventDefault(),e.stopPropagation()}},t))};Yt.defaultProps={onClose:function(){return null},open:!1};var Xt=Yt,Gt=n(2),Ut=n(786);function Wt(){var e=Object(f.a)(["\n  display: flex;\n  align-items: flex-end;\n  justify-content: flex-end;\n  padding: 5px;\n  background-color: #ffffff52;\n\n  button:first-of-type {\n    border-radius: 5px 0 0 5px;\n    border-weight: 0 1px 0 0;\n  }\n  button:last-child {\n    border-radius: 0px 5px 5px 0px;\n    border-weight: 0 0 0 1px;\n  }\n  button {\n    border: 1px solid #dcdcdc;\n    background-color: white;\n    display: inline-block;\n    cursor: pointer;\n    color: #666666;\n    font-weight: bold;\n    padding: 6px 24px;\n    text-decoration: none;\n  }\n  button:hover {\n    background: -webkit-gradient(\n      linear,\n      left top,\n      left bottom,\n      color-stop(0.05, #f6f6f6),\n      color-stop(1, #ffffff)\n    );\n    background: -moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n    background-color: #f6f6f6;\n  }\n"]);return Wt=function(){return e},e}function Zt(){var e=Object(f.a)(["\n  font-size: 16px;\n  text-align: center;\n  color: white;\n  text-align: center;\n  margin: 35px 10px;\n  flex: 1;\n"]);return Zt=function(){return e},e}var Kt=Object(m.b)(Zt()),Jt=Object(m.b)(Wt()),qt=function(e){var t=e.onYes,n=e.onNo,a=e.onClose,i=e.message,r=Object(g.useCallback)((function(e){t(e),a()}),[a,t]),o=Object(g.useCallback)((function(e){n(e),a()}),[a,n]);return Object(m.c)("div",{style:{display:"flex",flexDirection:"column",backgroundColor:"#ff3636",flex:1}},Object(m.c)("p",{css:Kt},i),Object(m.c)("div",{css:Jt},Object(m.c)("button",{type:"button",onClick:o},"No"),Object(m.c)("button",{type:"button",onClick:r},"Yes")))};qt.defaultProps={onYes:function(){return null},onNo:function(){return null}};var $t,Qt,en=qt,tn=Object(g.createContext)(),nn=n(789),an={TOP_LEFT:"top left",TOP_CENTER:"top center",TOP_RIGHT:"top right",CENTER_LEFT:"middle left",CENTER:"middle",CENTER_RIGHT:"middle right",BOTTOM_LEFT:"bottom left",BOTTOM_CENTER:"bottom center",BOTTOM_RIGHT:"bottom right"},rn="fade",on="scale",cn=($t={},Object(P.a)($t,rn,{transition:"opacity ".concat(250,"ms ease"),opacity:0}),Object(P.a)($t,on,{transform:"scale(1)",transition:"all ".concat(250,"ms ease-in-out")}),$t),ln=(Qt={},Object(P.a)(Qt,rn,{entering:{opacity:0},entered:{opacity:1}}),Object(P.a)(Qt,on,{entering:{transform:"scale(0)"},entered:{transform:"scale(1)"},exiting:{transform:"scale(0)"},exited:{transform:"scale(0)"}}),Qt),un=function(e){var t=e.children,n=e.type,a=Object(k.a)(e,["children","type"]);return h.a.createElement(nn.a,Object.assign({},a,{timeout:250}),(function(e){return h.a.createElement("div",{style:Object(b.a)(Object(b.a)({},cn[n]),ln[n][e])},t)}))},sn=function(e){var t=e.children,n=e.options,a=n.position,i=n.containerStyle,r=Object(k.a)(e,["children","options"]),o=Object(g.useMemo)((function(){return function(e){var t={left:0,position:"fixed",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",width:"100%",pointerEvents:"none"};switch(e){case an.TOP_LEFT:return Object(b.a)(Object(b.a)({},t),{},{top:0,alignItems:"flex-start"});case an.TOP_CENTER:return Object(b.a)(Object(b.a)({},t),{},{top:0});case an.TOP_RIGHT:return Object(b.a)(Object(b.a)({},t),{},{top:0,alignItems:"flex-end"});case an.CENTER_LEFT:return Object(b.a)(Object(b.a)({},t),{},{top:"0%",alignItems:"flex-start",height:"100%"});case an.CENTER:return Object(b.a)(Object(b.a)({},t),{},{top:"0%",height:"100%"});case an.CENTER_RIGHT:return Object(b.a)(Object(b.a)({},t),{},{top:"0%",alignItems:"flex-end",height:"100%"});case an.BOTTOM_LEFT:return Object(b.a)(Object(b.a)({},t),{},{bottom:0,alignItems:"flex-start"});case an.BOTTOM_CENTER:return Object(b.a)(Object(b.a)({},t),{},{bottom:0});case an.BOTTOM_RIGHT:return Object(b.a)(Object(b.a)({},t),{},{bottom:0,alignItems:"flex-end"});default:return t}}(a)}),[a]);return t.length>0&&h.a.createElement("div",Object.assign({style:Object(b.a)(Object(b.a)({},o),i)},r),t)},dn=function(e){var t=e.children,n=e.context,a=e.style,i=e.offset,r=e.position,o=e.transition,c=e.wrapperID,l=Object(g.useRef)(),u=Object(g.useRef)(null),s=Object(g.useState)(),d=Object(p.a)(s,2),f=d[0],m=d[1];Object(g.useEffect)((function(){return l.current=document.createElement("div"),c?document.getElementById(c).appendChild(l.current):document.body.appendChild(l.current),function(){l.current&&(c?document.getElementById(c).removeChild(l.current):document.body.removeChild(l.current))}}),[c]);var v=function(){m(null)},O=Object(g.useCallback)((function(){v()}),[]);Object(g.useEffect)((function(){var e=function(e){["Escape","Esc"].includes(e.key)&&O()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[O]),u.current={show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={component:e,options:Object(b.a)({isBackgroundBlur:!0,enableResizing:!1},t),close:function(){return v()}};return m(n),n.options.onOpen&&n.options.onOpen(),n},close:function(){O()},modal:f,showConfirmDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={component:h.a.createElement(en,{message:e}),options:Object(b.a)({isBackgroundBlur:!0},t),close:function(){return v()}};return m(n),n.options.onOpen&&n.options.onOpen(),n}};var j=f&&f.options.isBackgroundBlur?{backgroundColor:"rgba(255,255,255,0.8)"}:{pointerEvents:"none"};return h.a.createElement(n.Provider,{value:u},t,l.current&&Object(Gt.createPortal)(h.a.createElement(g.Fragment,null,f&&h.a.createElement("div",{style:Object(b.a)({position:"fixed",top:0,right:0,bottom:0,left:0},j)},h.a.createElement(Ut.a,{appear:!0,key:an[f.options.transition?f.options.transition:o],options:{position:f.options.position?f.options.position:r},component:sn},h.a.createElement(un,{type:f.options.transition?f.options.transition:o,key:f.id},h.a.createElement("div",{style:Object(b.a)(Object(b.a)({boxSizing:"initial",backgroundColor:"#fff",boxShadow:"0 0 0 0, 0 8px 16px rgba(0,0,0,.30)",borderRadius:"5px"},a),{},{margin:i,pointerEvents:"all",position:"none"})},f.options&&h.a.cloneElement(f.component,Object(b.a)(Object(b.a)({},f.options),{},{onClose:O,style:{cursor:"default"}}))))))),l.current))},fn=dn;dn.defaultProps={offset:"10px",position:an.CENTER,transition:on,wrapperID:null,context:tn,style:{}};var bn=function(e){return Object(g.useContext)(e||tn).current};function pn(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  height: 100%;\n  flex-direction: column;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  outline: 10px dashed rgba(0, 0, 0, 0.3);\n  outline-offset: -10px;\n\n  p {\n    padding: 15px 30px;\n    background-color:rgba(0, 0, 0, 0.5);\n    border-radius: 39px;\n    color: white;\n    font-size: x-large;\n    font-weight: bold;\n\n  }\n}\n"]);return pn=function(){return e},e}var mn=Object(m.b)(pn()),gn=function(e){var t=e.isEmpty;return void 0===t||t?Object(m.c)("div",{css:mn},Object(m.c)("p",null,"Drag and drop here a Jcamp or NMRium file")):null};function hn(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  height: 100%;\n  flex-direction: column;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n\n  svg {\n    animation-duration: 0.5s;\n    animation-name: spinAnimation;\n    animation-iteration-count: infinite;\n    animation-fill-mode: forwards;\n    animation-direction: inherit;\n    animation-timing-function: linear;\n    animation-duration: 1s;\n    width: 100px;\n    height: 100px;\n  }\n\n  @keyframes spinAnimation {\n    from {\n      transform: rotate(0deg);\n    }\n\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"]);return hn=function(){return e},e}var vn=Object(m.b)(hn()),On=function(e){var t=e.isLoading,n=void 0===t||t,a=Mt().data,i=Object(g.useState)(!1),r=Object(p.a)(i,2),o=r[0],c=r[1];return Object(g.useEffect)((function(){var e=null;return n||(e=setTimeout((function(){c(!0)}),500)),function(){clearTimeout(e)}}),[n]),Object(m.c)(g.Fragment,null,n&&Object(m.c)("div",{css:vn},Object(m.c)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3"},Object(m.c)("g",{fill:"#61DAFB"},Object(m.c)("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),Object(m.c)("path",{d:"M520.5 78.1z"}))),Object(m.c)("p",null,"Loading ...")),o&&!n&&Object(m.c)(gn,{isEmpty:a&&0===a.length}))},jn=n(79),yn=n(776);function xn(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  user-select: none;\n  width: 900px;\n  height: 400px;\n\n  svg {\n    animation-duration: 0.5s;\n    animation-name: spinAnimation;\n    animation-iteration-count: infinite;\n    animation-fill-mode: forwards;\n    animation-direction: inherit;\n    animation-timing-function: linear;\n    animation-duration: 1s;\n    width: 100px;\n    height: 100px;\n  }\n\n  @keyframes spinAnimation {\n    from {\n      transform: rotate(0deg);\n    }\n\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"]);return xn=function(){return e},e}function kn(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 900px;\n  height: 400px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    overflow-y: auto;\n    background-color: white;\n    padding-top: 10px;\n\n    .row {\n      outline: none;\n      display: flex !important;\n      flex-direction: row;\n      margin: 0;\n      div {\n        flex: 4;\n      }\n      .multiplicity {\n        flex: 2;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n    }\n\n    .row:nth-child(odd) {\n      background: #fafafa;\n    }\n  }\n"]);return kn=function(){return e},e}var En=Object(m.b)(kn()),Cn=Object(m.b)(xn()),wn=function(e){var t=e.data,n=e.activeSpectrum,a=e.scaleX,i=e.startX,r=e.endX,o=e.onClose,c=Object(g.useState)(),l=Object(p.a)(c,2),u=l[0],s=l[1],d=Object(g.useState)(!1),f=Object(p.a)(d,2),b=f[0],h=f[1],v=Object(g.useState)(!1),O=Object(p.a)(v,2),j=O[0],y=O[1];return Object(g.useEffect)((function(){setTimeout((function(){h(!0)}),400)}),[]),Object(g.useEffect)((function(){if(n&&i&&r&&b){var e=t[n.index],o=e.x,c=e.info,l=e.y,u=a().invert(i),d=a().invert(r),f=Object(L.g)(o,{from:u,to:d}),p=f.fromIndex,m=f.toIndex,g={x:o.slice(p,m),y:l.slice(p,m)};try{var h=Object(Ze.a)(g,{frequency:c.originFrequency,takeBestPartMultiplet:!0,symmetrizeEachStep:!0,debug:!0});y(!0),s(h)}catch(v){console.log(v)}}}),[i,r,t,a,n,b]),j?Object(m.c)("div",{css:En},Object(m.c)("div",{className:"header"},Object(m.c)("span",null,"Analyse Multiplet"),Object(m.c)("button",{onClick:o,type:"button"},Object(m.c)(jn.D,null))),Object(m.c)("div",{className:"container"},u&&u.debug&&u.debug.steps.map((function(e,t){var n,a;return Object(m.c)("div",{key:t,className:"row"},Object(m.c)(yn.a,{chart:{series:{type:"line",data:e.multiplet}},style:{height:200,width:400,overflow:"auto"}}),Object(m.c)("div",{className:"multiplicity"},Object(m.c)("p",null,u.j[t]?"".concat(null===(n=u.j[t])||void 0===n?void 0:n.multiplicity,": ").concat(null===(a=u.j[t])||void 0===a?void 0:a.coupling.toFixed(3)," Hz"):"")),Object(m.c)(yn.a,{chart:{series:{type:"line",data:e.errorFunction}},style:{height:200,width:400,overflow:"auto"}}))})))):Object(m.c)("div",{css:Cn},Object(m.c)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3"},Object(m.c)("g",{fill:"#61DAFB"},Object(m.c)("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),Object(m.c)("path",{d:"M520.5 78.1z"}))),Object(m.c)("p",null,"Analyse Multiplet in progress. Please wait ..."))};wn.defaultProps={onClose:function(){return null}};var Dn=wn,Sn=n(204),Tn=function(e){var t=Object(g.useState)(localStorage.getItem(e)),n=Object(p.a)(t,2),a=n[0],i=n[1];return Object(g.useEffect)((function(){localStorage.setItem(e,a)}),[e,a]),[a?JSON.parse(a):{},i]},In=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):t},An=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return A.a.get(e,t,n)},Mn=2,_n=20,Pn=3,Rn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(S.a)(this,e),this.scale=t,this.speedThreshold=n.speedThreshold||Pn,this.slowZoomStep=n.slowZoomStep||Mn,this.fastZoomStep=n.fastZoomStep||_n}return Object(T.a)(e,[{key:"wheel",value:function(e,t){var n=1===Math.abs(e).toString().length?Math.abs(e):Math.abs(e)/100,a=In("settings"),i=An(a,"controllers.mws.low"),r=An(a,"controllers.mws.high"),o=i?.01*i:.01*this.slowZoomStep,c=r?.05*r:.05*this.fastZoomStep,l=n<=this.speedThreshold?o:c,u=-1===Math.sign(e)?this.scale+l:this.scale-l;this.scale=u>=0||0===u?u:0}},{key:"getScale",value:function(){return this.scale}},{key:"setScale",value:function(e){this.scale=e}}]),e}(),Ln=new Rn,Fn=new Rn(.5),Nn="HORIZONTAL",zn="VERTICAL",Hn="STEP_HROZENTAL",Bn=function(e,t,n){var a=e.height,i=e.margin,r=e.activeSpectrum,o=Sn.h.translate(0,a-i.bottom).scale(n).translate(0,-(a-i.bottom));if(t.zoomFactor={scale:n},null===r)t.yDomains=Object.keys(t.yDomains).reduce((function(e,n){var r=Object(Sn.f)(t.originDomain.yDomains[n],[a-i.bottom,i.top]),c=o.rescaleY(r).domain();return e[n]=c,e}),{});else{var c=Object(Sn.f)(t.originDomain.yDomains[r.id],[a-i.bottom,i.top]),l=o.rescaleY(c).domain();t.yDomains[r.id]=l}},Vn=function(e,t,n,a,i){var r=e.originDomain,o=e.tabActiveSpectrum[e.activeTab.split(",")[i]].id,c=Sn.h.translate(0,n-a).scale(t).translate(0,-(n-a));e.zoomFactor={scale:t};var l=Object(Sn.f)(r.yDomains[o],[n-a,a]),u=c.rescaleY(l).domain();e.yDomains[o]=u},Yn=function(e,t,n){if(n.activeSpectrum){var a=e.height,i=e.margin;if(n.originIntegralYDomain[n.activeSpectrum.id]){var r=Object(Sn.f)(n.originIntegralYDomain[n.activeSpectrum.id],[a-i.bottom,i.top]),o=t<.1?.05:t,c=Sn.h.translate(0,a-i.bottom).scale(o).translate(0,-(a-i.bottom)).rescaleY(r).domain();n.integralZoomFactor={scale:t};var l=n.activeSpectrum;n.integralsYDomains[l.id]=c}}},Xn=n(198);function Gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.width,a=t.margin,i=t.xDomains,r=t.xDomain,o=t.mode,c="RTL"===o?[n-a.right,a.left]:[a.left,n-a.right];return Object(Sn.f)(e?i[e]:r,c)}function Un(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.height,a=t.margin,i=t.verticalAlign,r=t.yDomain,o=t.yDomains,c=i.flag&&!i.stacked?n/2:n,l=[];return l=null===e||void 0===o[e]?[0,r[1]]:[0,o[e][1]],Object(Sn.f)(l,[c-a.bottom,a.top])}var Wn={scaleX:null,scaleY:null};function Zn(e,t){switch(t.type){case"SET_X_SCALE":return Object(Xn.a)(e,(function(e){e.scaleX=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Gn(e,t)}}));case"SET_Y_SCALE":return Object(Xn.a)(e,(function(e){e.scaleY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Un(e,t)}}));default:return e}}var Kn={zoom:{id:"zoom",label:"Zoom",hasOptionPanel:!1,isFilter:!1},peakPicking:{id:"peakPicking",label:"Peaks Picking",hasOptionPanel:!0,isFilter:!1},integral:{id:"integral",label:"integral Tool",hasOptionPanel:!1,isFilter:!1},zone2D:{id:"zone2D",label:"Zone Tool",hasOptionPanel:!0,isFilter:!1},slicingTool:{id:"slicingTool",label:"Slicing Tool",hasOptionPanel:!1,isFilter:!1},HMove:{id:"HMove",label:"Move spectrum horizontally",hasOptionPanel:!1,isFilter:!1},equalizerTool:{id:"equalizerTool",label:"Equalizer Tool",hasOptionPanel:!1,isFilter:!1},rangesPicking:{id:"rangesPicking",label:"Ranges Picking ( Press r )",hasOptionPanel:!0,isFilter:!1},zeroFilling:{id:Ye.zeroFilling.id,label:Ye.zeroFilling.name,hasOptionPanel:!0,isFilter:!0},phaseCorrection:{id:Ye.phaseCorrection.id,label:"".concat(Ye.phaseCorrection.name," ( Press a )"),hasOptionPanel:!0,isFilter:!0},baseLineCorrection:{id:"baseLineCorrection",label:"baseline correction ( Press b )",hasOptionPanel:!0,isFilter:!0},generalSelector:{id:"generalSelector",label:"range general selecttor",hasOptionPanel:!1,isFilter:!1}},Jn={transformOrigin:"top left",position:"absolute",top:"0px",left:"0px",zoom:"100%"},qn=[Kn.zoom.id,Kn.zeroFilling.id,Kn.peakPicking.id,Kn.integral.id,Kn.phaseCorrection.id,Kn.baseLineCorrection.id,Kn.rangesPicking.id,Kn.zone2D.id,Kn.slicingTool.id],$n=1,Qn=2,ea=3,ta=function(e){var t=e.brushType,n=e.dimensionBorder,a=e.width,i=e.height,r=Mt(),o=r.width,c=r.height,l=r.selectedTool,u=Object(g.useContext)(xt),s=u.startX,d=u.endX,f=u.startY,p=u.endY,m=u.step;if(!qn.includes(l)||"brushing"!==m||!n||n.startX&&s<n.startX||n.startY&&f<n.startY||(n.endX&&1===Math.sign(d-s)?d>n.endX:d<n.startX)&&(n.endX&&1===Math.sign(p-f)?p>n.endY:p<n.startY))return null;o=a||o,c=i||c,d=n.endX&&d>n.endX?n.endX:n.startX&&d<n.startX?n.startX:d,p=n.endY&&p>n.endY?n.endY:n.startY&&p<n.startY?n.startY:p;var v=t===$n||t===ea?(d-s)/o:1;s=t===$n||t===ea?s:0;var O=t===Qn||t===ea?(p-f)/c:1;return f=t===Qn||t===ea?f:0,h.a.createElement("div",{style:Object(b.a)(Object(b.a)({},Jn),{},{transform:"translate(".concat(s,"px, ").concat(f,"px) scale(").concat(v,",").concat(O,")")}),className:"moving-element"},h.a.createElement("svg",{width:o,height:c},h.a.createElement("rect",{x:"0",y:"0",width:o,height:c,fill:"gray",opacity:"0.2"})))};ta.defaultProps={brushType:ea,dimensionBorder:{startX:0,startY:0},width:null,height:null};var na=ta,aa={line:{stroke:"black",strokeOpacity:"1",shapeRendering:"crispEdges",strokeWidth:"1",willChange:"transform"}},ia=[Kn.zoom.id,Kn.equalizerTool.id,Kn.baseLineCorrection.id,Kn.zone2D.id,Kn.slicingTool.id],ra=function(){var e=Mt(),t=e.height,n=e.width,a=e.margin,i=e.selectedTool,r=Object(g.useContext)(Dt),o=Object(g.useContext)(xt);return!ia.includes(i)||"brushing"===o.step||!r||r.x>n-a.right||r.y>t-a.bottom||!n||!t?null:h.a.createElement("div",{className:"moving-element",key:"crossLine",style:{cursor:"crosshair",transform:"translate(".concat(-n+r.x,"px, ").concat(-t+r.y,"px)"),position:"absolute",top:0,left:0,pointerEvents:"none",overflow:"visible",width:2*n,height:2*t}},h.a.createElement("svg",{width:2*n,height:2*t},h.a.createElement("line",{style:aa.line,x1:n,y1:"0",x2:n,y2:2*t,key:"vertical_line"}),h.a.createElement("line",{style:aa.line,x1:"0",y1:t,x2:2*n,y2:t,key:"horizontal_line"})))},oa=n(784),ca=new(function(){function e(){var t=this;return Object(S.a)(this,e),e.instance||(this._data=[],e.instance=this),this.myObservable={},this.subscribes={},this.unsubscribe=function(e){return function(){t.subscribes[e]?t.subscribes[e].unsubscribe():console.error("No event Registered")}},e.instance}return Object(T.a)(e,[{key:"publish",value:function(e,t){this.initBeahviorSubject(e),this.myObservable[e].next(t)}},{key:"initBeahviorSubject",value:function(e){this.myObservable[e]||(this.myObservable[e]=new oa.a)}},{key:"subscribe",value:function(e,t){try{this.initBeahviorSubject(e),this.subscribes[e]=this.myObservable[e].subscribe((function(e){e&&t(e)}))}catch(n){console.error(n)}return this.unsubscribe(e)}}]),e}());Object.freeze(ca);var la=ca;function ua(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  .zone-area {\n    height: 100%;\n    fill: #b8b8b857;\n    cursor: pointer;\n  }\n  .delete-button {\n    display: none;\n    cursor: pointer;\n  }\n  :hover .delete-button {\n    display: block;\n  }\n"]);return ua=function(){return e},e}var sa=Object(m.b)(ua()),da=function(){var e=Mt().baseLineZones,t=Bt().scaleX,n=Rt(),a=Object(g.useCallback)((function(e){n({type:"DELETE_BASE_LINE_ZONE",id:e})}),[n]),i=function(e){var t=e.id;return Object(m.c)(g.Fragment,null,Object(m.c)("svg",{className:"delete-button",x:-20,y:10,onClick:function(){return a(t)},"data-no-export":"true"},Object(m.c)("rect",{rx:"5",width:"16",height:"16",fill:"#c81121"}),Object(m.c)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"})))};return e&&Array.isArray(e)&&e.length>0&&Object(m.c)("g",null,e.map((function(e){return Object(m.c)("g",{key:e.id,transform:"translate(".concat(t()(e.to),",0)"),css:sa},Object(m.c)(i,{id:e.id}),Object(m.c)("rect",{x:"0",width:"".concat(t()(e.from)-t()(e.to)),className:"zone-area"}))})))},fa=n(1),ba=n.n(fa),pa={showAbsolute:!0,absoluteFormat:"0.00",showRelative:!0,relativeFormat:"0.00",color:"#000000",strokeWidth:1},ma={showFrom:!1,fromFormat:"0.00",showTo:!1,toFormat:"0.00",showAbsolute:!1,absoluteFormat:"0.00",showRelative:!0,relativeFormat:"0.00"},ga={showPeakNumber:!0,peakNumberFormat:"0.00",showPeakIndex:!0,peakIndexFormat:"0.00",showDeltaPPM:!1,deltaPPMFormat:"0.00",showDeltaHz:!1,deltaHzFormat:"0.00",showPeakWidth:!1,peakWidthFormat:"00.0000",showIntensity:!0,intensityFormat:"0.00"};function ha(e,t){var n=In("settings");return An(e,"panels.[".concat(t,"]"))?An(e,"panels.[".concat(t,"]")):An(n,"panels.[".concat(t,"]"))}var va=n(201),Oa=n(329),ja=n.n(Oa),ya=function(e){var t=e.from,n=e.to,a=e.onDrag,i=e.onDrop,r=Mt(),o=r.height,c=r.margin,l=r.mode,u=Object(g.useState)(!1),s=Object(p.a)(u,2),d=s[0],f=s[1],b=Object(g.useState)(!1),h=Object(p.a)(b,2),v=h[0],O=h[1],j=Bt().scaleX,y=Object(g.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),f(!0),a&&a()}),[a]),x=Object(g.useCallback)((function(){}),[]),k=Object(g.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),f(!1);var a="RTL"===l?[j().invert(e.layerX),n]:[n,j().invert(e.layerX)];i(a[1]>a[0]?{from:a[0],to:a[1]}:{from:t,to:n})}),[t,l,i,j,n]),E=Object(g.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),O(!0),a&&a()}),[a]),C=Object(g.useCallback)((function(){}),[]),w=Object(g.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),O(!1);var a="RTL"===l?[t,j().invert(e.layerX)]:[j().invert(e.layerX),t];i(a[1]>a[0]?{from:a[0],to:a[1]}:{from:t,to:n})}),[t,l,i,j,n]);return Object(m.c)(g.Fragment,null,Object(m.c)(ja.a,{axis:"x",defaultPosition:{x:j()(t),y:0},position:{x:j()(t),y:0},scale:1,onStart:y,onDrag:x,onStop:k},Object(m.c)("rect",{cursor:"ew-resize",width:d?1:6,fill:"red",height:o+c.top,style:{fillOpacity:d?1:0}})),Object(m.c)(ja.a,{axis:"x",defaultPosition:{x:j()(n),y:0},position:{x:j()(n),y:0},scale:1,onStart:E,onDrag:C,onStop:w},Object(m.c)("rect",{cursor:"ew-resize",width:v?1:6,fill:"red",height:o+c.top,style:{fillOpacity:v?1:0}})))};function xa(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  fill: #ff6f0057;\n\n  .target {\n    visibility: visible;\n  }\n"]);return xa=function(){return e},e}function ka(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  // // disabled because Resizable component appears now when hovering over it\n  // :hover .target {\n  //   visibility: visible !important;\n  //   cursor: pointer;\n  // }\n  .highlight {\n    fill: transparent;\n  }\n  .target {\n    visibility: hidden;\n  }\n"]);return ka=function(){return e},e}var Ea=Object(m.b)(ka()),Ca=Object(m.b)(xa()),wa=function(e){var t=e.spectrumID,n=e.integralSeries,a=e.integralData,i=Mt(),r=i.height,o=i.margin,c=Bt().scaleX,l=a.id,u=a.integral,s=Object(va.b)([l]),d=Object(g.useMemo)((function(){return n?Sn.c(n.x):[]}),[n]),f=Rt(),p=Object(g.useCallback)((function(){f({type:"DELETE_INTEGRAL",integralID:l,spectrumID:t})}),[f,l,t]);var h=Object(g.useCallback)((function(e){f({type:"RESIZE_INTEGRAL",data:Object(b.a)(Object(b.a)({},a),e)})}),[f,a]);return Object(m.c)(g.Fragment,null,Object(m.c)("g",Object.assign({css:s.isActive?Ca:Ea,"data-no-export":"true"},s.onHover),Object(m.c)("rect",{x:"".concat(c()(d[1])),y:"0",width:"".concat(c()(d[0])-c()(d[1])),height:r-o.bottom,className:"highlight"}),s.isActive&&Object(m.c)("text",{x:c()(d[1]),y:r-o.bottom+30,fill:"black",style:{fontSize:"12px",fontWeight:"bold"}},void 0!==u?u.toFixed(2):""),Object(m.c)(ya,{from:a.from,to:a.to,onDrop:h}),Object(m.c)((function(){return Object(m.c)("svg",{className:"target",x:"".concat(c()(d[1])-20),y:r-o.bottom-20,onClick:p,"data-no-export":"true",width:"16",height:"16"},Object(m.c)("rect",{rx:"5",width:"16",height:"16",fill:"#c81121"}),Object(m.c)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"}))}),null)))},Da=function(e){var t=e.integralData,n=e.x,a=e.y,i=e.xDomain,r=e.isActive,o=e.spectrumID,c=e.scaleY,l=e.scaleX,u=t.from,s=t.to,d=Object(g.useState)(),f=Object(p.a)(d,2),b=f[0],m=f[1],v=Mt().preferences,O=Object(g.useMemo)((function(){var e=ha(v,"integrals")||{},t=e.color,n=void 0===t?pa.color:t,a=e.strokeWidth;return{color:n,strokeWidth:void 0===a?pa.strokeWidth:a}}),[v]);Object(g.useEffect)((function(){var e=Object(L.i)({x:n,y:a},{from:u,to:s,reverse:!0});m(e)}),[u,s,n,a]);var j=Object(g.useCallback)((function(){if(b&&c){var e=Object(L.k)(b,{from:i[0],to:i[1],nbPoints:200,optimize:!0}),t="M ".concat(l()(e.x[0])," ").concat(c(e.y[0]));return t+=e.x.slice(1).reduce((function(t,n,a){return t+=" L ".concat(l()(n)," ").concat(c(e.y[a+1]))}),"")}return""}),[b,l,c,i]);return h.a.createElement(g.Fragment,null,h.a.createElement("path",{className:"line",stroke:O.color,strokeWidth:O.strokeWidth,fill:"none",style:{transformOrigin:"center top",opacity:r?1:.2},d:j()}),h.a.createElement(wa,{spectrumID:o,integralSeries:b,integralData:t,scaleY:c}))};function Sa(){var e=Object(f.a)(["\n  -webkit-clip-path: url('#clip');\n  clip-path: url('#clip');\n\n  path {\n    fill: none;\n    // stroke-linejoin: round;\n    // stroke-linecap: round;\n    // will-change: transform;\n  }\n"]);return Sa=function(){return e},e}var Ta=Object(m.b)(Sa()),Ia=function(){var e=Mt(),t=e.xDomain,n=e.activeSpectrum,a=e.data,i=e.height,r=e.margin,o=e.integralsYDomains,c=Bt().scaleX,l=Object(g.useMemo)((function(){return n&&o[n.id]?Sn.f(o[n.id],[i-(r.bottom+.3*i),r.top]):null}),[n,i,o,r]),u=Object(g.useMemo)((function(){return a&&a[0]&&a.filter((function(e){return!0===e.display.isVisible&&!0===e.isVisibleInDomain})).map((function(e){return e.integrals&&e.integrals.values&&e.integrals.values.map((function(a){return Object(m.c)("g",{key:a.id},Object(m.c)(Da,{spectrumID:e.id,integralData:a,x:e.x,y:e.y,isActive:(i=e.id,null===n||i===n.id),xDomain:t,scaleY:l,scaleX:c}));var i}))}))}),[n,a,c,l,t]);return Object(m.c)("g",{css:Ta,clipPath:"url(#clip)"},u)},Aa=Ia;Ia.contextTypes={width:ba.a.number,height:ba.a.number,data:ba.a.object,margin:ba.a.shape({top:ba.a.number.isRequired,right:ba.a.number.isRequired,bottom:ba.a.number.isRequired,left:ba.a.number.isRequired}),xDomain:ba.a.array,yDomain:ba.a.array,getScale:ba.a.func};var Ma=function(e){var t=e.x,n=e.y,a=e.id,i=e.display,r=e.index,o=Mt(),c=o.xDomain,l=o.activeSpectrum,u=o.verticalAlign,s=Bt(),d=s.scaleX,f=s.scaleY,b=Object(g.useMemo)((function(){return null===l||a===l.id}),[l,a]),p=Object(g.useMemo)((function(){return u.flag?u.stacked?r*u.value:0:u.value}),[r,u.flag,u.stacked,u.value]),m=Object(g.useMemo)((function(){if(t&&n){var e=Object(L.k)({x:t,y:n},{from:c[0],to:c[1]}),i=d(),r=f(a),o="M ".concat(i(e.x[0])," ").concat(r(e.y[0])," ");return o+=e.x.slice(1).reduce((function(t,n,a){return t+=" L ".concat(i(n)," ").concat(r(e.y[a+1]))}),"")}return null}),[a,d,f,t,c,n]);return h.a.createElement("path",{className:"line",key:a,stroke:i.color,fill:"none",style:{opacity:b?1:.2},d:m,transform:"translate(0,-".concat(p,")")})};function _a(){var e=Object(f.a)(["\n  -webkit-clip-path: url('#clip');\n  clip-path: url('#clip');\n\n  path {\n    stroke-width: 1.5;\n    fill: none;\n    // stroke-linejoin: round;\n    // stroke-linecap: round;\n    // will-change: transform;\n  }\n"]);return _a=function(){return e},e}var Pa=Object(m.b)(_a()),Ra=function(){var e=Mt(),t=e.data,n=e.tempData,a=n||t;return Object(m.c)("g",{css:Pa,clipPath:"url(#clip)"},a&&a.filter((function(e){return!0===e.display.isVisible&&!0===e.isVisibleInDomain})).map((function(e,t){return Object(m.c)(Ma,Object.assign({key:e.id},e,{index:t}))})))},La=n(196),Fa={"1h":{peakLabelNumberDecimals:2},"13c":{peakLabelNumberDecimals:1}};function Na(e){return Fa[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1h";if(e=e.toLowerCase(),!Fa[e])return"1h";return e}(e)].peakLabelNumberDecimals}function za(){var e=Object(f.a)(["\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  text,\n  input {\n    -webkit-user-select: none; /* Safari 3.1+ */\n    -moz-user-select: none; /* Firefox 2+ */\n    -ms-user-select: none; /* IE 10+ */\n    user-select: none; /* Standard syntax */\n  }\n\n  input[type='number']::-webkit-outer-spin-button,\n  input[type='number']::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  input[type='number'] {\n    -moz-appearance: textfield;\n  }\n\n  .delete-bt {\n    background-color: red;\n    color: white;\n    border: 0px;\n    border-radius: 15px;\n    padding: 0px;\n    width: 15px;\n    height: 15px;\n    border: 15px;\n    position: absolute;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .notification-input {\n    width: calc(100% - 10px) !important;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n  }\n\n  .notification-input-normal {\n    opacity: 1;\n    left: 4px;\n    position: absolute;\n    font-size: 10px;\n    outline: none;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n    background-color: transparent;\n  }\n\n  .notification-input-normal input:focus {\n    outline: none;\n    background-color: white;\n  }\n\n  .input-over {\n    background-color: white;\n    outline: none;\n  }\n\n  .notification-label {\n    display: none;\n  }\n\n  .notification-group-over {\n    z-index: 9999999999;\n  }\n\n  .notification-group {\n    z-index: 1;\n  }\n\n  .notifcate-selected {\n    opacity: 0;\n  }\n\n  input[type='number']::-webkit-inner-spin-button,\n  input[type='number']::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"]);return za=function(){return e},e}var Ha=Object(m.b)(za()),Ba=function(e){var t=e.xIndex,n=e.id,a=e.spectrumID,i=e.x,r=e.y,o=e.value,c=e.color,l=e.isActive,u=e.decimalFraction,s=Object(g.useRef)(),d=Object(g.useState)(!1),f=Object(p.a)(d,2),b=f[0],h=f[1],v=Object(g.useState)(o),O=Object(p.a)(v,2),j=O[0],y=O[1],x=Object(g.useState)({width:0,height:0}),k=Object(p.a)(x,2),E=k[0],C=k[1],w=Object(g.useState)({id:null,flag:!1}),D=Object(p.a)(w,2),S=D[0],T=D[1],I=Object(va.b)([n]),A=Rt(),M=Object(g.useCallback)((function(e){return A({type:"SHIFT_SPECTRUM",shiftValue:e.shiftValue})}),[A]),_=Object(g.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation(),A({type:"DELETE_PEAK_NOTATION",data:t})}),[A]);Object(g.useLayoutEffect)((function(){var e=s.current.getBBox();C({width:e.width,height:e.height})}),[b]),Object(g.useEffect)((function(){y(o)}),[o]);var P=Object(g.useCallback)((function(e){if("Enter"===e.key){var n=parseFloat(e.target.value),a=parseFloat(o),i=parseFloat(e.target.value)-parseFloat(o);M({id:t,value:n,oldValue:a,shiftValue:i}),e.target.blur(),h(!1)}else 27===e.keyCode&&(y(o),e.target.blur(),h(!1))}),[o,M,t]),R=Object(g.useCallback)((function(e){y(e.target.value)}),[]),L=Object(g.useCallback)((function(e){return e.preventDefault(),e.stopPropagation(),h(!0),!1}),[]),F=Object(g.useCallback)((function(e){T({id:e,flag:!0})}),[]),N=Object(g.useCallback)((function(){setTimeout((function(){T({id:null,flag:!1})}),200)}),[]);return Object(m.c)(g.Fragment,null,Object(m.c)(m.a,{styles:Ha}),Object(m.c)("g",{id:t,transform:"translate(".concat(i,", ").concat(r,")"),onMouseEnter:function(){F(t),I.show()},onMouseLeave:function(){N(),I.hide()}},Object(m.c)("line",{x1:"0",x2:"0",y1:"0",y2:"-18",stroke:c,strokeWidth:I.isActive?"7px":"1px"}),Object(m.c)("text",{className:"regular-text",ref:s,x:"0",y:-10,dy:"0.1em",dx:"0.35em",fill:"transparent"},b?o:parseFloat(o).toFixed(u)),Object(m.c)("foreignObject",{x:"0",y:-20,dy:"0.1em",dx:"0.35em",width:E.width+20,height:E.height+30,"data-no-export":"true"},Object(m.c)("div",{style:{width:E.width+20,height:E.height,paddingRight:5},xmlns:"http://www.w3.org/1999/xhtml"},Object(m.c)("input",{onClick:L,className:b?"notification-input input-over":"notification-input-normal",style:{width:"inherit",border:b?"1px solid ".concat(c):"0",opacity:l?1:.2,userSelect:"none",color:c},value:b?j:parseFloat(j).toFixed(u),onKeyDown:P,onChange:R,type:"number",disabled:!l}),S.id&&!0===S.flag&&Object(m.c)("button",{type:"button",onClick:function(e){return _(e,{xIndex:t,id:a})},className:"delete-bt",style:{left:E.width,top:E.height+7}},Object(m.c)(jn.t,null))))))},Va=function(){var e=Mt(),t=e.data,n=e.activeSpectrum,a=e.verticalAlign,i=Bt(),r=i.scaleX,o=i.scaleY,c=Object(g.useMemo)((function(){var e=function(e){var n=t.findIndex((function(t){return t.id===e}));return a.flag?a.stacked?(n+1)*a.value:0:a.value};return t&&function(){var e=Object(La.a)(t);return n?e.sort((function(e,t){return e.id===n.id?1:t.id===n.id?-1:0})):e}().filter((function(e){return!0===e.display.isVisible&&!0===e.isVisibleInDomain})).map((function(t){return t.peaks&&t.peaks.values&&t.display.isPeaksMarkersVisible&&h.a.createElement("g",{key:t.id,transform:"translate(0,-".concat(e(t.id),")")},t.peaks.values.map((function(e){var a=e.xIndex,i=e.xShift,c=e.id;return h.a.createElement(Ba,{key:c,x:r()(t.x[a]-(i||0)),y:o(t.id)(t.y[a])-5,xIndex:a,id:c,spectrumID:t.id,value:t.x[a],color:"#730000",decimalFraction:Na(t.info.nucleus),isActive:null!=n&&n.id===t.id})})))}))}),[t,a,n,r,o]);return h.a.createElement("g",{className:"peaks",clipPath:"url(#clip)"},c)},Ya=Object(g.createContext)();function Xa(e,t){switch(t.type){case"ADD":var n=Object(b.a)(Object(b.a)({},e),{},{assignment:Object(b.a)({},e.assignment)});return void 0===n.assignment[t.payload.id[0]]&&(n.assignment[t.payload.id[0]]={}),void 0===n.assignment[t.payload.id[0]][t.payload.axis]&&(n.assignment[t.payload.id[0]][t.payload.axis]=[]),n.assignment[t.payload.id[0]][t.payload.axis].push(t.payload.id[1]),n;case"REMOVE":var a=Object(b.a)(Object(b.a)({},e),{},{assignment:Object(b.a)({},e.assignment)});return void 0!==a.assignment[t.payload.id[0]]&&void 0!==a.assignment[t.payload.id[0]][t.payload.axis]&&(a.assignment[t.payload.id[0]][t.payload.axis]=a.assignment[t.payload.id[0]][t.payload.axis].filter((function(e){return e!==t.payload.id[1]}))),a;case"REMOVE_ALL":var i=Object(b.a)(Object(b.a)({},e),{},{assignment:Object(b.a)({},e.assignment)});return void 0!==i.assignment[t.payload.id]&&void 0!==i.assignment[t.payload.id][t.payload.axis]&&delete i.assignment[t.payload.id][t.payload.axis],i;case"SET_IS_ACTIVE":return Object(b.a)(Object(b.a)({},e),{},{isActive:void 0!==t.payload.id&&void 0!==t.payload.axis,activeID:t.payload.id,activeAxis:t.payload.axis});case"SET_IS_ON_HOVER":return Object(b.a)(Object(b.a)({},e),{},{isOnHover:void 0!==t.payload.id,onHoverID:t.payload.id,onHoverAxis:t.payload.axis});case"DELETE_RECORD":var r=Object(b.a)(Object(b.a)({},e),{},{assignment:Object(b.a)({},e.assignment)});return delete r.assignment[t.payload.id],r.isActive&&r.activeID===t.payload.id&&(r.isActive=!1,r.activeID=void 0,r.activeAxis=void 0),r.isOnHover&&r.onHoverID===t.payload.id&&(r.isOnHover=!1,r.onHoverID=void 0,r.onHoverAxis=void 0),r;default:throw new Error("unknown action type: ".concat(t.type))}}var Ga={assignment:{},isActive:!1,activeID:void 0,activeAxis:void 0,isOnHover:!1,onHoverID:void 0,onHoverAxis:void 0};function Ua(e){var t=Object(g.useReducer)(Xa,Ga),n=Object(p.a)(t,2),a=n[0],i=n[1],r=Object(g.useMemo)((function(){return{assignment:a,dispatch:i}}),[a]);return h.a.createElement(Ya.Provider,{value:r},e.children)}function Wa(){return Object(g.useContext)(Ya)}function Za(e){var t=Wa();if("string"!==typeof e&&"number"!==typeof e||""===e)throw new Error("assignment key must be a non-empty string or number");var n=String(e),a=Object(g.useMemo)((function(){return t.assignment.isActive&&t.assignment.activeID===n}),[t.assignment.activeID,t.assignment.isActive,n]),i=Object(g.useMemo)((function(){return a?t.assignment.activeAxis:void 0}),[t.assignment.activeAxis,a]),r=Object(g.useMemo)((function(){return t.assignment.assignment[n]?t.assignment.assignment[n]:[]}),[t.assignment.assignment,n]),o=Object(g.useMemo)((function(){return t.assignment.isOnHover&&t.assignment.onHoverID===n}),[t.assignment.isOnHover,t.assignment.onHoverID,n]),c=Object(g.useMemo)((function(){return o?t.assignment.onHoverAxis:void 0}),[t.assignment.onHoverAxis,o]),l=Object(g.useCallback)((function(e){t.dispatch({type:"ADD",payload:{id:[n,e],axis:i}})}),[i,t,n]),u=Object(g.useCallback)((function(e){t.dispatch({type:"REMOVE",payload:{id:[n,e],axis:i}})}),[i,t,n]),s=Object(g.useCallback)((function(e){t.dispatch({type:"REMOVE_ALL",payload:{id:n,axis:e}})}),[t,n]),d=Object(g.useCallback)((function(e){void 0!==r[i]&&r[i].includes(e)?u(e):l(e)}),[i,l,r,u]),f=Object(g.useCallback)((function(){t.dispatch({type:"DELETE_RECORD",payload:{id:n}})}),[t,n]),b=Object(g.useCallback)((function(e,i){e.preventDefault(),e.stopPropagation(),t.dispatch({type:"SET_IS_ACTIVE",payload:{id:a?void 0:n,axis:a||void 0===n?void 0:i}})}),[t,n,a]),p=Object(g.useCallback)((function(e,a){"enter"===e?t.dispatch({type:"SET_IS_ON_HOVER",payload:{id:n,axis:void 0!==n?a:void 0}}):"leave"===e&&t.dispatch({type:"SET_IS_ON_HOVER",payload:{}})}),[t,n]),m=Object(g.useCallback)((function(e){return p("enter",e)}),[p]),h=Object(g.useCallback)((function(e){return p("leave",e)}),[p]);return{id:n,isActive:a,activeAxis:i,assigned:r,add:l,remove:u,removeAll:s,toggle:d,deleteRecord:f,onClick:b,isOnHover:o,onHoverAxis:c,onMouseEnter:m,onMouseLeave:h}}var Ka=[{label:"massive (m)",value:"m",multiplicity:null},{label:"singlet (s)",value:"s",multiplicity:1},{label:"doublet (d)",value:"d",multiplicity:2},{label:"triplet (t)",value:"t",multiplicity:3},{label:"quartet (q)",value:"q",multiplicity:4},{label:"quintet (i)",value:"i",multiplicity:5},{label:"sextet (x)",value:"x",multiplicity:6},{label:"septet (p)",value:"p",multiplicity:7},{label:"octet (o)",value:"o",multiplicity:8},{label:"nonet (n)",value:"n",multiplicity:9}],Ja=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e||0===e.length)return!1;var n=Ka.find((function(t){return t.value===e||t.label===e}));return n&&!t.includes(n.value)&&!t.includes(n.label)},qa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return void 0!==e&&0!==e.length&&!e.split("").find((function(e){return!Ja(e,t)}))},$a=function(e){return 1===e.length?Ka.find((function(t){return t.value===e})).label:Ka.find((function(t){return t.label===e})).value},Qa=function(e){return e.length>1&&(e=$a(e)),qa(e,["m","s"])},ei={cursor:"default",opacity:.6,strokeWidth:1},ti=["red","green","blue","magenta"],ni=function(e){var t=e.rangeFrom,n=e.rangeTo,a=e.signal,i=e.signalID,r=e.options,o=void 0===r?{label:{distance:10,fontSize:11}}:r,c=Bt(),l=c.scaleX,u=c.scaleY,s=Mt(),d=s.data,f=s.activeSpectrum,h=s.showMultiplicityTrees,v=s.editRangeModalMeta,O=s.width,j=Za(i),y=Object(va.b)([j.id].concat(j.assigned.x||[])),x=Object(g.useMemo)((function(){return d&&f&&d[f.index]?d[f.index]:null}),[f,d]),k=Object(g.useState)({x1:a.delta,x2:a.delta}),E=Object(p.a)(k,2),C=E[0],w=E[1],D=Object(g.useState)({width:0,height:0,levelHeight:0}),S=Object(p.a)(D,2),T=S[0],I=S[1],A=Object(g.useState)(!1),M=Object(p.a)(A,2),_=M[0],P=M[1],R=Object(g.useState)(!1),L=Object(p.a)(R,2),F=L[0],N=L[1];Object(g.useEffect)((function(){var e=!qa(a.multiplicity,["m"]),t=e?Math.abs(l()(C.x1)-l()(C.x2)):Math.abs(l()(C.x1)-l()(C.x2))+o.label.distance,n=e?t/3:t/2,i=e?n/(a.multiplicity.length+2):n/(2*a.multiplicity.length+2);I({width:t,height:n,levelHeight:i}),P(e)}),[o.label.distance,l,a.multiplicity,C.x1,C.x2]),Object(g.useEffect)((function(){T.width/O>=.1?N(!0):N(!1)}),[T.width,O]);var z=Object(g.useMemo)((function(){var e;return x.x.forEach((function(a,i){a>=t&&a<=n&&(!e||x.y[i]>e)&&(e=x.y[i])})),u(x.id)(e)-T.height-30}),[x.x,x.id,x.y,u,T.height,t,n]),H=Object(g.useCallback)((function(e,t,n,i){if(e>=a.multiplicity.length)return n;var r=ti[e%ti.length],o=t.findIndex((function(t){return t===e})),c=o>=0&&x.info&&x.info.originFrequency?a.j[o].coupling/x.info.originFrequency:null;if(c){var l=function(e,t){if(void 0===e||0===e||void 0===t)return[1];for(var n=2*t+1,a=[],i=0;i<n-1;i++)a.push(1);for(var r=0;r<e-1;r++){for(var o=a.slice(),c=1;c<n;c++){for(var l=0;l<a.length-1;l++)o[l+c]+=a[l];o.push(1)}a=o.slice()}return a}(function(e){var t=Ka.find((function(t){return e===t.label||e===t.value}));return t?t.multiplicity:null}(a.multiplicity.charAt(e)),.5),u=l.length%2===0?i-l.length/2*c+c/2:i-(l.length/2-.5)*c;l.forEach((function(a,o){o>0&&(u+=c),n.push({startX:i,_startX:u,ratio:a,multiplicityIndex:e,color:r}),H(e+1,t,n,u)}))}else n.push({startX:i,_startX:i,ratio:1,multiplicityIndex:e,color:r}),H(e+1,t,n,i);return n}),[a.multiplicity,a.j,x.info]),B=Object(g.useMemo)((function(){var e=a.multiplicity.split("").map((function(e,t){return Qa(e)?t:void 0})).filter((function(e){return void 0!==e}));return H(0,e,[],a.delta)}),[H,a]),V=Object(g.useCallback)((function(e){var t=e.startX,n=e._startX,a=e.ratio,r=e.multiplicityIndex,c=e.color,u=2*r+2,s=z+u*T.levelHeight,d=z+(u+1)*T.levelHeight;return Object(m.c)("g",{key:"treeNode_".concat(i,"_").concat(t,"_").concat(n,"_").concat(a)},Object(m.c)("text",{textAnchor:"middle",x:l()(n)+o.label.distance,y:d+T.levelHeight/3*2,fontSize:o.label.fontSize,fill:c,visibility:F?"visible":"hidden"},a),Object(m.c)("line",{x1:l()(t),y1:s,x2:l()(n),y2:d,stroke:c}),Object(m.c)("line",{x1:l()(n),y1:d,x2:l()(n),y2:d+T.levelHeight,stroke:c}))}),[i,o.label.distance,o.label.fontSize,l,F,z,T.levelHeight]);Object(g.useEffect)((function(){if(_)w({x1:t,x2:n});else{var e={x1:a.delta,x2:a.delta};B.forEach((function(t){t.startX<e.x1&&(e.x1=t.startX),t.startX>e.x2&&(e.x2=t.startX),t._startX<e.x1&&(e.x1=t._startX),t._startX>e.x2&&(e.x2=t._startX)})),w(e)}}),[_,t,n,a.delta,a.multiplicity,B]);var Y=Object(g.useMemo)((function(){var e=z,r=Object(m.c)("text",{key:"multiplicityString_".concat(i),textAnchor:"middle",x:l()(a.delta),y:e+T.levelHeight/2,fontSize:o.label.fontSize,lengthAdjust:"spacing",fill:"black",visibility:F?"visible":"hidden"},a.multiplicity);e=z+T.levelHeight;var c=Object(m.c)("line",{key:"startLevelNode_".concat(i),x1:l()(a.delta),y1:e,x2:l()(a.delta),y2:e+T.levelHeight,stroke:ti[0]});if(e+=T.levelHeight,_){var u=l()(t),s=l()(n),d="M ".concat(u," ").concat(e+T.levelHeight," ").concat(u," ").concat(e," ").concat(l()(a.delta)," ").concat(e," ").concat(s," ").concat(e," ").concat(s," ").concat(e+T.levelHeight);return Object(m.c)("g",null,r,c,Object(m.c)("path",{d:d,stroke:"blue",fill:"none"}))}var f=[].concat([r],[c],B.map((function(e){return V(e)})));return Object(m.c)("g",null,f)}),[z,i,l,a.delta,a.multiplicity,T,o.label.fontSize,F,_,B,t,n,V]);return h&&!0===h?Object(m.c)("g",Object.assign({css:y.isActive||j.isActive?Object(b.a)(Object(b.a)({},ei),{},{opacity:1,strokeWidth:1.5}):ei},{onMouseEnter:function(){j.onMouseEnter("x"),y.show()},onMouseLeave:function(){j.onMouseLeave("x"),y.hide()}},{onClick:v&&v.rangeInEdition?null:function(e){e.shiftKey&&j.onClick(e,"x")}}),Y):null};function ai(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  .range-area {\n    height: 100%;\n    fill: #ff6f0057;\n  }\n  .delete-button {\n    visibility: visible;\n    cursor: pointer;\n  }\n"]);return ai=function(){return e},e}function ii(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  // // disabled because Resizable component appears now when hovering over it\n  // :hover .range-area {\n  //   height: 100%;\n  //   fill: #ff6f0057;\n  //   cursor: pointer;\n  // }\n\n  .delete-button {\n    visibility: hidden;\n  }\n"]);return ii=function(){return e},e}var ri=Object(m.b)(ii()),oi=Object(m.b)(ai()),ci=function(e){var t=e.rangeData,n=t.id,a=t.from,i=t.to,r=t.integral,o=t.signal,c=Za(n),l=Object(va.b)([c.id].concat(c.assigned.x||[])),u=Bt().scaleX,s=Mt().editRangeModalMeta,d=Rt(),f=Object(g.useState)(!1),h=Object(p.a)(f,2),v=h[0],O=h[1];Object(g.useEffect)((function(){O(!V(t,N))}),[t]);var j=Object(g.useCallback)((function(){d({type:"DELETE_RANGE",rangeID:n})}),[d,n]),y=Object(g.useCallback)((function(e){d({type:"RESIZE_RANGE",data:Object(b.a)(Object(b.a)({},t),e)})}),[d,t]);return Object(m.c)("g",Object.assign({css:s&&s.rangeInEdition&&s.rangeInEdition===n||l.isActive||c.isActive?oi:ri,key:n},{onMouseEnter:function(){c.onMouseEnter("x"),l.show()},onMouseLeave:function(){c.onMouseLeave("x"),l.hide()}},{onClick:s&&s.rangeInEdition?null:function(e){e.shiftKey&&c.onClick(e,"x")}}),Object(m.c)("g",{transform:"translate(".concat(u()(i),",10)")},Object(m.c)("rect",{x:"0",width:u()(a)-u()(i),height:"6",className:"range-area",fill:"green",fillOpacity:!v||l.isActive||c.isActive?1:.4}),Object(m.c)("text",{textAnchor:"middle",x:(u()(a)-u()(i))/2,y:"20",fontSize:"10",fill:"red",fillOpacity:!v||l.isActive||c.isActive?1:.6},void 0!==r?r.toFixed(2):"")),Object(m.c)(ya,{from:t.from,to:t.to,onDrop:y}),s&&s.rangeInEdition?null:Object(m.c)((function(){return Object(m.c)("svg",{className:"delete-button",x:u()(i)-20,y:10,onClick:function(){return j()},"data-no-export":"true",width:"16",height:"16"},Object(m.c)("rect",{rx:"5",width:"16",height:"16",fill:"#c81121"}),Object(m.c)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"}))}),null),o&&o.length>0?o.map((function(e,t){return Object(m.c)(ni,{rangeFrom:a,rangeTo:i,signal:e,signalID:"".concat(n).concat("___").concat(t),key:"".concat(n).concat("___").concat(t)})})):null)},li=function(){var e=Mt().data,t=Object(g.useMemo)((function(){return e&&e[0]&&e.filter((function(e){return!0===e.display.isVisible&&e.ranges&&e.ranges.values}))}),[e]);return h.a.createElement("g",{clipPath:"url(#clip)"},t.map((function(e){return h.a.createElement("g",{key:e.id},e.ranges.values.map((function(e){return h.a.createElement(ci,{key:e.id,rangeData:e})})))})))};function ui(){var e=Object(f.a)(["\n  user-select: none;\n\n  line {\n    stroke: rgb(104, 104, 104);\n    stroke-opacity: 0.2;\n    shape-rendering: crispEdges;\n    stroke-dasharray: 3;\n    stroke-width: 1;\n    user-select: none;\n  }\n\n  path {\n    stroke-width: 0;\n  }\n"]);return ui=function(){return e},e}function si(){var e=Object(f.a)(["\n  user-select: none;\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: none;\n  }\n"]);return si=function(){return e},e}var di=Object(m.b)(si()),fi=Object(m.b)(ui()),bi=function(e){var t=e.label,n=e.show,a=e.showGrid,i=e.mode,r=Mt(),o=r.xDomain,c=r.height,l=r.width,u=r.margin,s=Bt().scaleX,d=Object(g.useRef)(),f=Object(g.useRef)();t=t||("RTL"===i?"\u03b4 [ppm]":"time [s]"),Object(g.useEffect)((function(){var e=Sn.a().ticks(8).tickFormat(Sn.d("0")),t=Sn.a().ticks(50).tickSize(-(c-u.top-u.bottom)).tickFormat("");n&&s&&(Sn.g(d.current).call(e.scale(s().domain(o))),Sn.g(f.current).call(t.scale(s().domain(o))))}),[c,u.bottom,u.top,s,n,o]);var b=Object(g.useMemo)((function(){return n&&!0===n&&Object(m.c)("g",{className:"x",css:di,transform:"translate(0,".concat(c-u.bottom,")"),ref:d},Object(m.c)("text",{fill:"#000",x:l-60,y:"20",dy:"0.71em",textAnchor:"end"},t))}),[c,t,u.bottom,n,l]),p=Object(g.useMemo)((function(){return a&&!0===a&&Object(m.c)("g",{css:fi,className:"grid",ref:f,transform:"translate(0,".concat(c-u.bottom,")")})}),[a,c,u.bottom]);return l&&c&&s?Object(m.c)(h.a.Fragment,null,b,p):null};bi.defaultProps={showGrid:!1,show:!0,label:""};var pi=bi;var mi=function(e){var t=e.mode,n=e.width,a=e.height,i=e.margin,r=Bt(),o=r.scaleX,c=r.scaleY;return o&&c&&n&&a?h.a.createElement("svg",{viewBox:"0 0 ".concat(n," ").concat(a),width:n,height:a,id:"nmrSVG"},h.a.createElement("defs",null,h.a.createElement("clipPath",{id:"clip"},h.a.createElement("rect",{width:"".concat(n-i.left-i.right),height:"".concat(a),x:"".concat(i.left),y:"".concat(0)}))),h.a.createElement(Ra,null),h.a.createElement(Aa,null),h.a.createElement(Va,null),h.a.createElement(li,null),h.a.createElement(da,null),h.a.createElement("g",{className:"container",style:{pointerEvents:"none"}},h.a.createElement(pi,{showGrid:!0,mode:t}))):null},gi=Object(g.createContext)(),hi=gi.Provider;function vi(){var e=Object(g.useContext)(gi),t=Object(g.useCallback)((function(t){var n=t.target.getAttribute("data-helpid");n&&(t.target.style.cursor="help",e.dispatch({type:"SHOW",id:n}),e.show(n,{delay:t.ctrlKey?0:null}))}),[e]),n=Object(g.useCallback)((function(){e.dispatch({type:"HIDE"}),e.clear()}),[e]);return{show:t,hide:n,onHover:{onMouseEnter:t,onMouseLeave:n}}}n(777);var Oi=n(333),ji=n.n(Oi),yi=n(582),xi={helpText:null,helpObject:null};function ki(e,t){switch(t.type){case"SHOW":var n=e.data[t.id].text;return Object(b.a)(Object(b.a)({},e),{},{helpText:n});case"HIDE":return Object(b.a)(Object(b.a)({},e),{},{helpText:null});default:throw new Error("unknown action type: ".concat(t.type))}}var Ei,Ci,wi={TOP_LEFT:"top left",TOP_CENTER:"top center",TOP_RIGHT:"top right",MIDDLE_LEFT:"middle left",MIDDLE:"middle",MIDDLE_RIGHT:"middle right",BOTTOM_LEFT:"bottom left",BOTTOM_CENTER:"bottom center",BOTTOM_RIGHT:"bottom right"},Di="fade",Si="scale",Ti=(Ei={},Object(P.a)(Ei,Di,{transition:"opacity ".concat(250,"ms ease"),opacity:0}),Object(P.a)(Ei,Si,{transform:"scale(1)",transition:"all ".concat(250,"ms ease-in-out")}),Ei),Ii=(Ci={},Object(P.a)(Ci,Di,{entering:{opacity:0},entered:{opacity:1}}),Object(P.a)(Ci,Si,{entering:{transform:"scale(0)"},entered:{transform:"scale(1)"},exiting:{transform:"scale(0)"},exited:{transform:"scale(0)"}}),Ci),Ai=function(e){var t=e.children,n=e.type,a=Object(k.a)(e,["children","type"]);return h.a.createElement(nn.a,Object.assign({},a,{timeout:250}),(function(e){return h.a.createElement("div",{style:Object(b.a)(Object(b.a)({},Ti[n]),Ii[n][e])},t)}))},Mi=function(e){var t=e.children,n=e.options,a=n.position,i=n.containerStyle,r=Object(k.a)(e,["children","options"]),o=Object(g.useMemo)((function(){return function(e){var t={left:0,position:"fixed",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",width:"100%",pointerEvents:"none"};switch(e){case wi.TOP_LEFT:return Object(b.a)(Object(b.a)({},t),{},{top:0,alignItems:"flex-start"});case wi.TOP_CENTER:return Object(b.a)(Object(b.a)({},t),{},{top:0});case wi.TOP_RIGHT:return Object(b.a)(Object(b.a)({},t),{},{top:0,alignItems:"flex-end"});case wi.MIDDLE_LEFT:return Object(b.a)(Object(b.a)({},t),{},{top:"50%",alignItems:"flex-start"});case wi.MIDDLE:return Object(b.a)(Object(b.a)({},t),{},{top:"50%"});case wi.MIDDLE_RIGHT:return Object(b.a)(Object(b.a)({},t),{},{top:"50%",alignItems:"flex-end"});case wi.BOTTOM_LEFT:return Object(b.a)(Object(b.a)({},t),{},{bottom:0,alignItems:"flex-start"});case wi.BOTTOM_CENTER:return Object(b.a)(Object(b.a)({},t),{},{bottom:0});case wi.BOTTOM_RIGHT:return Object(b.a)(Object(b.a)({},t),{},{bottom:0,alignItems:"flex-end"});default:return t}}(a)}),[a]);return t.length>0&&h.a.createElement("div",Object.assign({style:Object(b.a)(Object(b.a)({},o),i)},r),t)};function _i(e){return Pi.apply(this,arguments)}function Pi(){return(Pi=Object(D.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return Ri(n=e.sent),e.next=6,n.text();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ri(e){if(!e.ok)throw new Error("HTTP ".concat(e.status," - ").concat(e.statusText));return e}var Li={innerContainer:{display:"flex",flexDirection:"column",width:"100%",height:"100%",borderRadius:"5px",padding:"10px"},outerContainer:{boxSizing:"initial",backgroundColor:"rgba(255, 255, 255, 1)",boxShadow:"0px 0px 0px 0px, rgba(0, 0, 0, 0.1) 0px 3px 5px",pointerEvents:"all"},closeButton:{border:"none",color:"red",backgroundColor:"transparent",outline:"none"}},Fi=null,Ni=function(e){var t=e.children,n=e.data,a=e.offset,i=e.position,r=e.timeout,o=e.delay,c=e.type,l=e.transition,u=e.containerStyle,s=e.wrapperID,d=e.multiple,f=Object(g.useRef)(),m=Object(g.useRef)([]),v=Object(g.useState)([]),O=Object(p.a)(v,2),j=O[0],y=O[1];Object(g.useEffect)((function(){f.current=document.createElement("div"),s?document.getElementById(s).appendChild(f.current):document.body.appendChild(f.current);var e=m.current;return function(){e.forEach(clearTimeout),f.current&&(s?document.getElementById(s).removeChild(f.current):document.body.removeChild(f.current))}}),[s]);var x,k=Object(g.useCallback)((function(e){y((function(t){var n=t.length,a=t.filter((function(t){return t.id!==e.id}));return n>a.length&&e.options.onClose&&e.options.onClose(),a}))}),[]),E=Object(g.useCallback)(function(){var e=Object(D.a)(C.a.mark((function e(t){var a,l,u,s,f,p,g=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g.length>1&&void 0!==g[1]?g[1]:{delay:null},j.some((function(e){return e.helpid===t}))){e.next=18;break}return e.prev=2,e.next=5,_i(n[t].filePath);case 5:return l=e.sent,u=Math.random().toString(36).substr(2,9),s=Object(b.a)({position:a.position||i,timeout:r,type:c},a),(f={helpid:t,id:u,mdtext:l,options:s}).close=function(){return k(f)},p=function(){if(f.options.timeout){var e=setTimeout((function(){k(f),m.current.splice(m.current.indexOf(e),1)}),f.options.timeout);m.current.push(e)}y((function(e){return d?e.concat(f):[f]})),f.options.onOpen&&f.options.onOpen()},0===a.delay?p():Fi=setTimeout((function(){p()}),a.delay>0?a.delay:o),e.abrupt("return",f);case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),[n,o,j,d,i,k,r,c]),w=Object(g.useCallback)((function(){clearTimeout(Fi)}),[]),S=Object(g.useReducer)(ki,Object(b.a)(Object(b.a)({},xi),{},{data:n})),T=Object(p.a)(S,2),I=T[0],A=T[1],M=Object(g.useMemo)((function(){return{helpState:I,dispatch:A,show:E,clear:w}}),[w,I,E]),_=(x=function(e){return e.options&&e.options.position},j.reduce((function(e,t){var n=x(t);return e[n]||(e[n]=[]),e[n].push(t),e}),{}));return h.a.createElement(hi,{value:M},t,f.current&&Object(Gt.createPortal)(h.a.createElement(g.Fragment,null,Object.keys(wi).map((function(e){var t=wi[e];return h.a.createElement(Ut.a,{appear:!0,key:t,options:{position:i,containerStyle:u},component:Mi},_[t]?_[t].map((function(e){return h.a.createElement(Ai,{type:l,key:e.id},h.a.createElement(yi.a,{style:Object(b.a)({margin:a},Li.outerContainer),default:{x:-200,y:0,width:400,height:400}},h.a.createElement("div",{style:Li.innerContainer},h.a.createElement("div",null,h.a.createElement("button",{type:"button",onClick:function(){return k(e)},style:Li.closeButton},h.a.createElement(jn.D,null))),e.mdtext&&h.a.createElement("div",{style:{overflow:"auto",cursor:"default"}},h.a.createElement(ji.a,{source:e.mdtext,transformImageUri:function(t){return function(e,t){return"".concat(t.substr(0,t.lastIndexOf("/")+1)).concat(e)}(t,n[e.helpid].filePath)}})))))})):null)}))),f.current))};Ni.defaultProps={offset:"10px",position:wi.TOP_RIGHT,timeout:0,delay:2e3,transition:Si,containerStyle:{zIndex:100},wrapperID:null,multiple:!1};var zi=Ni;function Hi(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  span {\n    font-size: 10px;\n    color: black;\n    display: inline-block;\n    text-overflow: ellipsis;\n    width: 100%;\n    white-space: nowrap;\n    overflow: hidden;\n  }\n"]);return Hi=function(){return e},e}function Bi(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n\n  .help {\n    font-size: 6px;\n    color: black;\n  }\n\n  div {\n    margin: 0px 10px;\n    display: inline-block;\n\n    .label {\n      font-size: 12px;\n      color: #4d4d4d;\n      font-weight: bold;\n    }\n    .value {\n      font-weight: bold;\n      font-size: 14px;\n    }\n    .unit {\n      font-weight: bold;\n      font-size: 10px;\n    }\n  }\n"]);return Bi=function(){return e},e}var Vi=Object(m.b)(Bi()),Yi=Object(m.b)(Hi()),Xi=function(){var e=Object(g.useContext)(Dt),t=Object(g.useContext)(xt),n=t.startX,a=t.endX,i=t.step,r=Mt(),o=r.margin,c=r.width,l=r.height,u=r.activeSpectrum,s=r.data,d=Bt(),f=d.scaleX,b=d.scaleY,p=Object(g.useContext)(gi).helpState.helpText,h=Object(g.useCallback)((function(e){if(u){var t=Object(L.f)(s[u.index].x,f().invert(e));return s[u.index].y[t]}return 1}),[u,s,f]);if(p)return Object(m.c)("div",{css:Yi},Object(m.c)("span",{className:"help"},p));if(!u||!e||e.y<o.top||e.x<o.left||e.x>c-o.right||e.y>l-o.bottom)return Object(m.c)("div",{css:Vi});var v=s[u.index].info.originFrequency;return Object(m.c)("div",{css:Vi},Object(m.c)("div",null,Object(m.c)("span",{className:"label"}," X :"),Object(m.c)("span",{className:"value"},f().invert(e.x).toPrecision(6)),Object(m.c)("span",{className:"unit"},"ppm")),v&&Object(m.c)("div",null,Object(m.c)("span",{className:"label"}," X :"),Object(m.c)("span",{className:"value"},(f().invert(e.x)*v).toPrecision(6)),Object(m.c)("span",{className:"unit"},"Hz")),Object(m.c)("div",null,Object(m.c)("span",{className:"label"}," Y :"),Object(m.c)("span",{className:"value"},b(u.id).invert(e.y).toFixed(2))),"brushing"===i&&Object(m.c)("div",null,Object(m.c)("span",{className:"label"}," \u0394ppm :"),Object(m.c)("span",{className:"value"},(f().invert(n)-f().invert(a)).toPrecision(6))),v&&"brushing"===i&&Object(m.c)("div",null,Object(m.c)("span",{className:"label"}," \u0394Hz :"),Object(m.c)("span",{className:"value"},((f().invert(n)-f().invert(a))*v).toPrecision(5))),"brushing"===i&&Object(m.c)("div",null,Object(m.c)("span",{className:"label"}," ratio :"),Object(m.c)("span",{className:"value"},(h(n)/(h(a)||Number.MIN_VALUE)*100).toFixed(2),"%")))},Gi=10,Ui="#1f1f1f",Wi=1,Zi=0,Ki=1,Ji=function(){var e=Mt(),t=e.height,n=e.width,a=e.margin,i=e.activeSpectrum,r=e.data,o=e.mode,c=e.selectedTool,l=e.verticalAlign,u=Bt(),s=u.scaleX,d=u.scaleY,f=Object(g.useContext)(Dt),b=Object(g.useContext)(xt),m=Object(g.useState)(),v=Object(p.a)(m,2),O=v[0],j=v[1];return Object(g.useEffect)((function(){var e=function(e,t){if(i&&f&&c===Kn.peakPicking.id){var n=[s().invert(t.x-e),s().invert(t.x+e)].sort((function(e,t){return e-t})),a=r.find((function(e){return e.id===i.id})),o=a.x.findIndex((function(e){return e>=n[1]}))-1,u=a.x.findIndex((function(e){return e>=n[0]})),b=a.y.slice(u,o);if(b&&b.length>0){var p=Object(R.a)(b),m=b.findIndex((function(e){return e===p})),g=a.x[u+m];return{x:s()(g),y:d(i.id)(p)-(i?l.flag?l.stacked?(i.index+1)*l.value:0:l.value:0),xIndex:u+m}}}return null}(10,f);j(e)}),[i,r,o,f,s,d,c,l]),c!==Kn.peakPicking.id||!O||!i||"brushing"===b.step||!f||f.y<a.top||f.left<a.left||f.x>n-a.right||f.y>t-a.bottom?null:h.a.createElement("div",{key:"peakPointer",style:{cursor:"crosshair",transform:"translate(".concat(O.x,"px, ").concat(O.y,"px)"),transformOrigin:"top left",position:"absolute",top:-(Gi+Ki),left:-(Gi+Ki),pointerEvents:"none",overflow:"visible"}},h.a.createElement("svg",{width:2*Gi+2*Ki,height:2*Gi+2*Ki},h.a.createElement("circle",{cx:Gi+Ki,cy:Gi+Ki,r:Gi,stroke:Ui,strokeWidth:Wi,fillOpacity:Zi}),h.a.createElement("line",{x1:Gi+Ki,y1:Ki,x2:Gi+Ki,y2:2*Gi+Ki,stroke:Ui,strokeWidth:Wi}),h.a.createElement("line",{x1:Ki,y1:Gi+Ki,x2:2*Gi+Ki,y2:Gi+Ki,stroke:Ui,strokeWidth:Wi})))},qi={transformOrigin:"top left",position:"absolute",top:"0px",left:"0px",width:1,backgroundColor:"red"},$i=function(){var e=Mt(),t=e.height,n=e.selectedTool,a=e.pivot,i=Bt().scaleX;return Kn.phaseCorrection.id!==n?null:h.a.createElement("div",{style:Object(b.a)(Object(b.a)({},qi),{},{transform:"translate(".concat(i()(a),"px, 0px)"),height:t})})},Qi={cursor:"crosshair",transformOrigin:"bottom right",position:"absolute",top:"-18px",left:"-30px",pointerEvents:"none",overflow:"visible",userSelect:"none"},er=function(){var e=Mt(),t=e.height,n=e.width,a=e.margin,i=e.data,r=e.activeSpectrum,o=Bt().scaleX,c=Object(g.useContext)(Dt),l=Object(g.useContext)(xt),u=Object(g.useCallback)((function(e){var t=i.find((function(e){return e.id===r.id}));if(t)return o().invert(e).toFixed(Na(t.info.nucleus))}),[i,r,o]);return!r||"brushing"===l.step||!c||c.y<a.top||c.x<a.left||c.x>n-a.right||c.y>t-a.bottom?null:h.a.createElement("div",{key:"xLabelPointer",style:Object(b.a)(Object(b.a)({},Qi),{},{transform:"translate(".concat(c.x,"px, ").concat(c.y,"px)")})},h.a.createElement("span",null,u(c.x)))},tr=function(){var e=Nt().general,t=Mt(),n=t.selectedTool,a=t.isLoading,i=t.data,r=t.mode,o=t.width,c=t.height,l=t.margin,u=t.activeSpectrum,s=t.xDomain,d=t.xDomains,f=t.yDomain,m=t.yDomains,v=t.verticalAlign,O=Rt(),j=bn(),y=Object(g.useReducer)(Zn,Wn),x=Object(p.a)(y,2),k=x[0],E=x[1];Object(g.useEffect)((function(){E({type:"SET_Y_SCALE",yDomain:f,yDomains:m,margin:l,height:c,verticalAlign:v})}),[c,l,v,f,m]),Object(g.useEffect)((function(){E({type:"SET_X_SCALE",xDomain:s,xDomains:d,width:o,margin:l,mode:r})}),[l,o,s,d,r]);var C=Object(g.useCallback)((function(t){if(t.altKey)switch(n){case Kn.rangesPicking.id:e.disableMultipletAnalysis||j.show(h.a.createElement(Dn,Object.assign({data:i,activeSpectrum:u,scaleX:k.scaleX},t)),{onClose:function(){j.close()}})}else if(t.shiftKey)switch(n){case Kn.integral.id:O(Object(b.a)({type:"ADD_INTEGRAL"},t));break;case Kn.rangesPicking.id:O(Object(b.a)({type:"ADD_RANGE"},t));break;case Kn.peakPicking.id:O(Object(b.a)({type:"ADD_PEAKS"},t));break;default:!function(){var e=t.startX,n=t.endX,a=k.scaleX().invert(e),i=k.scaleX().invert(n);la.publish("brushEnd",Object(b.a)(Object(b.a)({},t),{},{range:[a,i]}))}()}else switch(n){case Kn.baseLineCorrection.id:O({type:"ADD_BASE_LINE_ZONE",zone:{from:t.startX,to:t.endX}});break;default:if(null!=n)return O(Object(b.a)({type:"BRUSH_END"},t))}}),[k,n,e,j,i,u,O]),w=Object(g.useCallback)((function(){O({type:"FULL_ZOOM_OUT",zoomType:Hn})}),[O]),D=Object(g.useCallback)((function(e){switch(n){case Kn.integral.id:O(Object(b.a)({type:"CHANGE_INTEGRAL_ZOOM"},e));break;default:return void O(Object(b.a)({type:"SET_ZOOM_FACTOR"},e))}}),[O,n]),S=Object(g.useCallback)((function(e){n===Kn.peakPicking.id?O({type:"ADD_PEAK",mouseCoordinates:e}):n===Kn.phaseCorrection.id&&O({type:"SET_VERTICAL_INDICATOR_X_POSITION",position:e.x})}),[O,n]),T=Object(jt.a)((function(){return h.a.createElement(g.Fragment,null,h.a.createElement(On,{isLoading:a}),i&&i.length>0&&h.a.createElement(Ct,{onBrush:C,onDoubleClick:w,onClick:S,onZoom:D,style:{width:"100%",height:"100%",margin:"auto",position:"relative",overflow:"hidden"}},h.a.createElement(Tt,{style:{width:"100%",height:"100%",position:"absolute"}},h.a.createElement(ra,null),h.a.createElement(na,{brushType:$n}),h.a.createElement(er,null),h.a.createElement(Ji,null),h.a.createElement($i,null),h.a.createElement(Xi,null),h.a.createElement(mi,{width:o,height:c,margin:l,mode:r}))))}),[]),I=Object(p.a)(T,2),A=I[0],M=I[1],_=M.width,P=M.height,R=Object(g.useState)(),L=Object(p.a)(R,2),F=L[0],N=L[1];return Object(yt.a)((function(){return N({width:_,height:P})}),400,[_,P]),Object(g.useEffect)((function(){F&&O(Object(b.a)({type:"SET_DIMENSIONS"},F))}),[O,F]),h.a.createElement(Ht,{value:k},A)},nr={TOP_1D:"TOP_1D",LEFT_1D:"LEFT_1D",CENTER_2D:"CENTER_2D"};function ar(e,t){for(var n=0,a=Object.keys(e);n<a.length;n++){var i=a[n];if(t.startX>=e[i].startX&&t.startX<=e[i].endX&&t.startY>=e[i].startY&&t.startY<=e[i].endY)return i}return null}function ir(e){var t=e.width,n=e.margin,a=e.xDomain;return Object(Sn.f)(a,[t-n.right,n.left])}function rr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.height,a=e.margin,i=e.yDomain;return Object(Sn.f)(i,t?[n-a.bottom,a.top]:[a.top,n-a.bottom])}function or(e,t){if(![nr.TOP_1D,nr.LEFT_1D].includes(t))throw new Error("layout is required and must be ".concat(nr.TOP_1D," or ").concat(nr.LEFT_1D,"  "));switch(t){case nr.TOP_1D:var n=e.width,a=e.margin,i=e.xDomain;return Object(Sn.f)(i,[n-a.right,a.left]);case nr.LEFT_1D:var r=e.height,o=e.margin,c=e.yDomain;return Object(Sn.f)(c,[r-o.bottom,o.top])}}function cr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(Sn.f)(e,[t-n,n])}var lr=function(){var e=Mt().data,t=function(e){var t=e.id,n=e.sign,a=e.color,i=Mt(),r=i.margin,o=i.width,c=i.height,l=i.xDomain,u=i.yDomain,s=i.contours,d=function(e){var t=ir({margin:r,width:o,xDomain:l}),n=rr({margin:r,height:c,yDomain:u}),a=" M ".concat(t(e[0].x)," ").concat(n(e[0].y)," ");return a+=e.slice(1).reduce((function(e,a){return e+=" L ".concat(t(a.x)," ").concat(n(a.y)," ")}),""),a+=" z"};return s&&s[t][n]&&s[t][n].length>0&&s[t][n].map((function(e,t){return h.a.createElement("path",{key:t,fill:"none",stroke:a,strokeWidth:"1",d:d(e)})}))};return h.a.createElement("g",{clipPath:"url(#clip)",className:"contours"},e.filter((function(e){return 2===e.info.dimension})).map((function(e,n){return h.a.createElement("g",{key:n},e.display.isPositiveVisible&&h.a.createElement(t,{id:e.id,sign:"positive",color:e.display.positiveColor}),e.display.isNegativeVisible&&h.a.createElement(t,{id:e.id,sign:"negative",color:e.display.negativeColor}))})))},ur={DM_1D:"1D",DM_2D:"2D"},sr={top:100,right:50,bottom:70,left:100},dr={top:10,right:10,bottom:70,left:10};function fr(){var e=Object(f.a)(["\n  stroke: lightgrey;\n  opacity: 0.7;\n"]);return fr=function(){return e},e}var br=Object(m.b)(fr()),pr=function(e){var t=e.axis,n=e.show,a=Mt(),i=a.data,r=a.activeTab,o=a.margin,c=a.width,l=a.height,u=a.xDomain,s=a.yDomain,d=a.displayerMode,f=Object(g.useState)([]),b=Object(p.a)(f,2),h=b[0],v=b[1],O=ir({margin:o,width:c,xDomain:u}),j=rr({margin:o,height:l,yDomain:s});Object(g.useEffect)((function(){var e=r.split(",");if(d===ur.DM_2D&&2===e.length){var n="X"===t?e[0]:"Y"===t?e[1]:null;if(null!==n){var a=i.filter((function(e){return 1===e.info.dimension&&!0===e.display.isVisible&&e.info.nucleus===n})).map((function(e){return e.ranges.values})).flat().map((function(e){return e.signal.map((function(e){return z.some((function(t){return e.kind===t}))?e.delta:null})).flat()})).flat().filter((function(e){return e}));v(a)}else v([])}else v([])}),[r,t,i,d]);var y=Object(g.useMemo)((function(){if(!0===n&&h.length>0)return h.map((function(e,n){return"X"===t?Object(m.c)("line",{css:br,key:"indicationLine".concat(t).concat(n),x1:O(e),x2:O(e),y1:j(s[0]),y2:j(s[1])}):"Y"===t?Object(m.c)("line",{css:br,key:"indicationLine".concat(t).concat(n),x1:O(u[0]),x2:O(u[1]),y1:j(e),y2:j(e)}):null}))}),[t,h,O,j,n,u,s]);return Object(m.c)("g",null,y)},mr=Object(g.memo)((function(e){var t=e.margin,n=e.data,a=Mt(),i=a.height,r=a.margin,o=a.yDomain,c=a.yDomains,l=r.left,u=Object(g.useMemo)((function(){if(n){var e=or({height:i,yDomain:o,margin:r},nr.LEFT_1D),a=cr(c[n.id],l,t),u=n.x,s=n.y,d=Object(L.k)({x:u,y:s},{from:o[0],to:o[1]}),f="M ".concat(e(d.x[0])," ").concat(a(d.y[0])," ");return f+=d.x.slice(1).reduce((function(t,n,i){return t+=" L ".concat(e(n)," ").concat(a(d.y[i+1]))}),"")}return null}),[n,l,r,t,i,o,c]),s=i-r.bottom-r.top;return s&&l?h.a.createElement("svg",{viewBox:"0 0 ".concat(l," ").concat(s+r.top),width:l,height:s+r.top},h.a.createElement("defs",null,h.a.createElement("clipPath",{id:"clip-left"},h.a.createElement("rect",{width:s,height:l,x:r.top,y:"".concat(0)}))),h.a.createElement("g",{clipPath:"url(#clip-left)",style:{transform:"rotate(-90deg) translate(-".concat(r.top,"px,-").concat(s+r.top,"px)"),transformOrigin:"".concat(s+r.top,"px 0px")}},h.a.createElement("path",{className:"line",stroke:"black",fill:"none",d:u}))):null}));mr.defaultProps={margin:10};var gr=mr,hr=Object(g.memo)((function(e){var t=e.margin,n=e.data,a=Mt(),i=a.width,r=a.margin,o=a.xDomain,c=a.yDomains,l=r.top,u=Object(g.useMemo)((function(){if(n){var e=or({width:i,xDomain:o,margin:r},nr.TOP_1D),a=cr(c[n.id],l,t),u=n.x,s=n.y,d=Object(L.k)({x:u,y:s},{from:o[0],to:o[1]}),f="M ".concat(e(d.x[0])," ").concat(a(d.y[0])," ");return f+=d.x.slice(1).reduce((function(t,n,i){return t+=" L ".concat(e(n)," ").concat(a(d.y[i+1]))}),"")}return null}),[n,l,t,r,i,o,c]);return i&&l?h.a.createElement("svg",{viewBox:"0 0 ".concat(i," ").concat(l),width:i,height:l},h.a.createElement("defs",null,h.a.createElement("clipPath",{id:"clip-top"},h.a.createElement("rect",{width:i-r.left-r.right,height:l,x:r.left,y:"".concat(0)}))),h.a.createElement("g",{clipPath:"url(#clip-top)"},h.a.createElement("path",{className:"line",stroke:"red",fill:"none",d:u}))):null}));hr.defaultProps={margin:10};var vr=hr;function Or(){var e=Object(f.a)(["\n  user-select: none;\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: none;\n  }\n"]);return Or=function(){return e},e}var jr=Object(m.b)(Or()),yr=Object(g.memo)((function(e){var t=e.show,n=e.label,a=e.margin,i=Mt(),r=i.xDomain,o=i.height,c=i.width,l=i.margin,u=i.tabActiveSpectrum,s=i.activeTab,d=Object(g.useRef)();Object(g.useEffect)((function(){var e=Sn.a().ticks(8).tickFormat(Sn.d("0"));if(t){var n=ir({width:c,margin:l,xDomain:r});Sn.g(d.current).call(e.scale(n))}}),[s,o,l,l.bottom,l.left,l.right,l.top,t,u,c,r]);var f=Object(g.useMemo)((function(){return t&&!0===t&&Object(m.c)("g",{className:"x",css:jr,transform:"translate(0,".concat(o-(l.bottom+a.bottom),")"),ref:d},Object(m.c)("text",{fill:"#000",x:c-60,y:"20",dy:"0.71em",textAnchor:"end"},n))}),[o,n,l.bottom,a.bottom,t,c]);return c&&o?f:null}));yr.propTypes={margin:ba.a.shape({top:ba.a.number.isRequired,right:ba.a.number.isRequired,bottom:ba.a.number.isRequired,left:ba.a.number.isRequired}),show:ba.a.bool,label:ba.a.string},yr.defaultProps={show:!0,label:"\u03b4 [ppm]",margin:{right:100,top:0,left:0,bottom:0}};var xr=yr;function kr(){var e=Object(f.a)(["\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n  }\n"]);return kr=function(){return e},e}var Er=Object(m.b)(kr()),Cr=Object(g.memo)((function(e){var t=e.show,n=e.label,a=e.margin,i=Object(g.useRef)(),r=Mt(),o=r.yDomain,c=r.width,l=r.height,u=r.activeTab,s=r.tabActiveSpectrum,d=r.margin;Object(g.useEffect)((function(){var e=Sn.b().ticks(8).tickFormat(Sn.d("0"));if(t&&o){var n=rr({height:l,yDomain:o,margin:d});Sn.g(i.current).call(e.scale(n))}}),[t,o,u,s,l,d]);var f=Object(g.useMemo)((function(){return t&&!0===t&&Object(m.c)(g.Fragment,null,Object(m.c)("g",{className:"y",css:Er,transform:"translate(".concat(c-a.right,")"),ref:i},Object(m.c)("text",{fill:"#000",x:-a.top,y:-(a.right-5),dy:"0.71em",transform:"rotate(-90)",textAnchor:"end"},n)))}),[n,a.right,a.top,t,c]);return c&&l?f:null})),wr=Cr;function Dr(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  .Integral-area {\n    // height: 100%;\n    fill: #ff6f0057;\n  }\n  .delete-button {\n    visibility: visible;\n    cursor: pointer;\n  }\n"]);return Dr=function(){return e},e}function Sr(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  // // disabled because Resizable component appears now when hovering over it\n  // :hover .range-area {\n  //   height: 100%;\n  //   fill: #ff6f0057;\n  //   cursor: pointer;\n  // }\n\n  .delete-button {\n    visibility: hidden;\n  }\n"]);return Sr=function(){return e},e}Cr.contextTypes={showGrid:ba.a.bool,show:ba.a.bool,label:ba.a.string,margin:ba.a.shape({top:ba.a.number,right:ba.a.number,bottom:ba.a.number,left:ba.a.number})},Cr.defaultProps={show:!0,label:"",margin:{right:50,top:0,bottom:0,left:0}};var Tr=Object(m.b)(Sr()),Ir=Object(m.b)(Dr()),Ar=function(e){var t=e.x,n=e.y,a=e.id,i=e.onDelete,r=Za(a),o=Object(va.b)([r.id]),c=Mt(),l=c.margin,u=c.width,s=c.height,d=c.xDomain,f=c.yDomain,b=ir({margin:l,width:u,xDomain:d}),p=rr({margin:l,height:s,yDomain:f}),h=t.from,v=t.to,O=n.from,j=n.to,y=Object(g.useCallback)((function(){i(a)}),[a,i]);return Object(m.c)("g",Object.assign({css:o.isActive||r.isActive?Ir:Tr,key:a},o.onHover),Object(m.c)("g",{transform:"translate(".concat(b(h),",").concat(p(O),")")},Object(m.c)("rect",{x:"0",width:b(v)-b(h),height:p(j)-p(O),className:"Integral-area",fill:"#0000000f",stroke:" #343a40",strokeWidth:"0.1"})),Object(m.c)((function(){return Object(m.c)("svg",{className:"delete-button",x:b(h)-20,y:p(O),onClick:function(){return y()},"data-no-export":"true",width:"16",height:"16"},Object(m.c)("rect",{rx:"5",width:"16",height:"16",fill:"#c81121"}),Object(m.c)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"}))}),null))};Ar.defaultProps={onDelete:function(){return null}};var Mr=Ar,_r=function(){var e=Mt().data,t=Rt(),n=Object(g.useMemo)((function(){return e?e.filter((function(e){return 2===e.info.dimension&&!0===e.display.isVisible})):[]}),[e]),a=Object(g.useCallback)((function(e){t({type:"DELETE_2D_ZONE",zoneID:e})}),[t]);return h.a.createElement("g",{clipPath:"url(#clip)",className:"2D-Zones"},n.map((function(e){return h.a.createElement("g",{key:e.id},e.zones.values.map((function(e){return h.a.createElement(Mr,Object.assign({key:e.id},e,{onDelete:a}))})))})))},Pr=function(e){var t=e.data,n=Mt(),a=n.width,i=n.height,r=n.margin;return Object(g.useMemo)((function(){return h.a.createElement("svg",{viewBox:"0 0 ".concat(a," ").concat(i),width:a,height:i,id:"nmrSVG"},h.a.createElement("defs",null,h.a.createElement("clipPath",{id:"clip"},h.a.createElement("rect",{width:a-r.left-r.right,height:i-r.top-r.bottom,x:r.left,y:r.top}))),h.a.createElement("rect",{width:a-r.left-r.right,height:i-r.top-r.bottom,x:r.left,y:r.top,stroke:"black",strokeWidth:"1",fill:"transparent"}),t&&t[0]&&h.a.createElement(vr,{data:t[0]}),t&&t[1]&&h.a.createElement(gr,{data:t[1]}),h.a.createElement(lr,null),h.a.createElement(_r,null),h.a.createElement(pr,{axis:"X",show:!0}),h.a.createElement(pr,{axis:"Y",show:!0}),h.a.createElement("g",{className:"container",style:{pointerEvents:"none"}},h.a.createElement(xr,null),h.a.createElement(wr,null)))}),[a,i,r.left,r.right,r.top,r.bottom,t])};Pr.defaultProps={onDimensionChange:function(){return null}},Pr.propsTypes={onDimensionChange:ba.a.func.isRequired};var Rr=Pr,Lr=n(221);function Fr(){var e=Object(f.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  div {\n    margin: 0px 10px;\n    display: inline-block;\n\n    .label {\n      font-size: 12px;\n      color: #4d4d4d;\n      font-weight: bold;\n    }\n    .value {\n      font-weight: bold;\n      font-size: 14px;\n    }\n    .unit {\n      font-weight: bold;\n      font-size: 10px;\n    }\n  }\n"]);return Fr=function(){return e},e}var Nr=Object(m.b)(Fr()),zr=function(e){var t=e.layout,n=e.data1D,a=Object(g.useContext)(Dt),i=Object(g.useContext)(xt),r=i.startX,o=i.endX,c=i.startY,l=i.endY,u=i.step,s=Mt(),d=s.margin,f=s.width,b=s.height,p=s.activeSpectrum,h=s.xDomain,v=s.yDomain,O=s.yDomains,j=s.activeTab,y=a&&ar(t,{startX:a.x,startY:a.y}),x=j.split(","),k=Object(g.useMemo)((function(){if(!n||0===n.length)return ir({width:f,margin:d,xDomain:h});switch(y){case nr.TOP_1D:case nr.CENTER_2D:return ir({width:f,margin:d,xDomain:h});case nr.LEFT_1D:return rr({height:b,margin:d,yDomain:v});default:return null}}),[n,b,d,y,f,h,v]),E=Object(g.useMemo)((function(){if(!n||0===n.length)return rr({height:b,margin:d,yDomain:v});switch(y){case nr.CENTER_2D:return rr({height:b,margin:d,yDomain:v});case nr.TOP_1D:return cr(O[n[0].id],d.top);case nr.LEFT_1D:return cr(O[n[1].id],d.left);default:return null}}),[n,b,d,y,v,O]);if(!p||!a||a.y<10||a.x<10||a.x>f-d.right||a.y>b-d.bottom)return Object(m.c)("div",{css:Nr});var C=function(e){var t=null;if(y===nr.TOP_1D?t=0:y===nr.LEFT_1D&&(t=1),null!=t){var a=Object(L.f)(n[t].x,k.invert(e));return n[t].y[a]}return 1},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(y){case nr.CENTER_2D:case nr.TOP_1D:return k.invert(e||a.x);case nr.LEFT_1D:return k.invert(e||a.y);default:return 0}},D=function(e,t,n){return y===nr.CENTER_2D?Object(m.c)(g.Fragment,null,e," ( ",Object(m.c)(Lr.a,{mf:n})," )"):t};return Object(m.c)("div",{css:Nr},Object(m.c)("div",null,Object(m.c)("span",{className:"label"},D("F2","X",x[0])," :"),Object(m.c)("span",{className:"value"},w().toFixed(Na(x[0]))),Object(m.c)("span",{className:"unit"},"ppm")),Object(m.c)("div",null,Object(m.c)("span",{className:"label"},D("F1","Y",x[1])," :"),Object(m.c)("span",{className:"value"},function(){switch(y){case nr.CENTER_2D:case nr.TOP_1D:return E.invert(a.y);case nr.LEFT_1D:return E.invert(a.x);default:return 0}}().toFixed(Na(x[1]))),Object(m.c)("span",{className:"unit"},"ppm")),"brushing"===u&&Object(m.c)("div",null,Object(m.c)("span",{className:"label"}," \u0394ppm :"),Object(m.c)("span",{className:"value"},function(){switch(y){case nr.TOP_1D:return(w(r)-w(o)).toPrecision(6);case nr.LEFT_1D:return(w(c)-w(l)).toPrecision(6);default:return 0}}())),"brushing"===u&&Object(m.c)("div",null,Object(m.c)("span",{className:"label"}," ratio :"),Object(m.c)("span",{className:"value"},function(){switch(y){case nr.TOP_1D:return(C(r)/(C(o)||Number.MIN_VALUE)*100).toFixed(2);case nr.LEFT_1D:return(C(c)/(C(l)||Number.MIN_VALUE)*100).toFixed(2);default:return 0}}(),"%")))},Hr={cursor:"crosshair",transformOrigin:"bottom right",position:"absolute",top:"-18px",left:"-88px",fontWeight:"bold",pointerEvents:"none",overflow:"visible",userSelect:"none",width:"85px",textAlign:"right"},Br=function(e){var t=e.layout,n=e.data1D,a=Object(g.useContext)(Dt),i=Object(g.useContext)(xt).step,r=Mt(),o=r.margin,c=r.width,l=r.height,u=r.activeSpectrum,s=r.xDomain,d=r.yDomain,f=r.yDomains,p=r.activeTab,m=a&&ar(t,{startX:a.x,startY:a.y}),v=p.split(","),O=Object(g.useMemo)((function(){if(!n||0===n.length)return ir({width:c,margin:o,xDomain:s});switch(m){case nr.TOP_1D:case nr.CENTER_2D:return ir({width:c,margin:o,xDomain:s});case nr.LEFT_1D:return rr({height:l,margin:o,yDomain:d});default:return null}}),[n,l,o,m,c,s,d]),j=Object(g.useMemo)((function(){if(!n||0===n.length)return rr({height:l,margin:o,yDomain:d});switch(m){case nr.CENTER_2D:return rr({height:l,margin:o,yDomain:d});case nr.TOP_1D:return cr(f[n[0].id],o.top);case nr.LEFT_1D:return cr(f[n[1].id],o.left);default:return null}}),[n,l,o,m,d,f]);if(!u||"brushing"===i||!a||a.y<o.top||a.x<o.left||a.x>c-o.right||a.y>l-o.bottom)return null;return h.a.createElement("div",{key:"xLabelPointer",style:Object(b.a)(Object(b.a)({},Hr),{},{transform:"translate(".concat(a.x,"px, ").concat(a.y,"px)")})},h.a.createElement("span",null,function(){switch(m){case nr.CENTER_2D:case nr.TOP_1D:return j.invert(a.y);case nr.LEFT_1D:return j.invert(a.x);default:return 0}}().toFixed(Na(v[1]))),h.a.createElement("span",{style:{color:"gray"}},","),h.a.createElement("span",{style:{color:"red"}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(m){case nr.CENTER_2D:case nr.TOP_1D:return O.invert(e||a.x);case nr.LEFT_1D:return O.invert(e||a.y);default:return 0}}().toFixed(Na(v[0]))))},Vr=new Ot;function Yr(e){Vr=e}function Xr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(Sn.f)(Object(Sn.c)(t),[e-n,n])}var Gr=Object(g.memo)((function(e){var t=e.margin,n=e.data,a=Mt(),i=a.width,r=a.margin,o=a.xDomain,c=r.top,l=Object(g.useMemo)((function(){if(n){var e=n.x,a=n.re,l=ir({margin:r,width:i,xDomain:o}),u=Xr(c,a,t),s=Object(L.k)({x:e,y:a},{from:o[0],to:o[1]}),d="M ".concat(l(s.x[0])," ").concat(u(s.y[0])," ");return d+=s.x.slice(1).reduce((function(e,t,n){return e+=" L ".concat(l(t)," ").concat(u(s.y[n+1]))}),"")}return null}),[n,c,t,r,i,o]);return i&&c?h.a.createElement("svg",{viewBox:"0 0 ".concat(i," ").concat(c),width:i,height:c},h.a.createElement("defs",null,h.a.createElement("filter",{id:"blur"},h.a.createElement("feGaussianBlur",{stdDeviation:"5"})),h.a.createElement("clipPath",{id:"clip-top"},h.a.createElement("rect",{width:i-r.left-r.right,height:c,x:r.left,y:"".concat(0)}))),h.a.createElement("g",{clipPath:"url(#clip-top)"},h.a.createElement("rect",{width:i-r.left-r.right,height:c,x:r.left,y:"".concat(0),fillOpacity:"0"}),h.a.createElement("path",{className:"line",stroke:"red",fill:"none",d:l}))):null}));Gr.defaultProps={margin:10};var Ur=Gr,Wr=Object(g.memo)((function(e){var t=e.margin,n=e.data,a=Mt(),i=a.height,r=a.margin,o=a.yDomain,c=r.left,l=Object(g.useMemo)((function(){if(n){var e=n.x,a=n.re,l=rr({height:i,margin:r,yDomain:o}),u=Xr(c,a,t),s=Object(L.k)({x:e,y:a},{from:o[0],to:o[1]}),d="M ".concat(l(s.x[0])," ").concat(u(s.y[0])," ");return d+=s.x.slice(1).reduce((function(e,t,n){return e+=" L ".concat(l(t)," ").concat(u(s.y[n+1]))}),"")}return null}),[n,c,r,t,i,o]),u=i-r.bottom-r.top;return u&&c?h.a.createElement("svg",{viewBox:"0 0 ".concat(c," ").concat(u+r.top),width:c,height:u+r.top},h.a.createElement("defs",null,h.a.createElement("filter",{id:"blur"},h.a.createElement("feGaussianBlur",{stdDeviation:"5"})),h.a.createElement("clipPath",{id:"clip-left"},h.a.createElement("rect",{width:u,height:c,x:r.top,y:"".concat(0)}))),h.a.createElement("g",{clipPath:"url(#clip-left)",style:{transform:"rotate(-90deg) translate(-".concat(r.top,"px,-").concat(u+r.top,"px)"),transformOrigin:"".concat(u+r.top,"px 0px")}},h.a.createElement("rect",{width:u,height:c,x:r.top,y:"".concat(0),fillOpacity:"0"}),h.a.createElement("path",{className:"line",stroke:"red",fill:"none",d:l}))):null}));Wr.defaultProps={margin:10};var Zr=Wr,Kr=function(){var e=Mt(),t=e.width,n=e.height,a=e.margin,i=e.activeSpectrum,r=e.xDomain,o=e.yDomain,c=Object(g.useContext)(Dt),l=Object(g.useMemo)((function(){if(c&&i.id){var e=c.x,l=c.y,u=ir({margin:a,width:t,xDomain:r}),s=rr({margin:a,height:n,yDomain:o}),d=Vr.createSlice(i.id,{x:u.invert(e),y:s.invert(l)});return h.a.createElement("svg",{viewBox:"0 0 ".concat(t," ").concat(n),width:t,height:n,style:{position:"absolute",backgroundColor:"rgba(255,255,255,0.8)"}},d&&d.horizontal&&h.a.createElement(Ur,{data:d.horizontal.data}),d&&d.vertical&&h.a.createElement(Zr,{data:d.vertical.data}))}return null}),[c,i.id,a,t,r,n,o]);return c?l:null};Kr.defaultProps={onDimensionChange:function(){return null}},Kr.propsTypes={onDimensionChange:ba.a.func.isRequired};var Jr=Kr,qr=function(){var e=Mt(),t=e.selectedTool,n=e.isLoading,a=e.data,i=e.margin,r=e.tabActiveSpectrum,o=e.activeTab,c=Rt(),l=Object(g.useMemo)((function(){return o.split(",").reduce((function(e,t){if(r[t]&&r[t].id){var n=r[t].id,i=a.find((function(e){return e.id===n&&!e.info.isFid}));i&&e.push(i)}return e}),[])}),[o,a,r]),u=function(e){var t=e.width,n=e.height,a=e.margin;return{CENTER_2D:{startX:a.left,startY:a.top,endX:t-a.right,endY:n-a.bottom},TOP_1D:{startX:a.left,startY:0,endX:t-a.right,endY:a.top},LEFT_1D:{startX:0,startY:a.top,endX:a.left,endY:n-a.bottom}}}(e),s=Object(g.useCallback)((function(e){if(ar(u,e))if(e.altKey)t;else if(e.shiftKey)switch(t){case Kn.zone2D.id:c(Object(b.a)({type:"ADD_2D_ZONE"},e))}else if(null!=t)return c(Object(b.a)(Object(b.a)({type:"BRUSH_END"},e),{},{trackID:ar(u,e)}))}),[t,c,u]),d=Object(g.useCallback)((function(e){var t=e.x,n=e.y,a=ar(u,{startX:t,startY:n});a&&c({type:"FULL_ZOOM_OUT",trackID:a})}),[u,c]),f=function(e){var t=e.x,n=e.y,a=ar(u,{startX:t,startY:n});a&&c("CENTER_2D"===a?Object(b.a)({type:"SET_2D_LEVEL"},e):Object(b.a)(Object(b.a)({type:"SET_ZOOM_FACTOR"},e),{},{trackID:a}))},m=Object(g.useCallback)((function(e){e.x,e.y}),[t]),v=Object(jt.a)((function(){return h.a.createElement(g.Fragment,null,h.a.createElement(On,{isLoading:n}),a&&a.length>0&&h.a.createElement(Ct,{onBrush:s,onDoubleClick:d,onClick:m,onZoom:f,style:{width:"100%",height:"100%",margin:"auto",position:"relative",overflow:"hidden"}},h.a.createElement(Tt,{style:{width:"100%",height:"100%",position:"absolute"}},t&&t===Kn.slicingTool.id&&h.a.createElement(Jr,null),h.a.createElement(ra,null),l&&h.a.createElement(Br,{data1D:l,layout:u}),h.a.createElement(na,{brushType:ea,dimensionBorder:u.CENTER_2D}),l&&l.length>1&&h.a.createElement(h.a.Fragment,null,h.a.createElement(na,{brushType:$n,dimensionBorder:u.TOP_1D,height:i.top}),h.a.createElement(na,{brushType:Qn,dimensionBorder:u.LEFT_1D,width:i.left})),l&&h.a.createElement(zr,{data1D:l,layout:u}),h.a.createElement(Rr,{data:l}))))}),[]),O=Object(p.a)(v,2),j=O[0],y=O[1],x=y.width,k=y.height,E=Object(g.useState)(),C=Object(p.a)(E,2),w=C[0],D=C[1];return Object(yt.a)((function(){return D({width:x,height:k})}),400,[x,k]),Object(g.useEffect)((function(){w&&w.width!==1/0&&w.height!==1/0&&c(Object(b.a)({type:"SET_DIMENSIONS"},w))}),[c,w]),j},$r=n(15),Qr=n(26),eo={container:{margin:"25px"},header:{backgroundColor:"#ffffff",padding:"20px",borderRadius:"10px",fontSize:"30px",textAlign:"center"},body:{whiteSpace:"pre-wrap",backgroundColor:"white",padding:"20px",borderRadius:"10px",color:"red"}},to=function(e){Object($r.a)(n,e);var t=Object(Qr.a)(n);function n(e){var a;return Object(S.a)(this,n),(a=t.call(this,e)).state={error:null,errorInfo:null},a}return Object(T.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?h.a.createElement("div",{style:eo.container},h.a.createElement("p",{style:eo.header},"Something went wrong."),h.a.createElement("details",{style:eo.body},this.state.error&&this.state.error.toString(),h.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}]),n}(h.a.Component),no=!1;var ao=function(e){var t=e.parentRef,n=Mt().keysPreferences,a=Rt(),i=Object(v.d)(),r=Object(g.useCallback)((function(e){"input"!==e.target.localName&&e.keyCode>=49&&e.keyCode<=57&&(no?e.shiftKey?(a({type:"SET_KEY_PREFERENCES",keyCode:e.keyCode}),i.show("Configuration Reset, press '".concat(String.fromCharCode(e.keyCode),"' again to reload it."))):function(e){for(var t=0,n=["Alt","AltGraph","CapsLock","Control","Meta","NumLocK","ScrollLock","Shift","OS"];t<n.length;t++){var a=n[t];if(e.getModifierState(a))return!0}return!1}(e)||(n&&n[e.keyCode]?a({type:"APPLY_KEY_PREFERENCES",keyCode:e.keyCode}):(a({type:"SET_KEY_PREFERENCES",keyCode:e.keyCode}),i.show("Configuration saved, press '".concat(e.key,"' again to reload it.")))):i.show("The mouse cursor must be over the NMR displayer to use save configuration shortcuts  "))}),[a,n,i]),o=Object(g.useCallback)((function(){no=!0}),[]),c=Object(g.useCallback)((function(){no=!1}),[]);return Object(g.useEffect)((function(){var e=t?t.current:null;return e&&(e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",c)),function(){e&&(e.removeEventListener("mouseenter",o),e.removeEventListener("mouseleave",c))}}),[o,c,t]),Object(g.useEffect)((function(){return document.addEventListener("keydown",r,!1),function(){document.removeEventListener("keydown",r,!1)}}),[r]),null},io={position:"fixed",top:0,left:0,pointerEvents:"none",backgroundColor:"gray",padding:"3px",borderRadius:"2px",color:"white",whiteSpace:"nowrap",fontSize:"10px",fontFamily:"tahoma",textShadow:"none"},ro=Object(g.memo)((function(e){var t=e.style,n=e.className,a=e.popupPlacement,i=void 0===a?"right":a,r=e.children,o=e.title,c=e.offset,l=void 0===c?{x:0,y:0}:c,u=Object(g.useRef)(),s=Object(g.useRef)(),d=Object(g.useState)({x:0,y:0}),f=Object(p.a)(d,2),m=f[0],v=f[1],O=Object(g.useState)(!1),j=Object(p.a)(O,2),y=j[0],x=j[1];Object(g.useLayoutEffect)((function(){if(y){var e=function(){var e,t,n=u.current.getBoundingClientRect(),a=s.current.getBoundingClientRect();switch(i){case"left":e=-a.width,t=n.height/2-n.height/2*a.height/n.height;break;case"right":e=n.width,t=n.height/2-n.height/2*a.height/n.height;break;case"top":e=n.width/2-n.width/2*a.width/n.width,t=-n.height;break;case"bottom":e=n.width/2-n.width/2*a.width/n.width,t=n.height;break;default:e=0,t=0}return{x:e+n.x,y:t+n.y}}();v(e)}}),[i,y]);var k=Object(g.useCallback)((function(){x(!0)}),[]),E=Object(g.useCallback)((function(){x(!1)}),[]);return h.a.createElement("div",{style:Object(b.a)({position:"relative",height:"100%"},t.mainContainer)},h.a.createElement("div",{ref:u,onMouseOver:k,onMouseOut:E,style:{width:"inherit",height:"inherit"}},r),h.a.createElement("div",{ref:s,style:Object(b.a)(Object(b.a)({},io),{},{transform:"translate(".concat(m.x,"px,").concat(m.y,"px)"),zIndex:999999999,left:l.x,top:l.y,display:y?"block":"none"},t.popup),className:n},h.a.createElement("span",{style:{pointerEvents:"none"}},o)))}));ro.defaultProps={style:{popup:{},mainContainer:{}}};var oo=ro;function co(){var e=Object(f.a)(["\n  position: relative;\n\n  .delete {\n    position: absolute;\n    border-radius: 50%;\n    width: 17px;\n    height: 17px;\n    background-color: transparent;\n    border: none;\n    top: 2px;\n    padding: 0;\n    left: 2px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .delete:hover {\n    background-color: red;\n    border-radius: 50%;\n    width: 15px;\n    height: 15px;\n\n    .icon {\n      color: white;\n    }\n  }\n\n  .icon {\n    color: #252525;\n    width: 8px;\n  }\n"]);return co=function(){return e},e}var lo=Object(m.b)(co()),uo=function(e){var t=e.tabid,n=e.tablabel,a=e.activeTab,i=e.onClick,r=e.canDelete,o=e.onDelete,c="tab-list-item";a===t&&(c+=" tab-list-active");var l=Object(g.useCallback)((function(e){i(Object(b.a)(Object(b.a)({},e),{},{tablabel:n,tabid:t}))}),[i,n,t]),u=Object(g.useCallback)((function(e){o(Object(b.a)(Object(b.a)({},e),{},{tablabel:n,tabid:t}))}),[o,n,t]);return Object(m.c)("li",{className:c,onClick:l,css:lo},r&&Object(m.c)("button",{className:"delete",type:"button",onClick:u},Object(m.c)(jn.D,{className:"icon"})),n)},so="TOP",fo="LEFT";function bo(){var e=Object(f.a)(["\n  display: flex;\n  height: 100%;\n  width: 100%;\n  .tab-list {\n    border-right: 1px solid #ccc;\n    padding-left: 0;\n    margin: 0;\n  }\n\n  .tab-list li:hover {\n    background-color: #f7f7f7;\n  }\n\n  .tab-list li:first-of-type {\n    margin-top: 10px;\n  }\n\n  .tab-list-item {\n    display: block;\n    list-style: none;\n    margin-right: -1px;\n    padding: 0.5rem 0.75rem;\n  }\n\n  .tab-list-active {\n    background-color: white;\n    border: solid #ccc;\n    border-width: 1px 0px 1px 1px;\n  }\n"]);return bo=function(){return e},e}function po(){var e=Object(f.a)(["\n  height: 100%;\n  width: 100%;\n  .tab-list {\n    border-bottom: 1px solid #ccc;\n    padding-left: 0;\n    margin: 0;\n  }\n\n  .tab-list li:first-of-type {\n    margin-left: 5px;\n  }\n\n  .tab-list li:hover {\n    background-color: #f7f7f7;\n  }\n\n  .tab-list-item {\n    display: inline-block;\n    list-style: none;\n    margin-bottom: -1px;\n    padding: 0.5rem 2rem;\n  }\n\n  .tab-list-active {\n    background-color: white;\n    border: solid #ccc;\n    border-width: 1px 1px 0 1px;\n  }\n"]);return po=function(){return e},e}var mo=Object(m.b)(po()),go=Object(m.b)(bo()),ho=function(e){var t=e.children,n=e.onClick,a=e.defaultTabID,i=e.position,r=e.canDelete,o=e.onDelete,c=Object(g.useState)(),l=Object(p.a)(c,2),u=l[0],s=l[1];Object(g.useEffect)((function(){s(a)}),[a]);var d=Object(g.useCallback)((function(e){var t=e.tablabel,a=e.tabid;n({tablabel:t,tabid:a}),s(a)}),[n]),f=Object(g.useMemo)((function(){return g.Children.map(t,(function(e){var t=e.props,n=t.tablabel,a=t.tabid,i=t.candelete,c=i?"true"===i.toLowerCase():r;return Object(m.c)(uo,{activeTab:u,key:a,tablabel:n,onClick:d,tabid:a,canDelete:c,onDelete:o})}))}),[u,r,t,d,o]),h=Object(g.useMemo)((function(){return g.Children.map(t,(function(e){var t=e.props,n=t.tabid,a=t.style;return n!==u?Object(g.cloneElement)(e,{style:{display:"none"}}):Object(g.cloneElement)(e,{style:Object(b.a)({display:"block"},a)})}))}),[u,t]),v=Object(g.useMemo)((function(){switch(i){case so:return mo;case fo:return go;default:return mo}}),[i]);return Object(m.c)("div",{className:"tabs",css:v},Object(m.c)("ol",{className:"tab-list"},f),Object(m.c)("div",{className:"tab-content"},h))};ho.defaultProps={onClick:function(){return null},onDelete:function(){return null},position:"TOP",canDelete:!1};var vo=ho;function Oo(){var e=Object(f.a)(["\n  overflow: auto;\n  width: 600px;\n\n  .header {\n    text-align: center;\n    padding: 10px 0 0 0px;\n    margin: 0px;\n    color: #000000;\n    place-items: normal;\n    text-transform: none;\n  }\n  .main-content {\n    width: 100%;\n    height: 250px;\n    border: none;\n    padding-top: 10px;\n  }\n\n  .inner-content {\n    padding: 15px;\n  }\n\n  button:focus {\n    outline: none;\n  }\n  button:hover {\n    color: #007bff;\n  }\n  button {\n    border: none;\n    height: 100%;\n    padding: 0 20px;\n    background-color: #ffffff;\n    border-radius: 10px;\n    margin: 0px 5px;\n  }\n\n  .footer-container {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-end;\n    background-color: #2ca8ff;\n    padding: 8px 15px;\n    height: 50px;\n  }\n\n  .section-header {\n    font-size: 13px;\n    color: #2ca8ff;\n    margin-bottom: 10px;\n    border-bottom: 0.55px solid #f9f9f9;\n    padding: 6px 2px;\n  }\n\n  .input-label {\n    font-size: 12px;\n    font-weight: bold;\n    margin-right: 10px;\n  }\n\n  .number-input {\n    font-size: 14px;\n    border-radius: 5px;\n    border: 1px solid #cccccc;\n    padding: 5px;\n    width: 100px;\n    margin-right: 10px;\n  }\n"]);return Oo=function(){return e},e}var jo=Object(m.b)(Oo()),yo={},xo=function(e){var t=e.onClose,n=e.onSave,a=Object(g.useState)("controllers"),i=Object(p.a)(a,2),r=i[0],o=i[1],c=Tn("settings"),l=Object(p.a)(c,2),u=l[0],s=l[1],d=Object(g.useCallback)((function(){s(JSON.stringify(Object(b.a)(Object(b.a)({},u),yo))),n(),yo={}}),[n,s,u]),f=Object(g.useCallback)((function(e){o(e.tabid)}),[]),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return An(u,e,t)},v=Object(g.useCallback)((function(e){var t=e.target.name.split("-"),n=Object(b.a)(Object(b.a)({},u),yo);n=2===t.length?A.a.set(n,"".concat(r.toLowerCase(),".").concat(t[0],".").concat(t[1]),e.target.value):A.a.set(n,"".concat(r.toLowerCase(),".").concat(t[0]),e.target.value),yo=n}),[r,u]);return Object(m.c)("div",{css:jo},Object(m.c)("h6",{className:"header"},"General Settings"),Object(m.c)("div",{className:"main-content"},Object(m.c)(vo,{defaultTabID:r,onClick:f},Object(m.c)("div",{className:"inner-content",tablabel:"controllers",tabid:"controllers"},Object(m.c)("p",{className:"section-header"},"Mouse Scroll Wheel Sensitivity"),Object(m.c)("span",{className:"input-label"},"Low"),Object(m.c)("input",{name:"mws-low",className:"number-input",type:"number",onChange:v,defaultValue:h("controllers.mws.low",Mn)}),Object(m.c)("span",{className:"input-label"},"High"),Object(m.c)("input",{name:"mws-high",className:"number-input",type:"number",onChange:v,defaultValue:h("controllers.mws.high",_n)})))),Object(m.c)("div",{className:"footer-container"},Object(m.c)("button",{type:"button",onClick:t},"Close"),Object(m.c)("button",{type:"button",onClick:d},"Save")))},ko={zoomIn:{tabTitle:"",ShowInGneralUserManual:!1,text:"Zoom Tool",filePath:"./help/1d/zoom/zoomIn.md",index:3},peakPicking:{tabTitle:"",ShowInGneralUserManual:!1,text:"peak picking tool",filePath:"./help/1d/peak/peakPicking.md",index:2},integralPicking:{tabTitle:"",ShowInGneralUserManual:!1,text:"integral tool",filePath:"./help/1d/integral/integration.md",index:3},fullScreen:{tabTitle:"",ShowInGneralUserManual:!1,text:"Full Screen mode",filePath:"./help/1d/general/fullScreen.md",index:1},loadSpectrum:{tabTitle:"How To Import Spectrums",ShowInGneralUserManual:!0,text:"load spectrums",filePath:"./help/1d/load/loadSpectrum.md",index:0}};function Eo(e){return Co.apply(this,arguments)}function Co(){return(Co=Object(D.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return wo(n=e.sent),e.next=6,n.text();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(e){if(!e.ok)throw new Error("HTTP ".concat(e.status," - ").concat(e.statusText));return e}function Do(e){return e.replace(/^.*\./,"").toLowerCase()}function So(e){return e.substr(0,e.lastIndexOf("."))}function To(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.all([].map.call(e,(function(e){return new Promise((function(n,a){var i=new FileReader;i.onabort=function(e){return a(e)},i.onerror=function(e){return a(e)},i.onload=function(){if(i.result){var t=i.result,a=So(e.name),r=Do(e.name);n({binary:t,name:a,extension:r})}},t.asBuffer?i.readAsArrayBuffer(e):i.readAsBinaryString(e)}))})))}function Io(){var e=Object(f.a)(["\n  width: 600px;\n  height: 400px;\n  display: flex;\n  flex-direction: column;\n\n  .header {\n    text-align: center;\n    padding: 10px 0 10px 0px;\n    margin: 0px;\n    color: #000000;\n    place-items: normal;\n    text-transform: none;\n    // border-bottom: 4px solid #2ca8ff;\n    background-color: #fafafa;\n  }\n  .main-content {\n    width: 100%;\n    height: 100%;\n    border: none;\n    overflow: auto;\n    padding-left: 5px;\n  }\n\n  .close-bt {\n    border: none;\n    color: red;\n    background-color: transparent;\n    outline: none;\n    position: absolute;\n    left: 15px;\n    top: 15px;\n  }\n\n  .inner-container {\n    padding: 5px;\n  }\n"]);return Io=function(){return e},e}var Ao=Object(m.b)(Io()),Mo=function(e){var t=e.filePath,n=Object(g.useState)(""),a=Object(p.a)(n,2),i=a[0],r=a[1];return Object(g.useEffect)((function(){Eo(t).then((function(e){r(e)}))})),Object(m.c)("div",{style:{overflow:"auto"}},Object(m.c)(ji.a,{source:i,transformImageUri:function(e){return function(e,t){return"".concat(t.substr(0,t.lastIndexOf("/")+1)).concat(e)}(e,t)}}))},_o=function(e){var t=e.onClose,n=Object(g.useState)([]),a=Object(p.a)(n,2),i=a[0],r=a[1];return Object(g.useEffect)((function(){var e=Object.keys(ko).reduce((function(e,t){if(ko[t].ShowInGneralUserManual){var n=Object(b.a)({key:t},ko[t]);e.push(n)}return e}),[]).sort((function(e,t){return e.index-t.index}));r(e)}),[]),Object(m.c)("div",{css:Ao},Object(m.c)("h6",{className:"header"},"User Manual"),Object(m.c)("button",{onClick:t,type:"button",className:"close-bt"},Object(m.c)(jn.D,null)),Object(m.c)("div",{className:"main-content"},Object(m.c)(vo,{position:fo,defaultTabID:"loadSpectrum"},i.map((function(e){return Object(m.c)("div",{tablabel:e.tabTitle,key:e.key,tabid:e.key,className:"inner-container",style:{overflow:"auto",height:"100%"}},Object(m.c)(Mo,{filePath:e.filePath}))})))))},Po={display:"flex"},Ro={lineHeight:2,userSelect:"none",flex:"2"},Lo={flex:"4",display:"flex",justifyContent:"flex-start"},Fo={height:"100%",width:"100px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},No=Object(g.forwardRef)((function(e,t){var n=e.label,a=e.name,i=e.defaultValue,r=e.style,o=e.onChange,c=e.onInput,l=e.pattern,u=e.step,s=e.min,d=Object(g.useRef)(),f=Object(g.useCallback)((function(e){e.target.checkValidity()?""===e.target.value?o(Object(b.a)(Object(b.a)({},e),{},{target:Object(b.a)(Object(b.a)({},e.target),{},{value:i})})):o(e):(t||d).current.value=i}),[i,o,t]);return h.a.createElement("div",{style:Object(b.a)(Object(b.a)({},Po),r.container)},h.a.createElement("span",{style:Object(b.a)(Object(b.a)({},Ro),r.label)},n),h.a.createElement("div",{style:Object(b.a)(Object(b.a)({},Lo),r.inputContainer)},h.a.createElement("input",{ref:t||d,name:a,style:Object(b.a)(Object(b.a)({},Fo),r.input),type:"number",pattern:l,defaultValue:i,step:u,onChange:f,onInput:c,min:s})))}));No.defaultProps={pattern:"^d*(.d{0,2})?$",step:"any",min:"any",style:{label:{},input:{},container:{},inputContainer:{}},defaultValue:0,onChange:function(){return null},onInput:function(){return null}};var zo=No,Ho={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px"},input:{width:"50px"},inputContainer:{flex:"2"},label:{flex:"5"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}},Bo=function(){var e=Rt(),t=Object(g.useRef)(),n=Object(g.useRef)(),a=Object(g.useRef)(),i=Object(g.useCallback)((function(){e({type:"AUTO_PEAK_PICKING",options:{maxNumberOfPeaks:n.current.value,minMaxRatio:t.current.value,noiseFactor:a.current.value}})}),[e]),r=Object(g.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return h.a.createElement("div",{style:Ho.container},h.a.createElement(zo,{ref:n,label:"Max Number Of Peaks:",name:"maxNumberOfPeaks",style:{input:Ho.input,inputContainer:Ho.inputContainer,label:Ho.label},defaultValue:50}),h.a.createElement(zo,{ref:a,label:"Noise factor",name:"noiseFactor",style:{input:Ho.input,inputContainer:Ho.inputContainer,label:Ho.label},defaultValue:3}),h.a.createElement(zo,{ref:t,label:"Min Max Ratio:",name:"minMaxRatio",style:{input:Ho.input,inputContainer:Ho.inputContainer,label:Ho.label},defaultValue:.1,step:"0.01"}),h.a.createElement("button",{type:"button",style:Ho.actionButton,onClick:i},"Apply"),h.a.createElement("button",{type:"button",style:Ho.actionButton,onClick:r},"Cancel"))};function Vo(){var e=Object(f.a)(["\n      position: relative;\n      padding: 0px 5px;\n      border: 0.55px solid #cacaca;\n      font-size: 14px;\n      width: ","px;\n      margin: 0;\n      height: 100%;\n      background: url(../img/br_down.png) no-repeat right white;\n      -webkit-appearance: none;\n      background-position-x: ","px;\n      background-size: 10px 10px;\n      border-radius: 5px;\n      margin: 0px 5px;\n      :focus,\n      input:focus {\n        outline: none;\n      }\n    "]);return Vo=function(){return e},e}var Yo=h.a.forwardRef((function(e,t){var n=e.data,a=e.style,i=e.onChange,r=e.defaultValue,o=Object(g.useCallback)((function(e){i(e.target.value)}),[i]),c=Object(m.b)(Vo(),a.width?a.width-5:115,a.width?a.width-18:97);return Object(m.c)("select",{css:[c,a],ref:t,onChange:o,defaultValue:r},n.map((function(e){return Object(m.c)("option",{key:"".concat(e.key),value:e.value},e.label)})))}));Yo.defaultProps={onChange:function(){return null},ref:null};var Xo=Yo,Go={container:{padding:"5px",height:"100%",display:"flex"},label:{lineHeight:2,userSelect:"none"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}},Uo=function(){var e=Rt(),t=Object(g.useRef)(),n=Object(g.useRef)(),a=Object(g.useRef)(),i=Object(g.useRef)(),r=Object(g.useState)("polynomial"),o=Object(p.a)(r,2),c=o[0],l=o[1],u=Object(g.useCallback)((function(){var r={};switch(c){case"airpls":r={algorithm:t.current.value,maxIterations:n.current.value,tolerance:a.current.value};break;case"polynomial":r={algorithm:t.current.value,degree:i.current.value}}e({type:"APPLY_BASE_LINE_CORRECTION_FILTER",options:r})}),[c,e]),s=Object(g.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]),d=Object(g.useCallback)((function(){return Object.keys(ue).map((function(e){return{key:e,label:ue[e],value:e}}))}),[]),f=Object(g.useCallback)((function(e){l(e)}),[]);return h.a.createElement("div",{style:Go.container},h.a.createElement("span",{style:Go.label},"Algorithm: "),h.a.createElement(Xo,{ref:t,data:d(),style:{marginLeft:10,marginRight:10},onChange:f,defaultValue:"polynomial"}),c&&"airpls"===c&&h.a.createElement(g.Fragment,null,h.a.createElement(zo,{label:"maxIterations:",ref:n,name:"maxIterations",defaultValue:100}),h.a.createElement(zo,{label:"tolerance:",ref:a,name:"tolerance",defaultValue:.001})),c&&"autoPolynomial"===c&&h.a.createElement(zo,{label:"degree:",ref:i,name:"degree",defaultValue:3}),c&&"polynomial"===c&&h.a.createElement(zo,{label:"degree:",ref:i,name:"degree",defaultValue:3}),h.a.createElement("button",{type:"button",style:Go.actionButton,onClick:u},"Apply"),h.a.createElement("button",{type:"button",style:Go.actionButton,onClick:s},"Cancel"))},Wo={container:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",border:"0.55px solid #c7c7c7",borderRadius:"5px",userSelect:"none",backgroundColor:"#18ce0f14",fontSize:"10px",color:"#00801d",margin:"0px 5px",cursor:"ew-resize"},label:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:"100%"}},Zo={step:"initial"},Ko=null,Jo=1,qo=0,$o=!0;function Qo(e){$o?(qo=e.clientX,$o=!1):(Jo=e.clientX-qo,qo=e.clientX,clearTimeout(Ko),Ko=setTimeout((function(){Jo=0}),50))}var ec=function(e){var t=e.name,n=e.minValue,a=e.maxValue,i=e.value,r=e.onChange,o=e.label,c=e.style,l=e.className,u=e.noPropagation,s=Object(g.useCallback)((function(){"moving"!==Zo.step&&"start"!==Zo.step||(Zo=Object(b.a)(Object(b.a)({},Zo),{},{step:"start"===Zo.step?"initial":"end"}))}),[]),d=Object(g.useCallback)((function(e){u&&e.stopPropagation();var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;return"initial"!==Zo.step&&"end"!==Zo.step||(Zo={startX:n,startY:a,startScreenX:e.screenX,startScreenY:e.screenY,boundingRect:e.currentTarget.getBoundingClientRect(),step:"start",clientX:e.clientX,clientY:e.clientY}),!1}),[u]);return h.a.createElement("div",{style:Object(b.a)(Object(b.a)({},Wo.container),c),className:l,onMouseMove:function(e){if("start"===Zo.step||"moving"===Zo.step){var o=e.screenX,c=e.screenY;Zo=Object(b.a)(Object(b.a)({},Zo),{},{step:"moving",endX:Zo.startX+o-Zo.startScreenX,endY:Zo.startY+c-Zo.startScreenY}),Qo(e);var l=a-n,u=Zo.endX-Zo.startX,s=Math.abs(u)*(Math.abs(Jo)>3?l:5)/Zo.boundingRect.width;r({value:Jo>=0?i+Math.abs(s):i-s,name:t})}},onMouseUp:function(){"moving"!==Zo.step&&"start"!==Zo.step||(Zo=Object(b.a)(Object(b.a)({},Zo),{},{step:"start"===Zo.step?"initial":"end"}))},onMouseDown:d,onMouseEnter:s},h.a.createElement("span",{style:Wo.label},o))};ec.defaultProps={name:"",minValue:0,maxValue:50,value:0,onChange:function(){return null},label:"Drag to Change the value",noPropagation:!0};var tc=ec,nc={lineHeight:2,userSelect:"none"},ac={height:"100%",width:"100px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},ic=Object(g.forwardRef)((function(e,t){var n=e.label,a=e.value,i=e.name,r=e.style,o=e.onChange;return h.a.createElement(g.Fragment,null,h.a.createElement("span",{style:Object(b.a)(Object(b.a)({},nc),r.label)},n),h.a.createElement("input",{ref:t,name:i,style:Object(b.a)(Object(b.a)({},ac),r.input),type:"text",value:a,onChange:o}))}));ic.defaultProps={style:{label:{},input:{}},value:"",onChange:function(){return null}};var rc=ic,oc={container:{padding:"5px",height:"100%",display:"flex"},input:{width:"100px"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},select:{marginLeft:"5px",marginRight:"10px",border:"none",height:"20px"}},cc="manual",lc="automatic",uc="absolute",sc=[{key:cc,label:"Manual",value:cc},{key:lc,label:"Automatic",value:lc},{key:uc,label:"Absolute",value:uc}],dc=function(){var e=Rt(),t=Object(g.useState)({ph0:0,ph1:0,pivotIndex:1}),n=Object(p.a)(t,2),a=n[0],i=n[1],r=Object(g.useState)(cc),o=Object(p.a)(r,2),c=o[0],l=o[1],u=Object(g.useCallback)((function(){switch(c){case lc:e({type:"APPLY_AUTO_PHASE_CORRECTION_FILTER"});break;case cc:e({type:"APPLY_MANUAL_PHASE_CORRECTION_FILTER",value:a});break;case uc:e({type:"APPLY_ABSOLUTE_FILTER"})}}),[e,c,a]),s=Object(g.useCallback)((function(t){var n=t.target.name;if(t.target){var r=parseFloat(t.target.value)||"-"===t.target.value.trim()?t.target.value:0;i((function(t){var i=Object(b.a)(Object(b.a)({},t),{},Object(P.a)({},n,r));if("-"!==r){var o=Object(b.a)(Object(b.a)({},a),{},Object(P.a)({},n,r-t[n]));for(var c in t)t[c]===o[c]&&(o[c]-=t[c]);e({type:"CALCULATE_MANUAL_PHASE_CORRECTION_FILTER",value:o})}return i}))}}),[e,a]),d=Object(g.useCallback)((function(t){var n=Object(b.a)(Object(b.a)({},a),{},Object(P.a)({},t.name,t.value)),r={};for(var o in a)r[o]=n[o]-a[o];e({type:"CALCULATE_MANUAL_PHASE_CORRECTION_FILTER",value:r}),i(n)}),[e,a]),f=Object(g.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]),m=Object(g.useCallback)((function(e){l(e)}),[]);return h.a.createElement("div",{style:oc.container},h.a.createElement(Xo,{onChange:m,data:sc,value:cc,style:oc.select}),c===cc&&h.a.createElement(h.a.Fragment,null,h.a.createElement(rc,{label:"PH0:",name:"ph0",style:{input:oc.input},onChange:s,value:a.ph0}),h.a.createElement(rc,{label:"PH1:",name:"ph1",style:{input:oc.input},onChange:s,value:a.ph1}),h.a.createElement(tc,{name:"ph0",value:a.ph0,label:"Change Ph0 By mouse click and drag",style:{width:"20%"},onChange:d}),h.a.createElement(tc,{name:"ph1",value:a.ph1,label:"Change Ph1 By mouse click and drag",style:{width:"20%"},onChange:d})),h.a.createElement("button",{type:"button",style:oc.actionButton,onClick:u},"Apply"),h.a.createElement("button",{type:"button",style:oc.actionButton,onClick:f},"Cancel"))},fc={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px",alignItems:"baseline"},input:{height:"100%",width:"50px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",minWidth:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},label:{lineHeight:2,userSelect:"none"}},bc=function(){var e=Rt(),t=Object(g.useCallback)((function(){e({type:"AUTO_RANGES_DETECTION",options:{peakPicking:{minMaxRatio:.05,nH:100,compile:!0,frequencyCluster:16,clean:!0,keepPeaks:!0}}})}),[e]),n=Object(g.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return h.a.createElement("div",{style:fc.container},h.a.createElement("span",{style:fc.label},"Manual selection using SHIFT + select zone or click on Auto peak picking"),h.a.createElement("button",{type:"button",style:fc.actionButton,onClick:t},"Auto peak picking"),h.a.createElement("button",{type:"button",style:fc.actionButton,onClick:n},"Cancel"))},pc={container:{padding:"5px",height:"100%",display:"flex"},input:{height:"100%",width:"50px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},label:{lineHeight:2,userSelect:"none"}};function mc(e){return e>=1048576?"".concat(e/1048576,"M"):e>=1024?"".concat(e/1024,"K"):e}var gc=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,n=[],a=e;a<=t;a++){var i=Math.pow(2,a);n.push({key:i,label:mc(i),value:i})}return n}(),hc=function(){var e=Rt(),t=Mt(),n=t.data,a=t.activeSpectrum,i=Object(g.useRef)(),r=Object(g.useState)(1),o=Object(p.a)(r,2),c=o[0],l=o[1],u=Object(g.useCallback)((function(){e({type:"APPLY_ZERO_FILLING_FILTER",value:{zeroFillingSize:Number(i.current.value),lineBroadeningValue:c}})}),[e,c]),s=Object(g.useCallback)((function(){if(n&&a){var e=n.find((function(e){return e.id===a.id}));return Math.pow(2,Math.round(Math.log2(e.x.length)))}return""}),[a,n]),d=Object(g.useCallback)((function(e){if(e.target){var t=e.target.validity.valid?Number(e.target.value):c;l(t)}}),[c]),f=Object(g.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]);return h.a.createElement("div",{style:pc.container},h.a.createElement("span",{style:pc.label},"Size: "),h.a.createElement(Xo,{ref:i,data:gc,style:{marginLeft:10,marginRight:10},defaultValue:s()}),h.a.createElement("span",{style:pc.label},"Line Broadening: "),h.a.createElement("input",{name:"line-broadening",style:pc.input,type:"number",value:c,onInput:d,pattern:"^\\d*(\\.\\d{0,2})?$",step:"any"}),h.a.createElement("button",{type:"button",style:pc.actionButton,onClick:u},"Apply"),h.a.createElement("button",{type:"button",style:pc.actionButton,onClick:f},"Cancel"))},vc={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px"},input:{width:"50px"},inputContainer:{flex:"2"},label:{flex:"5"},actionButton:{height:"100%",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}},Oc=function(){var e=Rt(),t=Object(g.useRef)(),n=Object(g.useCallback)((function(){e({type:"AUTO_ZONES_DETECTION",options:{thresholdFactor:t.current.value}})}),[e]),a=Object(g.useCallback)((function(){e({type:"RESET_SELECTED_TOOL"})}),[e]),i=Object(g.useCallback)((function(e){if(e.target){var t=e.target.value;la.publish("noiseFactorChanged",t)}}),[]);return h.a.createElement("div",{style:vc.container},h.a.createElement(zo,{ref:t,label:"NoiseFactor",name:"noiseFactor",style:{input:vc.input,inputContainer:vc.inputContainer,label:vc.label},defaultValue:1,onChange:i}),h.a.createElement("button",{type:"button",style:vc.actionButton,onClick:n},"Auto Zones Picking"),h.a.createElement("button",{type:"button",style:vc.actionButton,onClick:a},"Cancel"))};function jc(){var e=Object(f.a)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  height: 36px;\n  min-height: 36px;\n  border-width: 1px 1px 0px 1px;\n  border-style: solid;\n  border-color: rgb(213, 213, 213);\n  outline: none;\n  transition: background-color 0.2s ease-in 0s;\n  box-shadow: rgb(255, 255, 255) 0px 1px 0px 0px inset;\n  background: linear-gradient(rgb(255, 255, 255) 5%, rgb(246, 246, 246) 100%)\n    rgb(255, 255, 255);\n  color: rgb(102, 102, 102);\n  font-family: Arial;\n  font-weight: bold;\n  text-decoration: none;\n  text-shadow: rgb(255, 255, 255) 0px 1px 0px;\n\n  .toolOptionsPanel {\n    flex: 10;\n    padding: 0px;\n    margin: 0px;\n    height: 100%;\n  }\n\n  .windowButtonsContainer {\n    flex: 0.5;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    height: 100%;\n  }\n\n  .windowButton {\n    width: 40px !important;\n    min-width: 40px !important;\n    background-color: transparent;\n    border: none;\n  }\n  button:focus {\n    outline: 0;\n  }\n"]);return jc=function(){return e},e}var yc=Object(m.b)(jc()),xc=function(e){var t=e.title,n=e.popupPlacement,a=e.style,i=e.className,r=e.onClick,o=e.children,c=e.helpID,l=void 0===c?"":c,u=vi();return Object(m.c)(oo,{title:t,popupPlacement:n,style:a},Object(m.c)("button",Object.assign({type:"button",onClick:r,className:i},u.onHover,{"data-helpid":l}),o))},kc=function(e){var t=e.isFullscreen,n=e.onMaximize,a=Mt().selectedOptionPanel,i=bn(),r=Object(v.d)(),o=Object(g.useMemo)((function(){switch(a){case Kn.zeroFilling.id:return Object(m.c)(hc,null);case Kn.phaseCorrection.id:return Object(m.c)(dc,null);case Kn.peakPicking.id:return Object(m.c)(Bo,null);case Kn.rangesPicking.id:return Object(m.c)(bc,null);case Kn.baseLineCorrection.id:return Object(m.c)(Uo,null);case Kn.zone2D.id:return Object(m.c)(Oc,null)}}),[a]),c=Object(g.useCallback)((function(){i.show(Object(m.c)(xo,{onSave:function(){r.success("Settings saved successfully")}}),{})}),[r,i]),l=Object(g.useCallback)((function(){i.show(Object(m.c)(_o,null),{isBackgroundBlur:!1,position:an.TOP_CENTER})}),[i]);return Object(m.c)("div",{css:yc},Object(m.c)("div",{className:"toolOptionsPanel"},o),Object(m.c)("div",{className:"windowButtonsContainer"},Object(m.c)(xc,{title:"User Manual",popupPlacement:"left",style:{mainContainer:{height:"auto"}},onClick:l,className:"windowButton"},Object(m.c)(jn.y,null)),Object(m.c)(xc,{title:"General Settings",popupPlacement:"left",style:{mainContainer:{height:"auto"}},onClick:c,className:"windowButton"},Object(m.c)(jn.G,null)),t?"":Object(m.c)(xc,{title:"Full Screen",popupPlacement:"left",style:{mainContainer:{height:"auto"}},onClick:n,className:"windowButton",helpID:"fullScreen"},Object(m.c)(jn.A,null))))};kc.defaultProps={onMaximize:function(){return null}};var Ec=kc,Cc=n(773);function wc(){var e=Object(f.a)(["\n  border: 0.55px #e6e6e6 solid;\n  display: flex;\n  flex: 1;\n  flex-direction: 'column';\n  height: 100%;\n"]);return wc=function(){return e},e}function Dc(){var e=Object(f.a)(["\n  height: 100%;\n  background-color: #b5b5b599;\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-flow: column;\n  z-index: 99999;\n\n  p {\n    color: white;\n    background-color: rgb(104, 104, 104);\n    padding: 1.5%;\n    border-radius: 30px;\n    margin: 0px;\n  }\n\n  svg {\n    stroke-width: 0;\n    font-size: 3rem !important;\n    fill: white;\n  }\n"]);return Dc=function(){return e},e}var Sc=Object(m.b)(Dc()),Tc=Object(m.b)(wc()),Ic=function(e){var t=Mt(),n=t.width,a=t.height,i=Rt(),r=Object(g.useCallback)((function(e){i({type:"SET_LOADING_FLAG",isLoading:!0});var t,n=Object(La.a)(new Set(e.map((function(e){return Do(e.name)})))),a=Object(w.a)(n);try{var r=function(){var n=t.value,a=e.filter((function(e){return Do(e.name)===n}));switch(n){case"mol":To(a).then((function(e){i({type:"LOAD_MOL_FILE",files:e})}),(function(e){alert(e)}));break;case"nmrium":case"json":1===a.length?To(a).then((function(e){Ot.build(JSON.parse(e[0].binary.toString())).then((function(e){i({type:"LOAD_JSON_FILE",data:{AnalysisObj:e}})}))}),(function(e){alert(e)})):alert("You can add only one json file");break;case"dx":case"jdx":To(a).then((function(e){i({type:"LOAD_JCAMP_FILE",files:e})}),(function(e){alert(e)}));break;case"jdf":To(a,{asBuffer:!0}).then((function(e){i({type:"LOAD_JDF_FILE",files:e})}),(function(e){alert(e)}));break;case"zip":To(a).then((function(e){i({type:"LOAD_ZIP_FILE",files:e})}),(function(e){alert(e)}));break;default:alert("The file extension must be zip, dx, jdx, json, mol or nmrium.")}};for(a.s();!(t=a.n()).done;)r()}catch(o){a.e(o)}finally{a.f()}}),[i]),o=Object(Cc.a)({onDrop:r,noClick:!0}),c=o.getRootProps,l=o.getInputProps,u=o.isDragActive;return Object(m.c)("div",Object.assign({},c(),{css:Tc}),Object(m.c)("input",l()),u&&Object(m.c)("div",{css:Sc,style:{width:"".concat(n+41,"px"),height:"".concat(a,"px")}},Object(m.c)(jn.F,null),Object(m.c)("p",null,"Drop your files here")),e.children)},Ac=0,Mc=!1,_c={container:{display:"flex",flexDirection:"column",margin:"0px",userSelect:"none"},button:{cursor:"pointer",padding:"6px 12px",display:"flex",alignItems:"center",border:"none",outline:"none",transition:"background-color 0.2s ease-in",boxShadow:"inset 0px 1px 0px 0px #ffffff",background:"linear-gradient(to bottom, #ffffff 5%, #f6f6f6 100%)",filter:'progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff", endColorstr="#f6f6f6",GradientType=0)',backgroundColor:"#ffffff",color:"#666666",fontFamily:"Arial",fontWeight:"bold",textDecoration:"none",textShadow:"0px 1px 0px #ffffff",borderTop:"0.55px  solid #d5d5d5"},buttonTitle:{padding:0,margin:0},content:{backgroundColor:"white",maxHeight:"0",overflow:"auto",flex:"1 1 1px"}},Pc=1,Rc=2,Lc=function(e){var t=e.title,n=e.children,a=e.index,i=e.isOpen,r=e.onOpen,o=e.style,c=Object(g.useState)(null),l=Object(p.a)(c,2),u=l[0],s=l[1],d=Object(g.useRef)(),f=Object(g.useRef)();var m=Object(g.useCallback)((function(){clearTimeout(Ac),Mc=!0,s(null==u?{backgroundColor:"#ccc"}:null),null==u&&r(a,Rc)}),[u,a,r]);return Object(g.useEffect)((function(){s(i?{backgroundColor:"#ccc"}:null)}),[i]),Object(g.useEffect)((function(){!1===i&&s(null)}),[i]),h.a.createElement("div",{ref:f,style:Object(b.a)(Object(b.a)({},_c.container),{},{flex:null==u?0:"1 1 1px",transition:i?"flex 0.2s ease":""}),className:"custom-accordion"},h.a.createElement("button",{type:"button",style:_c.button,onClick:function(){Ac=setTimeout((function(){Mc||r(a,Pc),Mc=!1}),200)},onDoubleClick:m},h.a.createElement("p",{style:_c.buttonTitle},t)),h.a.createElement("div",{ref:d,style:Object(b.a)(Object(b.a)({},_c.content),{},{maxHeight:null==u?0:"100%"},o)},n))};Lc.defaultProps={onOpen:function(){return null}};var Fc=Lc,Nc={container:{height:"100%",width:"100%",display:"flex",flexDirection:"column"}},zc=[],Hc=function(e){var t=e.children,n=e.defaultOpenIndex,a=void 0===n?0:n,i=Object(g.useState)([]),r=Object(p.a)(i,2),o=r[0],c=r[1],l=Object(g.useRef)(),u=Object(g.useCallback)((function(e,t){var n=o.slice();n=t===Pc?n.map((function(t,n){return n===e?!t:t})):n.map((function(t,n){return n===e})),zc=n,c(n)}),[o]),s=Object(g.useMemo)((function(){return h.a.Children.map(t,(function(e,t){return h.a.cloneElement(e,{onOpen:u,index:t,isOpen:o&&o[t]})}))}),[t,o,u]);return Object(g.useEffect)((function(){c((function(e){return e.length>0?e.map((function(e,t){return zc[t]?e:t===a})):(zc=Array(t.length).fill(!1).map((function(e){return e})),Array(t.length).fill(!1).map((function(e,t){return t===a||e})))}))}),[t.length,a]),h.a.createElement("div",{ref:l,style:Nc.container},s)},Bc=n(342);function Vc(){var e=Object(f.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  height: 100%;\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n  th,\n  td {\n    margin: 0;\n    padding: 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n    }\n  }\n"]);return Vc=function(){return e},e}function Yc(){var e=Object(f.a)(["\n  background-color: #f5f5dc;\n"]);return Yc=function(){return e},e}function Xc(){var e=Object(f.a)(["\n  background-color: #ff6f0057;\n"]);return Xc=function(){return e},e}var Gc=Object(m.b)(Xc()),Uc=Object(m.b)(Yc()),Wc=Object(m.b)(Vc()),Zc=Object(g.memo)((function(e){var t=e.data,n=e.columns,a=e.onMouseDown,i=Object(Bc.c)({columns:n,data:t},Bc.b,Bc.a),r=i.getTableProps,o=i.getTableBodyProps,c=i.headerGroups,l=i.rows,u=i.prepareRow;return Object(m.c)("table",Object.assign({},r(),{css:Wc}),Object(m.c)("thead",null,c.map((function(e){return Object(m.c)("tr",Object.assign({key:e.getHeaderGroupProps().key},e.getHeaderGroupProps()),e.headers.map((function(e){return Object(m.c)("th",Object.assign({key:e.getHeaderProps().key},e.getHeaderProps(e.getSortByToggleProps())),e.render("Header"),Object(m.c)("span",null,e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""))})))}))),Object(m.c)("tbody",Object.assign({},o(),{style:{display:"block",height:"100%",overflowY:"auto"}}),l.map((function(e){return u(e),Object(m.c)("tr",Object.assign({key:e.getRowProps().key},e.getRowProps(),{onMouseDown:a}),e.cells.map((function(e){return Object(m.c)("td",Object.assign({key:e.getCellProps().key},e.getCellProps(),{style:Object(b.a)(Object(b.a)({},e.getCellProps().style),{},{padding:"0px"})}),e.render("Cell"))})))}))))}));Zc.defaultProps={onMouseDown:function(){return null}};var Kc=Zc;var Jc={searchInput:{width:"100%",borderRadius:"5px",border:"0.55px solid gray",padding:"5px",marginBottom:"2px"}},qc=function(e){var t=function(t){var n=Mt(),a=n.data,i=n.activeSpectrum,r=Object(g.useMemo)((function(){if(a&&i&&i.id){var e=a.find((function(e){return e.id===i.id}));return{info:e.info,meta:e.meta}}return{}}),[i,a]),o=r.info,c=void 0===o?{}:o,l=r.meta,u=void 0===l?{}:l,s=t.forwardedRef,d=Object(k.a)(t,["forwardedRef"]);return h.a.createElement(e,Object.assign({},d,{info:c,meta:u,ref:s}))};return h.a.forwardRef((function(e,n){return h.a.createElement(t,Object.assign({},e,{forwardedRef:n}))}))}(Object(g.memo)((function(e){var t=e.info,n=e.meta,a=Object(g.useState)([]),i=Object(p.a)(a,2),r=i[0],o=i[1],c=Object(g.useState)([]),l=Object(p.a)(c,2),u=l[0],s=l[1],d=Object(g.useCallback)((function(e){var t=Object.keys(r).filter((function(t){return t.toLowerCase().includes(e.target.value.toLowerCase())}));s(t)}),[r]);Object(g.useEffect)((function(){if(t&&n){var e=Object.keys(t).concat(Object.keys(n));s(e),o(Object(b.a)(Object(b.a)({},t),n))}}),[t,n]);var f=Object(g.useMemo)((function(){return[{Header:"Parameter",sortType:"basic",minWidth:100,width:20,maxWidth:20,Cell:function(e){var t=e.row;return h.a.createElement("p",{style:{padding:"5px",backgroundColor:"white"}},t.original)}},{Header:"Value",sortType:"basic",resizable:!0,Cell:function(e){var t=e.row;return h.a.createElement("p",{style:{backgroundColor:"#efefef",width:"100%",height:"100%",padding:"5px",fontFamily:"monospace",whiteSpace:"pre"}},r[t.original].toString())}}]}),[r]);return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",null,h.a.createElement("input",{type:"text",style:Jc.searchInput,placeholder:"Search for parameter...",onChange:d})),h.a.createElement(Kc,{data:u,columns:f}))}))),$c=n(245),Qc=n.n($c);var el=function(e){var t=function(t){var n=Mt(),a=n.data,i=n.activeSpectrum,r=n.xDomain,o=n.preferences,c=n.activeTab,l=n.tabActiveSpectrum,u=Object(g.useMemo)((function(){if(a&&i&&i.id){var e=a.find((function(e){return e.id===i.id}));return{integrals:e.integrals,info:e.info}}return{}}),[i,a]),s=u.integrals,d=void 0===s?{}:s,f=u.info,b=void 0===f?{}:f,p=Object(g.useMemo)((function(){return l&&Object.keys(l).length>0?Object.keys(l):null}),[l]),m=t.forwardedRef,v=Object(k.a)(t,["forwardedRef"]);return h.a.createElement(e,Object.assign({},v,{integrals:d,info:b,xDomain:r,preferences:o,activeTab:c,nucleus:p,ref:m}))};return h.a.forwardRef((function(e,n){return h.a.createElement(t,Object.assign({},e,{forwardedRef:n}))}))},tl=n(343),nl=n.n(tl),al=n(587),il=n.n(al),rl=n(387);function ol(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 450px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"]);return ol=function(){return e},e}var cl=Object(m.b)(ol()),ll=function(e){var t=e.onSave,n=e.onClose,a=e.header,i=Object(g.useRef)(),r=Object(g.useCallback)((function(){t(i.current.value)}),[t]);return Object(m.c)("div",{css:cl},Object(m.c)("div",{className:"header"},Object(m.c)("span",null,a),Object(m.c)("button",{onClick:n,type:"button"},Object(m.c)(jn.D,null))),Object(m.c)("div",{className:"container"},Object(m.c)("input",{ref:i,type:"number",placeholder:"Enter the new value"}),Object(m.c)("button",{type:"button",onClick:r},"Set")))};ll.defaultProps={onSave:function(){return null},onClose:function(){return null}};var ul=ll;function sl(){var e=Object(f.a)(["\n  .slider {\n    height: 180px;\n    padding: 0px;\n  }\n  .slider p {\n    width: 100%;\n    margin: 0 auto;\n    display: block;\n    position: relative;\n  }\n  .slider svg polygon {\n    fill: gray !important;\n  }\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 36px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n\n  .newSumText {\n    margin-top: 15px;\n    // margin-bottom: 25px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n"]);return sl=function(){return e},e}function dl(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  border-top: 0.55px solid rgb(240, 240, 240);\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n\n  p {\n    margin: 0;\n    text-align: right;\n    width: 100%;\n    line-height: 22px;\n    padding: 0px 10px;\n  }\n"]);return dl=function(){return e},e}function fl(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 5px;\n\n  .optional {\n    margin-top: 5px;\n    margin-bottom: 5px;\n    padding: 0px 10px;\n\n    text-align: center;\n    font-size: 18px;\n    font-weight: bold;\n  }\n  .optional2 {\n    margin-top: 5px;\n    margin-bottom: 25px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n"]);return fl=function(){return e},e}function bl(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n"]);return bl=function(){return e},e}function pl(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 5px;\n"]);return pl=function(){return e},e}var ml=Object(m.b)(pl()),gl=Object(m.b)(bl()),hl=Object(m.b)(fl()),vl=Object(m.b)(dl()),Ol=Object(m.b)(sl()),jl=function(e){var t=e.onSave,n=e.onClose,a=e.header,i=e.molecules,r=e.element,o=Object(g.useState)(),c=Object(p.a)(o,2),l=c[0],u=c[1],s=Nt(),d=s.general,f=s.panels,b=Object(g.useCallback)((function(e){t(e)}),[t]),h=Object(g.useMemo)((function(){return r&&i&&i.length>0&&void 0!==l&&i[l].atoms[r]?i[l].atoms[r]:0}),[l,r,i]);Object(g.useEffect)((function(){i&&i.length>0&&u(0)}),[i]);var v=Object(g.useCallback)((function(e){e.preventDefault(),t(h)}),[h,t]);return Object(m.c)("div",{css:ml},Object(m.c)(ul,{onSave:b,onClose:n,header:a}),!d.hideSetSumFromMolecule&&!f.hideStructuresPanel&&r&&i&&i.length>0?Object(m.c)("div",{css:gl},Object(m.c)("div",{css:hl},Object(m.c)("p",{className:"optional"},"OR"),Object(m.c)("p",{className:"optional2"},"Select a molecule as reference!")),Object(m.c)("div",{css:vl},Object(m.c)("p",null,i&&i.length>0&&"".concat(+(l+1)," / ").concat(i.length)," ")),Object(m.c)("div",{css:Ol},Object(m.c)(nl.a,{onSlideChange:function(e){return u(e.slideIndex)}},i&&i.map((function(e,t){return Object(m.c)("div",{key:e.key},Object(m.c)("div",null,Object(m.c)(rl.a,{id:"molSVG".concat(t),width:120,molfile:e.molfile})),Object(m.c)("p",null,Object(m.c)(il.a,{mf:e.mf})," - ",e.mw.toFixed(2)))}))),Object(m.c)("button",{type:"button",onClick:v},"Set"),Object(m.c)("p",{className:"newSumText"},"New sum for ",r," will be ",h,"!"))):null)};jl.defaultProps={onSave:function(){return null},onClose:function(){return null}};var yl=jl,xl={button:{backgroundColor:"transparent",border:"none"},container:{display:"flex",flexDirection:"column",flexGrow:"1",height:"100%"},toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)",padding:"0px 5px"},counterLabel:{margin:0,textAlign:"right",width:"100%",lineHeight:"22px",padding:"0px 10px"},filterButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"5px",color:"black",backgroundColor:"transparent",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0}},kl=Object(g.memo)((function(e){var t=e.counter,n=e.onDelete,a=e.deleteToolTip,i=e.onFilter,r=e.filterToolTip,o=e.filterIsActive,c=e.counterFiltered,l=e.children,u=e.showSettingButton,s=void 0!==u&&u,d=e.onSettingClick;return h.a.createElement("div",{style:xl.toolbar},h.a.createElement(oo,{title:a,popupPlacement:"right"},h.a.createElement("button",{style:xl.button,type:"button",onClick:n,disabled:0===t},h.a.createElement(jn.z,null))),l,i&&r?h.a.createElement(oo,{title:r,popupPlacement:"right"},h.a.createElement("button",{style:o&&!0===o?Object(b.a)(Object(b.a)({},xl.filterButton),{},{backgroundColor:"#6d6d6d",color:"white",fontSize:"10px"}):xl.filterButton,type:"button",onClick:i,disabled:0===t},h.a.createElement(jn.r,null))):null,h.a.createElement("p",{style:xl.counterLabel},"["," ",o&&!0===o&&void 0!==c?"".concat(c,"/").concat(t):t," ","]"),s&&h.a.createElement(oo,{title:"preferences",popupPlacement:"left"},h.a.createElement("button",{style:xl.button,type:"button",onClick:d},h.a.createElement(jn.d,null))))}));function El(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n  button {\n    background-color: transparent;\n    border: none;\n    height: 100%;\n    margin: 0px 5px;\n  }\n  .save svg {\n    fill: green;\n    font-size: 16px;\n  }\n  .close svg {\n    fill: #ca0000;\n    font-size: 20px;\n  }\n"]);return El=function(){return e},e}var Cl=Object(m.b)(El()),wl=Object(g.memo)((function(e){var t=e.onClose,n=e.onSave;return Object(m.c)("div",{css:Cl},Object(m.c)(oo,{title:"close Preferences",popupPlacement:"left"},Object(m.c)("button",{className:"close",type:"button",onClick:t},Object(m.c)(jn.D,null))),Object(m.c)(oo,{title:"save Preferences",popupPlacement:"left"},Object(m.c)("button",{className:"save",type:"button",onClick:n},Object(m.c)(jn.c,null))))}));function Dl(){var e=Object(f.a)(["\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.25);\n  padding: 0px;\n  margin: 0px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  z-index: 99999;\n  padding: 2px;\n  background-color: white;\n  width: 150px;\n  button {\n    background-color: transparent;\n    border: none;\n    border-bottom: 0.55px solid #f0f0f0;\n    font-size: 11px;\n    padding: 5px;\n    text-align: left;\n    outline: none;\n  }\n  button:hover {\n    background-color: #fafafa;\n    outline: none;\n  }\n\n  button:active {\n    background-color: #eaeaea;\n    outline: none;\n  }\n\n  button:last-of-type {\n    border: none;\n  }\n"]);return Dl=function(){return e},e}var Sl=Object(m.b)(Dl()),Tl=Object(g.forwardRef)((function(e,t){var n=e.context,a=Object(g.useState)({lef:0,top:0}),i=Object(p.a)(a,2),r=i[0],o=i[1],c=Object(g.useState)(),l=Object(p.a)(c,2),u=l[0],s=l[1],d=Object(g.useState)(),f=Object(p.a)(d,2),b=f[0],h=f[1],v=Object(g.useState)(null),O=Object(p.a)(v,2),j=O[0],y=O[1],x=Object(g.useRef)();Object(g.useEffect)((function(){return x.current=document.createElement("div"),document.body.appendChild(x.current),function(){x.current&&document.body.removeChild(x.current)}}),[]);Object(g.useImperativeHandle)(t,(function(){return{handleContextMenu:function(e,t){s(t),function(e){e.preventDefault(),y(e.target.parentElement),h(!0);var t=e.clientX,n=e.clientY,a=window.innerWidth-t>150,i=!a,r=window.innerHeight-n>0,c=!r;a&&(i="".concat(t+5,"px")),i&&(i="".concat(t-150-5,"px")),r&&(r="".concat(n+5,"px")),c&&(r="".concat(n-0-5,"px")),o({left:i,top:r})}(e)}}}));var k=Object(g.useCallback)((function(e,t){e.preventDefault(),t(u),h(!1)}),[u]);return Object(g.useEffect)((function(){var e=function(e){j&&e.target.parentElement&&!e.target.parentElement.isSameNode(j)&&b&&h(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[b,t,j]),b?x.current&&Object(Gt.createPortal)(n&&Object(m.c)("div",{ref:t,css:[Sl,r]},n.map((function(e,t){return Object(m.c)("button",{key:t,type:"button",onClick:function(t){return k(t,e.onClick)}},e.label)}))),x.current):null})),Il=function(e){var t=e.headerGroups;return h.a.createElement("thead",null,t.map((function(e){return h.a.createElement("tr",Object.assign({key:e.getHeaderGroupProps().key},e.getHeaderGroupProps()),e.headers.map((function(e){return h.a.createElement("th",Object.assign({key:e.getHeaderProps().key},e.getHeaderProps(e.getSortByToggleProps())),e.render("Header"),h.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""))})))})))},Al=function(e){var t=e.row,n=e.onContextMenu,a=Object(va.b)([Object.prototype.hasOwnProperty.call(t.original,"id")?t.original.id:""]);return Object(m.c)("tr",Object.assign({onContextMenu:n,key:t.getRowProps().key,css:a.isActive?Gc:Object.prototype.hasOwnProperty.call(t.original,"isConstantlyHighlighted")&&!0===t.original.isConstantlyHighlighted?Uc:null},t.getRowProps(),a.onHover),t.cells.map((function(e){return Object(m.c)("td",Object.assign({key:e.key},e.getCellProps(),{onContextMenu:function(e){return e.preventDefault(),!1}}),e.render("Cell"))})))},Ml=Object(g.memo)((function(e){var t=e.data,n=e.columns,a=e.context,i=Object(g.useRef)(),r=Object(Bc.c)({columns:n,data:t},Bc.b),o=r.getTableProps,c=r.getTableBodyProps,l=r.headerGroups,u=r.rows,s=r.prepareRow,d=Object(g.useCallback)((function(e,t){e.preventDefault(),i.current.handleContextMenu(e,t.original)}),[i]);return Object(m.c)(g.Fragment,null,Object(m.c)("table",Object.assign({},o(),{css:Wc}),Object(m.c)(Il,{headerGroups:l}),Object(m.c)("tbody",c(),u.map((function(e){return s(e),Object(m.c)(Al,Object.assign({key:e.key,row:e},e.getRowProps(),{onContextMenu:function(t){return d(t,e)}}))})))),Object(m.c)(Tl,{ref:i,context:a}))}));Ml.defaultProps={context:null};var _l=Ml,Pl=n(592),Rl=n.n(Pl);var Ll=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return n+Rl()(e).format(t)+a},Fl=function(){return h.a.createElement("p",{style:{textAlign:"center",width:"100%",fontSize:"11px",padding:"5px",color:"gray"}},"No Data")},Nl={marginLeft:10,marginRight:10,border:"none"},zl=el(Object(g.memo)((function(e){var t=e.integrals,n=e.info,a=e.preferences,i=e.activeTab,r=e.xDomain,o=e.enableFilter,c=e.onIntegralsChange,l=Rt(),u=Object(g.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;l({type:"DELETE_INTEGRAL",integralID:n.id})}),[l]),s=Object(g.useCallback)((function(e,t){var n=Object(b.a)(Object(b.a)({},t.original),{},{kind:e});l({type:"CHANGE_INTEGRAL_DATA",data:n})}),[l]),d=Object(g.useMemo)((function(){return[{orderIndex:1,Header:"#",Cell:function(e){return e.row.index+1},width:10},{orderIndex:2,Header:"From",accessor:"from",sortType:"basic",resizable:!0,Cell:function(e){return e.row.original.from.toFixed(2)}},{orderIndex:3,Header:"To",accessor:"to",sortType:"basic",resizable:!0,Cell:function(e){return e.row.original.to.toFixed(2)}},{orderIndex:6,Header:"Kind",accessor:"kind",sortType:"basic",resizable:!0,Cell:function(e){var t=e.row;return h.a.createElement(Xo,{onChange:function(e){return s(e,t)},data:F,style:Nl,defaultValue:t.original.kind})}},{orderIndex:7,Header:"",id:"delete-button",Cell:function(e){var t=e.row;return h.a.createElement("button",{type:"button",className:"delete-button",onClick:function(e){return u(e,t)}},h.a.createElement(jn.z,null))}}]}),[s,u]),f=function(e,t){return!(e&&void 0!==e&&0!==Object.keys(e).length&&(!e||!0!==e[t]))},p=Object(g.useMemo)((function(){var e=function(e,t,n,a){e.push({orderIndex:t,Header:n,sortType:"basic",Cell:function(e){var t=e.row;return a(t)}})},t=ha(a,"integrals.[".concat(i,"]")),n=Object(La.a)(d);if(f(t,"showAbsolute")&&e(n,4,"Absolute",(function(e){return Ll(e.original.absolute,t&&Object.prototype.hasOwnProperty.call(t,"absoluteFormat")?t.absoluteFormat:pa.absoluteFormat)})),f(t,"showRelative")){var r=i&&i.replace(/[0-9]/g,"");e(n,5,"Relative ".concat(r),(function(e){var n=Ll(e.original.integral,t&&Object.prototype.hasOwnProperty.call(t,"relativeFormat")?t.relativeFormat:pa.relativeFormat);return"signal"!==e.original.kind?"[".concat(n,"]"):n}))}return n.sort((function(e,t){return e.orderIndex-t.orderIndex}))}),[i,d,a]),m=Object(g.useMemo)((function(){return 1===n.dimension&&t&&t.values?t.values:[]}),[n.dimension,t]),v=Object(g.useMemo)((function(){function e(e,t){return e*=1e4,(t*=1e4)>=1e4*r[0]&&e<=1e4*r[1]||e<=1e4*r[0]&&t>=1e4*r[1]}var t=o?m.filter((function(t){return e(t.from,t.to)})):m;return c(t),t.map((function(t){return Object(b.a)(Object(b.a)({},t),{},{isConstantlyHighlighted:e(t.from,t.to)})}))}),[m,o,c,r]);return v&&v.length>0?h.a.createElement(_l,{data:v,columns:p}):h.a.createElement(Fl,null)}))),Hl=n(344);function Bl(){var e=Object(f.a)(["\n  display: flex;\n  margin: 5px 0px;\n\n.inputLabel{\n  flex: 2;\n  font-size: 11px;\n  font-weight: bold;\n  color: #232323;\n}\n\n.input {\n  width: '60%',\n  text-align: 'center',\n}\n\n.color{\n  width: 36px;\n  height: 14px;\n  border-radius: 2px;\n}\n\n.swatch{\n  padding: 5px;\n  background: #fff;\n  border-radius: 1px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n  display: inline-block;\n  cursor: pointer;\n}\n.color-popover {\n  position: absolute;\n  z-index: 2;\n}\n\n.cover {\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n}\n  .chrome-picker {\n    border-radius: none !important;\n    width: 200px !important;\n    height: 60px !important;\n    display: flex;\n\n\n  }\n  .chrome-picker > div:first-of-type {\n    padding: 0px !important;\n\n  }\n  .chrome-picker > div:last-child >  div:first-of-type {\n    width: 120px;\n\n  }\n  .chrome-picker > div:last-child >  div:last-child {\n    // padding-bottom: 40% !important;\n    display:none !important;\n  }\n"]);return Bl=function(){return e},e}var Vl=Object(m.b)(Bl()),Yl=Object(g.memo)((function(e){var t=e.label,n=void 0===t?"Color: ":t,a=e.onColorChange,i=e.name,r=e.value,o=Object(g.useState)(!1),c=Object(p.a)(o,2),l=c[0],u=c[1],s=Object(g.useState)(r||"#000000"),d=Object(p.a)(s,2),f=d[0],h=d[1],v=Object(g.useCallback)((function(){u(!l)}),[l]),O=Object(g.useCallback)((function(){u(!1)}),[]),j=Object(g.useCallback)((function(e){var t="".concat(e.hex).concat(Math.round(255*e.rgb.a).toString(16));h(t),a(Object(b.a)(Object(b.a)({},e),{},{hex:t,name:i}))}),[i,a]);return Object(m.c)("div",{css:Vl},Object(m.c)("span",{className:"inputLabel"},n),Object(m.c)("div",{style:{flex:4}},Object(m.c)("div",{className:"swatch",onClick:v},Object(m.c)("div",{className:"color",style:{backgroundColor:f}}),Object(m.c)("input",{type:"hidden",value:f,name:i})),l?Object(m.c)("div",{className:"color-popover"},Object(m.c)("div",{className:"cover",onClick:O}),Object(m.c)(Hl.ChromePicker,{color:{hex:f},onChangeComplete:j})):null))}));Yl.defaultProps={onColorChange:function(){return null}};var Xl=Yl,Gl={row:{display:"flex",margin:"5px 0px"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"60%",textAlign:"center"}},Ul=Object(g.memo)((function(e){var t=e.label,n=e.checkControllerName,a=e.checked,i=e.format,r=e.formatControllerName,o=e.inputChangeHandler,c=e.groupID,l=Object(g.useState)(Boolean(a)),u=Object(p.a)(l,2),s=u[0],d=u[1];return h.a.createElement("div",{style:Gl.row},h.a.createElement("span",{style:Gl.inputLabel},t),h.a.createElement("div",{style:{flex:4}},h.a.createElement("input",{type:"checkbox",onChange:function(e){return d(e.target.checked)},style:{margin:"0px 5px"},defaultChecked:s}),h.a.createElement("input",{name:"".concat(c,"-").concat(n),type:"hidden",value:s}),h.a.createElement("input",{style:Gl.input,name:"".concat(c,"-").concat(r),type:"text",onChange:o,defaultValue:i})))})),Wl={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%",flex:1},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},Zl=el(Object(g.forwardRef)((function(e,t){var n=e.preferences,a=e.nucleus,i=Rt(),r=Object(v.d)(),o=Tn("settings"),c=Object(p.a)(o,2),l=c[0],u=c[1],s=Object(g.useState)(null),d=Object(p.a)(s,2),f=d[0],m=d[1],O=Object(g.useRef)();Object(g.useEffect)((function(){var e=ha(n,"integrals");e&&m(e)}),[n]);var j=function(e){var t=Object(b.a)({},l);t=A.a.set(t,"panels.integrals",e),u(JSON.stringify(t))},y=Object(g.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i({type:"SET_PREFERENCES",data:{type:"integrals",values:e}}),t&&r.success("Integrals preferences saved successfully")}),[r,i]);Object(g.useImperativeHandle)(t,(function(){return{saveSetting:function(){O.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var x=[{id:1,label:"Absolute :",checkController:"showAbsolute",formatController:"absoluteFormat",defaultFormat:"0.00"},{id:2,label:"Relative :",checkController:"showRelative",formatController:"relativeFormat",defaultFormat:"00.00"}],k=function(){var e=Object(D.a)(C.a.mark((function e(t){var n,a,i,r,o,c,l,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target,a=new FormData(n),i={},r=Object(w.a)(a.entries());try{for(r.s();!(o=r.n()).done;)c=o.value,l=c[0].split("-").join("."),u=["true","false"].includes(c[1])?"true"===c[1]:c[1],i=A.a.set(i,l,u)}catch(s){r.e(s)}finally{r.f()}y(i,!0),j(i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=Object(g.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join(".");if(f){var i=A.a.get(f,a);return i||null}var r=t.length-1;return pa[t[r]]}),[f]);return h.a.createElement("div",{style:Wl.container},h.a.createElement("form",{onSubmit:k,ref:O},h.a.createElement("div",{style:Wl.groupContainer},h.a.createElement("p",{style:Wl.header},"General"),h.a.createElement(Xl,{name:"color",value:E("color")}),h.a.createElement(zo,{name:"strokeWidth",label:"stroke width :",style:{label:{fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"60%",textAlign:"center",borderRadius:"0"}},defaultValue:1,value:E("strokeWidth"),min:1,pattern:"[1-9]*"})),a&&a.map((function(e){return h.a.createElement("div",{key:e,style:Wl.groupContainer},h.a.createElement("p",{style:Wl.header},h.a.createElement(Lr.a,{mf:e})),x.map((function(t){return h.a.createElement(Ul,{key:t.id,label:t.label,checked:E(e,t.checkController),format:E(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e})})))}))))}))),Kl={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},sumButton:{borderRadius:"5px",marginTop:"3px",color:"white",backgroundColor:"#6d6d6d",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},container:{display:"flex",flexDirection:"column",height:"100%"}},Jl=el(Object(g.memo)((function(e){var t=e.integrals,n=e.activeTab,a=e.molecules,i=Object(g.useState)(!1),r=Object(p.a)(i,2),o=r[0],c=r[1],l=Object(g.useState)(0),u=Object(p.a)(l,2),s=u[0],d=u[1],f=Rt(),b=bn(),m=Object(g.useState)(!1),v=Object(p.a)(m,2),O=v[0],j=v[1],y=Object(g.useRef)(),x=Object(g.useCallback)((function(){f({type:"DELETE_INTEGRAL",integralID:null})}),[f]),k=Object(g.useCallback)((function(){b.showConfirmDialog("All records will be deleted,Are You sure?",{onYes:x})}),[b,x]),E=Object(g.useCallback)((function(e){void 0!==e&&f({type:"CHANGE_INTEGRAL_SUM",value:e}),b.close()}),[f,b]),C=Object(g.useMemo)((function(){return A.a.get(t,"options.sum",null)}),[t]),w=Object(g.useCallback)((function(){b.show(h.a.createElement(yl,{onClose:function(){return b.close()},onSave:E,header:"Set new Integrals Sum (Current: ".concat(C,")"),molecules:a,element:n?n.replace(/[0-9]/g,""):null}))}),[n,E,C,b,a]),D=Object(g.useCallback)((function(){j(!O)}),[O]),S=Object(g.useCallback)((function(){y.current.saveSetting(),j(!1)}),[]),T=Object(g.useCallback)((function(){c(!o)}),[o]),I=Object(g.useCallback)((function(e){e&&d(e.length)}),[]);return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{style:Kl.container},!O&&h.a.createElement(kl,{counter:s,onDelete:k,deleteToolTip:"Delete All Integrals",onFilter:T,filterToolTip:o?"Show all integrals":"Hide integrals out of view",filterIsActive:o,counterFiltered:s,showSettingButton:"true",onSettingClick:D},h.a.createElement(oo,{title:"Change Integrals Sum (".concat(C,")"),popupPlacement:"right"},h.a.createElement("button",{style:Kl.sumButton,type:"button",onClick:w},"\u03a3"))),O&&h.a.createElement(wl,{onSave:S,onClose:D}),h.a.createElement(Qc.a,{isFlipped:O,infinite:!0,containerStyle:{height:"100%"}},h.a.createElement("div",null,h.a.createElement(zl,{enableFilter:o,onIntegralsChange:I})),h.a.createElement(Zl,{ref:y}))))}))),ql=n(771),$l=n(780);function Ql(){var e=Object(f.a)(["\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);\n  padding: 0px;\n  margin: 0px;\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  z-index: 99999;\n  padding: 2px;\n  transform: translate(40px, -26px);\n  background-color: white;\n\n  button:hover {\n    background-color: #fafafa;\n  }\n"]);return Ql=function(){return e},e}var eu=Object(m.b)(Ql()),tu=function(e){var t=e.style,n=e.component,a=e.toolTip,i=void 0===a?"":a,r=e.children,o=e.className,c=Object(g.useState)(!1),l=Object(p.a)(c,2),u=l[0],s=l[1],d=Object(g.useCallback)((function(){s(!1)}),[]),f=Object(g.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),s(!0),document.addEventListener("click",d)}),[d]),b=Object(g.useCallback)((function(e){return e.preventDefault(),e.stopPropagation(),!1}),[]);return Object(g.useEffect)((function(){u||document.removeEventListener("click",d)}),[d,u]),Object(m.c)("div",{style:{height:"auto"}},Object(m.c)("button",{type:"button",css:t,onClick:f,onContextMenu:b,className:o},Object(m.c)(oo,{title:i,popupPlacement:"right"},n)),u?Object(m.c)("div",{className:"menu",css:eu},r):null)};var nu=function(e){var t=function(t){var n=Mt(),a=n.data,i=n.activeSpectrum,r=n.molecules,o=n.displayerMode,c=n.activeTab,l=Object(g.useMemo)((function(){if(a&&i&&i.id){var e=a.find((function(e){return e.id===i.id}));return{ranges:e.ranges,zones:e.zones}}return{}}),[i,a]),u=l.ranges,s=void 0===u?{}:u,d=l.zones,f=void 0===d?{}:d,b=t.forwardedRef,p=Object(k.a)(t,["forwardedRef"]);return h.a.createElement(e,Object.assign({},p,{ranges:s,zones:f,molecules:r,displayerMode:o,activeTab:c,ref:b}))};return Object(g.memo)(h.a.forwardRef((function(e,n){return h.a.createElement(t,Object.assign({},e,{forwardedRef:n}))})))},au=n(386);function iu(){var e=Object(f.a)(["\n  -moz-box-shadow: inset 0px 1px 0px 0px #ffffff;\n  -webkit-box-shadow: inset 0px 1px 0px 0px #ffffff;\n  box-shadow: inset 0px 1px 0px 0px #ffffff;\n  background: -webkit-gradient(\n    linear,\n    left top,\n    left bottom,\n    color-stop(0.05, #ffffff),\n    color-stop(1, #f6f6f6)\n  );\n  background: -moz-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -webkit-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -o-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -ms-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: linear-gradient(to bottom, #ffffff 5%, #f6f6f6 100%);\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#f6f6f6',GradientType=0);\n  background-color: #ffffff;\n  border: 0.55px solid #dcdcdc;\n  display: inline-block;\n  cursor: pointer;\n  color: #666666;\n  font-weight: bold;\n  padding: 6px 24px;\n  text-decoration: none;\n  text-shadow: 0px 1px 0px #ffffff;\n\n  :hover {\n    background: -webkit-gradient(\n      linear,\n      left top,\n      left bottom,\n      color-stop(0.05, #f6f6f6),\n      color-stop(1, #ffffff)\n    );\n    background: -moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n    background-color: #f6f6f6;\n  }\n"]);return iu=function(){return e},e}var ru=Object(m.b)(iu()),ou=function(e){var t=e.onClose,n=e.open,a=e.selectedMolecule,i=Object(g.useState)(null),r=Object(p.a)(i,2),o=r[0],c=r[1],l=Rt();Object(g.useEffect)((function(){c(a?a.molfile:null)}),[a,n]);var u=Object(g.useCallback)((function(e){c(e)}),[c]),s=Object(g.useCallback)((function(){t()}),[t]),d=Object(g.useCallback)((function(){a?(l({type:"SET_MOLECULE",molfile:o,key:a.key}),t("replace")):(l({type:"ADD_MOLECULE",molfile:o}),t("new"))}),[l,a,o,t]);return Object(m.c)(Xt,{open:n,onClose:s},Object(m.c)(au.a,{initialMolfile:a&&a.molfile,svgMenu:!0,fragment:!1,onChange:u}),Object(m.c)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",margin:5}},Object(m.c)("button",{type:"button",css:ru,onClick:s},"Close"),Object(m.c)("button",{type:"button",css:ru,onClick:d},"Save")))},cu=n(756);function lu(e){return uu.apply(this,arguments)}function uu(){return(uu=Object(D.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(t);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function su(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"experiment",t=arguments.length>1?arguments[1]:void 0,n=fu(t),a=n.blob;Object(cu.saveAs)(a,"".concat(e,".svg"))}function du(e){var t=fu(e),n=t.blob,a=t.width,i=t.height;try{var r=document.createElement("canvas");r.width=a,r.height=i;var o=r.getContext("2d");o.fillStyle="white",o.fillRect(0,0,r.width,r.height);var c=new Image,l=URL.createObjectURL(n);c.onload=Object(D.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.drawImage(c,0,0),t=r.toDataURL("image/png",1),r.toBlob((function(e){var t=new ClipboardItem(Object(P.a)({},e.type,e));navigator.clipboard.write([t]).then((function(){console.log("experiment copied.")}),(function(e){console.log(e)}))})),URL.revokeObjectURL(t);case 4:case"end":return e.stop()}}),e)}))),c.src=l}catch(u){u instanceof ReferenceError&&alert("Your browser does not support this feature, please use Google Chrome"),console.log(u)}}function fu(e){var t=document.getElementById(e).cloneNode(!0),n=t.getAttribute("width").replace("px",""),a=t.getAttribute("height").replace("px","");t.querySelectorAll('[data-no-export="true"]').forEach((function(e){return e.remove()}));var i="<svg  viewBox='0 0 ".concat(n," ").concat(a,"' width=\"").concat(n,'"  height="').concat(a,'"  version="1.1" xmlns="http://www.w3.org/2000/svg">'),r="".concat(i+"<style>.grid line,.grid path{stroke:none;} .regular-text{fill:black} .x path{stroke-width:1px} .x text{\n    font-size: 12px;\n    font-weight: bold;\n  } </style>"+t.innerHTML,"</svg>");return{blob:new Blob([r],{type:"image/svg+xml"}),width:n,height:a}}var bu=function(e,t){return function(e,t){return[].concat(e[t].diaID||[],e.signal?e.signal.map((function(e){return e[t].diaID||[]})).flat():[])}(e,t).length},pu=function(e,t){e[t].pubIntegral=bu(e,t),0===e[t].pubIntegral&&delete e[t].pubIntegral},mu=function(e,t){delete e[t].diaID,e.signal.forEach((function(e){delete e[t].diaID})),delete e.pubIntegral},gu=function(e,t,n,a){void 0!==t&&void 0!==a?(!0===t?delete e[a].diaID:void 0!==n&&delete e.signal[n][a].diaID,pu(e,a)):void 0!==a?(mu(e,a),pu(e,a)):(mu(e,"x"),pu(e,"x"),mu(e,"y"),pu(e,"y"))};function hu(){var e=Object(f.a)(["\n  background-color: transparent;\n  border: none;\n  border-bottom: 0.55px solid whitesmoke;\n  height: 35px;\n  outline: outline;\n  display: flex;\n  justify-content: flex-start;\n\n  :focus {\n    outline: none !important;\n  }\n  span {\n    font-size: 10px;\n    padding: 0px 10px;\n  }\n"]);return hu=function(){return e},e}function vu(){var e=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n\n  .slider {\n    width: inherit;\n    height: inherit;\n    padding: 0px;\n\n    .mol-svg-container {\n      height: calc(100% - 25px);\n      div {\n        width: 100%;\n        height: 100%;\n      }\n    }\n\n    p {\n      width: 100%;\n      margin: 0 auto;\n      display: block;\n      position: relative;\n    }\n\n    svg polygon {\n      fill: gray !important;\n    }\n  }\n"]);return vu=function(){return e},e}function Ou(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n\n  button svg {\n    fill: #4e4e4e;\n  }\n\n  .bar-button {\n    background-color: transparent;\n    border: none;\n  }\n\n  p {\n    margin: 0;\n    text-align: right;\n    width: 100%;\n    line-height: 22px;\n    padding: 0px 10px;\n  }\n"]);return Ou=function(){return e},e}function ju(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  width: 100%;\n  height: 100%;\n"]);return ju=function(){return e},e}var yu=Object(m.b)(ju()),xu=Object(m.b)(Ou()),ku=Object(m.b)(vu()),Eu=Object(m.b)(hu()),Cu=nu(Object(g.memo)((function(e){var t=e.zones,n=e.ranges,a=e.molecules,i=e.activeTab,r=e.displayerMode,o=Object($l.a)(),c=Object(p.a)(o,2),l=c[0],u=c[1],s=u.width,d=u.height,f=h.a.useState(!1),O=Object(p.a)(f,2),j=O[0],y=O[1],x=Object(g.useState)(),k=Object(p.a)(x,2),E=k[0],C=k[1],w=Object(g.useState)(0),D=Object(p.a)(w,2),S=D[0],T=D[1],I=Object(g.useState)([]),M=Object(p.a)(I,2),_=M[0],P=M[1],R=Object(g.useState)(null),L=Object(p.a)(R,2),F=L[0],N=L[1],z=Rt(),V=Object(v.d)(),Y=Object(va.c)(),X=Wa(),G=Object(g.useState)([]),U=Object(p.a)(G,2),W=U[0],Z=U[1];Object(g.useEffect)((function(){if(i){var e=i.split(",");1===e.length?Z([i.replace(/[0-9]/g,"")]):2===e.length&&Z(e.map((function(e){return e.replace(/[0-9]/g,"")})))}else Z([])}),[i]);var K=Za(void 0!==X.assignment.activeID?X.assignment.activeID:"___"),J=Object(g.useCallback)((function(e){if(W.length>0&&Object.keys(e).length>0){var t="x"===K.activeAxis?0:"y"===K.activeAxis?1:void 0;if(void 0===t)return{oclIDs:[e.oclID].concat(e.hydrogenOCLIDs),nbAtoms:e.nbAtoms+e.nbAtoms*e.nbHydrogens};if(W[t]===e.atomLabel)return{oclIDs:[e.oclID],nbAtoms:e.nbAtoms};if("H"===W[t])return{oclIDs:e.hydrogenOCLIDs,nbAtoms:e.nbAtoms*e.nbHydrogens}}return{oclIDs:[],nbAtoms:0}}),[K.activeAxis,W]),q=Object(g.useMemo)((function(){if(t||n){if("1D"===r&&n&&n.values)return n.values;if("2D"===r&&t&&t.values)return n.values}return[]}),[r,n,t]),$=Object(g.useMemo)((function(){var e={x:[],y:[]};for(var t in X.assignment.assignment){var n,a;if(X.assignment.assignment[t].x)(n=e.x).push.apply(n,Object(La.a)(X.assignment.assignment[t].x));if(X.assignment.assignment[t].y)(a=e.y).push.apply(a,Object(La.a)(X.assignment.assignment[t].y))}return e}),[X.assignment]),Q=Object(g.useMemo)((function(){return $.x.concat($.y)}),[$.x,$.y]),ee=Object(g.useCallback)((function(e,t){if(Q.some((function(e){return t.oclIDs.includes(e)}))&&!e.some((function(e){return t.oclIDs.includes(e)})))return V.info("Atom is already assigned to another signal!"),e;var n=e?e.slice():[];if(1===t.oclIDs.length)if(n.includes(t.oclIDs[0]))n=n.filter((function(e){return e!==t.oclIDs[0]}));else for(var a=0;a<t.nbAtoms;a++)n.push(t.oclIDs[0]);else t.oclIDs.length>1&&t.oclIDs.forEach((function(e){n.includes(e)?n=n.filter((function(t){return t!==e})):n.push(e)}));return n}),[V,Q]),te=Object(g.useCallback)((function(e){if(K.isActive){var t=J(e);if(t.nbAtoms>0){t.oclIDs.forEach((function(e){K.toggle(e)}));var n=K.id.split("___"),a=q.find((function(e){return e.id===n[0]})),i=isNaN(Number(n[1]))?void 0:Number(n[1]),o=A.a.cloneDeep(a);void 0===i?"1D"===r?o.diaID=ee(o.diaID||[],t):"2D"===r&&(o[K.activeAxis].diaID=ee(o[K.activeAxis].diaID||[],t)):a.signal&&a.signal[i]&&("1D"===r?o.signal[i]=Object(b.a)(Object(b.a)({},o.signal[i]),{},{diaID:ee(o.signal[i].diaID||[],t)}):"2D"===r&&(o.signal[i][K.activeAxis]=Object(b.a)(Object(b.a)({},o.signal[i][K.activeAxis]),{},{diaID:ee(o.signal[i][K.activeAxis].diaID||[],t)}))),"1D"===r?(o.pubIntegral=H(o),z({type:"CHANGE_RANGE_DATA",data:o})):"2D"===r&&(o[K.activeAxis].pubIntegral=bu(o,K.activeAxis),z({type:"CHANGE_ZONE_DATA",data:o}))}else V.info("Not assigned! Different atom type or no attached hydrogens found!")}}),[K,J,q,r,ee,z,V]),ne=Object(g.useMemo)((function(){var e=X.assignment.isOnHover?X.assignment.assignment[X.assignment.onHoverID]:null,t=X.assignment.isOnHover?X.assignment.onHoverAxis:null;return e?"1D"===r?e.x||[]:"2D"===r?t?"x"===t?e.x||[]:"y"===t?e.y||[]:(e.x||[]).concat(e.y||[]):(e.x||[]).concat(e.y||[]):[]:[]}),[X.assignment.assignment,X.assignment.isOnHover,X.assignment.onHoverAxis,X.assignment.onHoverID,r]);Object(g.useEffect)((function(){F&&("show"===F?Y.dispatch({type:"SHOW",payload:_}):"hide"===F&&(Y.dispatch({type:"HIDE",payload:_}),P([])),N(null))}),[F,_,Y]);var ae=Object(g.useCallback)((function(e){var t=J(e).oclIDs;if(t.length>0){var n=[];for(var a in X.assignment.assignment){var i=a.split("___");X.assignment.assignment[a].x&&X.assignment.assignment[a].x.some((function(e){return t.includes(e)}))&&(n=n.concat([a],i[0]!==a?[i[0]]:[],X.assignment.assignment[a].x)),X.assignment.assignment[a].y&&X.assignment.assignment[a].y.some((function(e){return t.includes(e)}))&&(n=n.concat([a],i[0]!==a?[i[0]]:[],X.assignment.assignment[a].y))}P(n),N("show")}else N("hide")}),[X.assignment.assignment,J]),ie=Object(g.useCallback)((function(){q.forEach((function(e){"1D"===r?(X.dispatch({type:"REMOVE_ALL",payload:{id:e.id,axis:"x"}}),e.signal.forEach((function(t,n){return X.dispatch({type:"REMOVE_ALL",payload:{id:"".concat(e.id).concat("___").concat(n),axis:"x"}})})),B(e),z({type:"CHANGE_RANGE_DATA",data:e})):"2D"===r&&(X.dispatch({type:"REMOVE_ALL",payload:{id:e.id,axis:"x"}}),X.dispatch({type:"REMOVE_ALL",payload:{id:e.id,axis:"y"}}),e.signal.forEach((function(t,n){X.dispatch({type:"REMOVE_ALL",payload:{id:"".concat(e.id).concat("___").concat(n),axis:"x"}}),X.dispatch({type:"REMOVE_ALL",payload:{id:"".concat(e.id).concat("___").concat(n),axis:"y"}})})),gu(e),z({type:"CHANGE_ZONE_DATA",data:e}))}))}),[q,r,X,z]),re=Object(g.useCallback)((function(e){y(!1),"new"===e&&T(a.length)}),[a.length]),oe=Object(g.useCallback)((function(e,t,n){C(n?{molfile:n,key:t}:null),y(!0)}),[]),ce=Object(g.useCallback)((function(){navigator.clipboard.readText().then((function(e){z({type:"ADD_MOLECULE",molfile:e})}))}),[z]),le=Object(g.useCallback)((function(){a[S]&&a[S].key&&(T(0),z({type:"DELETE_MOLECULE",key:a[S].key}),ie())}),[a,S,z,ie]),ue=Object(g.useCallback)((function(){su("molFile","molSVG".concat(S))}),[S]),se=Object(g.useCallback)((function(){du("molSVG".concat(S)),V.success("MOL copied as PNG to clipboard")}),[V,S]),de=Object(g.useCallback)((function(){a[S]&&(lu(a[S].molfile)?V.success("MOLFile copied to clipboard"):V.error("copied not completed"))}),[V,S,a]),fe=Object(g.useCallback)((function(e,t){z({type:"SET_MOLECULE",molfile:t,key:e})}),[z]);return Object(m.c)("div",{css:yu},Object(m.c)("div",{css:xu},Object(m.c)(tu,{className:"bar-button",component:Object(m.c)(jn.o,null),toolTip:"Export As"},Object(m.c)("button",{type:"button",css:Eu,onClick:de},Object(m.c)(jn.e,null),Object(m.c)("span",null,"Copy as molfile")),Object(m.c)("button",{type:"button",css:Eu,onClick:se},Object(m.c)(jn.p,null),Object(m.c)("span",null,"Copy as PNG")),Object(m.c)("button",{type:"button",css:Eu,onClick:ue},Object(m.c)(jn.h,null),Object(m.c)("span",null,"Export as SVG"))),Object(m.c)(oo,{title:"Paste molfile",popupPlacement:"left"},Object(m.c)("button",{className:"bar-button",type:"button",onClick:ce},Object(m.c)(jn.w,null))),Object(m.c)(oo,{title:"Add Molecule",popupPlacement:"left"},Object(m.c)("button",{className:"bar-button",type:"button",onClick:oe},Object(m.c)(jn.x,null))),Object(m.c)(oo,{title:"Delete Molecule",popupPlacement:"left"},Object(m.c)("button",{className:"bar-button",type:"button",onClick:le},Object(m.c)(jn.z,null))),Object(m.c)("p",null,a&&a.length>0&&"".concat(+(S+1)," / ").concat(a.length)," ")),Object(m.c)("div",{css:ku},Object(m.c)(nl.a,{onSlideChange:function(e){return T(e.slideIndex)},slideIndex:S},a&&a.length>0?a.map((function(e,t){return Object(m.c)("div",{key:e.key,onDoubleClick:function(t){return oe(t,e.key,e.molfile)}},Object(m.c)("div",{className:"mol-svg-container",ref:l},Object(m.c)(ql.a,{id:"molSVG".concat(t),width:s>0?s:100,height:d>0?d:100,molfile:e.molfile,setMolfile:function(t){return fe(e.key,t)},setSelectedAtom:te,atomHighlightColor:ne&&ne.length>0?"red":"#FFD700",atomHighlightOpacity:.35,highlights:ne&&ne.length>0?ne:Q,setHoverAtom:ae})),Object(m.c)("p",null,Object(m.c)(Lr.a,{mf:e.mf})," - ",e.mw.toFixed(2)))})):Object(m.c)("div",{style:{width:"100%",height:"100%"},onClick:oe})),Object(m.c)(ou,{open:j,onClose:re,selectedMolecule:E})))})));var wu=function(e){var t=function(t){var n=Mt(),a=n.data,i=n.activeSpectrum,r=n.xDomain,o=n.preferences,c=n.activeTab,l=n.tabActiveSpectrum,u=Object(g.useMemo)((function(){if(a&&i&&i.id){var e=a.find((function(e){return e.id===i.id}));return{peaks:e.peaks,info:e.info,x:e.x,y:e.y}}return{}}),[i,a]),s=u.peaks,d=void 0===s?{}:s,f=u.info,b=void 0===f?{}:f,p=u.x,m=void 0===p?[]:p,v=u.y,O=void 0===v?[]:v,j=Object(g.useMemo)((function(){return l&&Object.keys(l).length>0?Object.keys(l):null}),[l]),y=t.forwardedRef,x=Object(k.a)(t,["forwardedRef"]);return h.a.createElement(e,Object.assign({},x,{peaks:d,info:b,x:m,y:O,xDomain:r,preferences:o,activeTab:c,nucleus:j,ref:y}))};return h.a.forwardRef((function(e,n){return h.a.createElement(t,Object.assign({},e,{forwardedRef:n}))}))},Du={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%"},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},Su=[{id:1,label:"Peak Number :",checkController:"showPeakNumber",formatController:"peakNumberFormat",defaultFormat:""},{id:2,label:"Peak Index : ",checkController:"showPeakIndex",formatController:"peakIndexFormat",defaultFormat:""},{id:3,label:"\u03b4 (ppm) :",checkController:"showDeltaPPM",formatController:"deltaPPMFormat",defaultFormat:"00.00"},{id:4,label:"\u03b4 (Hz) :",checkController:"showDeltaHz",formatController:"deltaHzFormat",defaultFormat:"00.00"},{id:5,label:"Peak Width",checkController:"showPeakWidth",formatController:"peakWidthFormat",defaultFormat:"00.0000"},{id:6,label:"Intensity :",checkController:"showIntensity",formatController:"intensityFormat",defaultFormat:"00.00"}],Tu=Object(g.forwardRef)((function(e,t){var n=e.preferences,a=e.nucleus,i=Rt(),r=Object(v.d)(),o=Tn("settings"),c=Object(p.a)(o,2),l=c[0],u=c[1],s=Object(g.useState)(null),d=Object(p.a)(s,2),f=d[0],m=d[1],O=Object(g.useRef)();Object(g.useEffect)((function(){var e=ha(n,"peaks");e&&m(e)}),[n]);var j=Object(g.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i({type:"SET_PREFERENCES",data:{type:"peaks",values:e}}),t&&r.success("Peaks preferences saved successfully")}),[r,i]);Object(g.useImperativeHandle)(t,(function(){return{saveSetting:function(){O.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var y=function(e){var t=Object(b.a)({},l);t=A.a.set(t,"panels.peaks",e),u(JSON.stringify(t))},x=function(){var e=Object(D.a)(C.a.mark((function e(t){var n,a,i,r,o,c,l,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target,a=new FormData(n),i={},r=Object(w.a)(a.entries());try{for(r.s();!(o=r.n()).done;)c=o.value,l=c[0].split("-").join("."),u=["true","false"].includes(c[1])?"true"===c[1]:c[1],i=A.a.set(i,l,u)}catch(s){r.e(s)}finally{r.f()}j(i,!0),y(i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(g.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join(".");if(f){var i=A.a.get(f,a);return i||null}var r=t.length-1;return ga[t[r]]}),[f]);return h.a.createElement("div",{style:Du.container},h.a.createElement("form",{onSubmit:x,ref:O},a&&a.map((function(e){return h.a.createElement("div",{key:e,style:Du.groupContainer},h.a.createElement("p",{style:Du.header},e),Su.map((function(t){return h.a.createElement(Ul,{key:t.id,label:t.label,checked:k(e,t.checkController),format:k(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e})})))}))))})),Iu=wu(Object(g.memo)(Tu)),Au=wu(Object(g.memo)((function(e){var t=e.peaks,n=e.info,a=e.x,i=e.y,r=e.xDomain,o=e.preferences,c=e.activeTab,l=e.enableFilter,u=e.onPeaksChange,s=Rt(),d=Object(g.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;s({type:"DELETE_PEAK_NOTATION",data:{id:n.id,xIndex:n.xIndex}})}),[s]),f=Object(g.useMemo)((function(){return[{Header:"#",Cell:function(e){return e.row.index+1}},{Header:"peak index",accessor:"xIndex",sortType:"basic"},{Header:"Intensity ",accessor:"yValue",sortType:"basic"},{Header:"",id:"delete-button",Cell:function(e){var t=e.row;return h.a.createElement("button",{type:"button",className:"delete-button",onClick:function(e){return d(e,t)}},h.a.createElement(jn.z,null))}}]}),[d]),b=Object(g.useMemo)((function(){return[{index:20,Header:"",id:"delete-button",Cell:function(e){var t=e.row;return h.a.createElement("button",{type:"button",className:"delete-button",onClick:function(e){return d(e,t)}},h.a.createElement(jn.z,null))}}]}),[d]),p=Object(g.useMemo)((function(){var e=function(e,t,n,a){e.push({index:t,Header:n,sortType:"basic",Cell:function(e){var t=e.row;return a(t)}})},t=ha(o,"peaks.[".concat(c,"]"));if(t){var n=Object(La.a)(b);return t.showPeakNumber&&e(n,1,"#",(function(e){return Ll(e.index+1,t.peakNumberFormat)})),t.showPeakIndex&&e(n,2,"index",(function(e){return Ll(e.original.xIndex,t.peakIndexFormat)})),t.showDeltaPPM&&e(n,3,"\u03b4 (ppm)",(function(e){return Ll(e.original.value,t.deltaPPMFormat)})),t.showDeltaHz&&e(n,4,"\u03b4 (Hz)",(function(e){return Ll(e.original.valueHz,t.deltaHzFormat)})),t.showIntensity&&e(n,5,"Intensity",(function(e){return Ll(e.original.yValue,t.intensityFormat)})),t.showPeakWidth&&e(n,5,"Peak Width",(function(e){return Ll(e.original.peakWidth,t.peakWidthFormat)})),n.sort((function(e,t){return e.index-t.index}))}return f}),[c,f,b,o]),m=Object(g.useMemo)((function(){function e(e){return 1e5*e>=1e5*r[0]&&1e5*e<=1e5*r[1]}if(t&&t.values){var o=Na(n.nucleus),c=l?t.values.filter((function(t){return e(a[t.xIndex])})):t.values;return u(c),c.map((function(t){var r=a[t.xIndex].toFixed(o);return{xIndex:t.xIndex,value:r,valueHz:n&&n.originFrequency?r*n.originFrequency:"",id:t.id,yValue:i[t.xIndex],peakWidth:t.width?t.width:"",isConstantlyHighlighted:e(r)}}))}}),[l,n,u,t,a,r,i]);return m&&m.length>0?h.a.createElement(_l,{data:m,columns:p}):h.a.createElement(Fl,null)}))),Mu={container:{display:"flex",flexDirection:"column",height:"100%"},toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},button:{backgroundColor:"transparent",border:"none"}},_u=Object(g.memo)((function(){var e=Object(g.useState)(!1),t=Object(p.a)(e,2),n=t[0],a=t[1],i=Object(g.useState)(0),r=Object(p.a)(i,2),o=r[0],c=r[1],l=Rt(),u=bn(),s=Object(g.useState)(!1),d=Object(p.a)(s,2),f=d[0],b=d[1],m=Object(g.useRef)(),v=Object(g.useCallback)((function(){l({type:"DELETE_PEAK_NOTATION",data:null})}),[l]),O=Object(g.useCallback)((function(){u.showConfirmDialog("All records will be deleted,Are You sure?",{onYes:v})}),[u,v]),j=Object(g.useCallback)((function(){b(!f)}),[f]),y=Object(g.useCallback)((function(){m.current.saveSetting(),b(!1)}),[]),x=Object(g.useCallback)((function(){a(!n)}),[n]),k=Object(g.useCallback)((function(e){e&&c(e.length)}),[]);return h.a.createElement("div",{style:Mu.container},!f&&h.a.createElement(kl,{counter:o,onDelete:O,deleteToolTip:"Delete All Peaks",onFilter:x,filterToolTip:n?"Show all peaks":"Hide peaks out of view",filterIsActive:n,counterFiltered:o,showSettingButton:"true",onSettingClick:j}),f&&h.a.createElement(wl,{onSave:y,onClose:j}),h.a.createElement(Qc.a,{isFlipped:f,infinite:!0,containerStyle:{height:"100%"}},h.a.createElement("div",null,h.a.createElement(Au,{enableFilter:n,onPeaksChange:k})),h.a.createElement(Iu,{ref:m})))}));var Pu=function(e){var t=function(t){var n=Mt(),a=n.data,i=n.activeSpectrum,r=n.xDomain,o=n.preferences,c=n.activeTab,l=n.molecules,u=n.showMultiplicityTrees,s=n.tabActiveSpectrum,d=Object(g.useMemo)((function(){if(a&&i&&i.id){var e=a.find((function(e){return e.id===i.id}));return{ranges:e.ranges,x:e.x,y:e.y}}return{}}),[i,a]),f=d.ranges,b=void 0===f?{}:f,p=d.x,m=void 0===p?[]:p,v=d.y,O=void 0===v?[]:v,j=Object(g.useMemo)((function(){return s&&Object.keys(s).length>0?Object.keys(s):null}),[s]),y=t.forwardedRef,x=Object(k.a)(t,["forwardedRef"]);return h.a.createElement(e,Object.assign({},x,{ranges:b,x:m,y:O,xDomain:r,preferences:o,activeTab:c,molecules:l,nucleus:j,showMultiplicityTrees:u,ref:y}))};return Object(g.memo)(h.a.forwardRef((function(e,n){return h.a.createElement(t,Object.assign({},e,{forwardedRef:n}))})))},Ru=n(385);function Lu(){var e=Object(f.a)(["\n  overflow: auto;\n  width: 400px;\n  .innerContainer {\n    padding: 5px;\n    width: 100%;\n    height: 180px;\n    border: none;\n  }\n\n  .mainButtonsContainer {\n    padding: 5px 0px;\n    border-bottom: 0.55px solid #ebebeb;\n    display: flex;\n    justify-content: space-between;\n  }\n\n  button:focus {\n    outline: none;\n  }\n\n  button {\n    background-color: transparent;\n    border: none;\n  }\n"]);return Lu=function(){return e},e}var Fu=Object(m.b)(Lu()),Nu=function(e){var t=e.text,n=e.onClose,a=e.onCopyClick;return Object(m.c)("div",{css:Fu},Object(m.c)("div",{className:"mainButtonsContainer"},Object(m.c)("button",{type:"button",onClick:function(){return a(t)}},Object(m.c)(jn.e,null)),Object(m.c)("button",{type:"button",onClick:n},Object(m.c)(jn.D,null))),Object(m.c)("div",{className:"innerContainer",dangerouslySetInnerHTML:{__html:t}}))},zu={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},sumButton:{borderRadius:"5px",marginTop:"3px",color:"white",backgroundColor:"#6d6d6d",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},removeAssignmentsButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"2px",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},setShowMultiplicityTreesButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"5px",color:"black",backgroundColor:"transparent",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},button:{backgroundColor:"transparent",border:"none"}},Hu=function(e){var t=e.ranges,n=e.activeTab,a=e.molecules,i=e.onUnlink,r=e.onFilterActivated,o=e.onSettingClick,c=e.isFilterActive,l=e.filterCounter,u=e.showMultiplicityTrees,s=Rt(),d=bn(),f=Object(v.d)(),p=A.a.get(t,"options.sum",null),m=Object(g.useCallback)((function(){t.values.forEach((function(e){return i(e)}))}),[t,i]),O=Object(g.useCallback)((function(e){void 0!==e&&s({type:"CHANGE_RANGE_SUM",value:e}),d.close()}),[s,d]),j=Object(g.useCallback)((function(){d.show(h.a.createElement(yl,{onClose:function(){return d.close()},onSave:O,header:"Set new Ranges Sum (Current: ".concat(p,")"),molecules:a,element:n?n.replace(/[0-9]/g,""):null}))}),[n,O,p,d,a]),y=Object(g.useCallback)((function(){d.showConfirmDialog("All ranges will be deleted. Are You sure?",{onYes:function(){m(),s({type:"DELETE_RANGE"})}})}),[s,d,m]),x=Object(g.useCallback)((function(e){lu(e)?f.success("Data copied to clipboard"):f.error("copy to clipboard failed")}),[f]),k=Object(g.useCallback)((function(){var e=Object(Ru.a)(t.values);d.show(h.a.createElement(Nu,{text:e,onCopyClick:x,onClose:function(){return d.close()}}),{})}),[d,t.values,x]),E=Object(g.useCallback)((function(){d.showConfirmDialog("All assignments will be removed. Are you sure?",{onYes:m})}),[m,d]),C=Object(g.useCallback)((function(){s({type:"SET_SHOW_MULTIPLICITY_TREES"})}),[s]);return h.a.createElement(kl,{counter:t&&t.values&&t.values.length,onDelete:y,deleteToolTip:"Delete All Ranges",onFilter:r,filterToolTip:c?"Show all ranges":"Hide ranges out of view",filterIsActive:c,counterFiltered:l,showSettingButton:"true",onSettingClick:o},h.a.createElement(oo,{title:"Preview publication string",popupPlacement:"right"},h.a.createElement("button",{style:zu.button,type:"button",onClick:k},h.a.createElement(jn.o,null))),h.a.createElement(oo,{title:"Change Ranges Sum (".concat(p,")"),popupPlacement:"right"},h.a.createElement("button",{style:zu.sumButton,type:"button",onClick:j},"\u03a3")),h.a.createElement(oo,{title:"Remove all Assignments",popupPlacement:"right"},h.a.createElement("button",{style:zu.removeAssignmentsButton,type:"button",onClick:E,disabled:!t||!t.values||0===t.values.length},h.a.createElement(jn.E,null))),h.a.createElement(oo,{title:u?"Hide Multiplicity Trees in Spectrum":"Show Multiplicity Trees in Spectrum",popupPlacement:"right"},h.a.createElement("button",{style:u&&!0===u?Object(b.a)(Object(b.a)({},zu.setShowMultiplicityTreesButton),{},{backgroundColor:"#6d6d6d",color:"white",fontSize:"10px"}):zu.setShowMultiplicityTreesButton,type:"button",onClick:C,disabled:!t||!t.values||0===t.values.length},h.a.createElement(jn.C,null))))},Bu={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%",flex:1},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},Vu=Object(g.forwardRef)((function(e,t){var n=e.nucleus,a=e.preferences,i=Rt(),r=Object(v.d)(),o=Tn("settings"),c=Object(p.a)(o,2),l=c[0],u=c[1],s=Object(g.useState)(null),d=Object(p.a)(s,2),f=d[0],m=d[1],O=Object(g.useRef)();Object(g.useEffect)((function(){var e=ha(a,"ranges");e&&m(e)}),[a]);var j=function(e){var t=Object(b.a)({},l);t=A.a.set(t,"panels.ranges",e),u(JSON.stringify(t))},y=Object(g.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i({type:"SET_PREFERENCES",data:{type:"ranges",values:e}}),t&&r.success("ranges preferences saved successfully")}),[r,i]);Object(g.useImperativeHandle)(t,(function(){return{saveSetting:function(){O.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var x=[{id:1,label:"From :",checkController:"showFrom",formatController:"fromFormat",defaultFormat:"0.00"},{id:2,label:"To :",checkController:"showTo",formatController:"toFormat",defaultFormat:"0.00"},{id:3,label:"Absolute :",checkController:"showAbsolute",formatController:"absoluteFormat",defaultFormat:"0.00"},{id:4,label:"Relative :",checkController:"showRelative",formatController:"relativeFormat",defaultFormat:"00.00"}],k=function(){var e=Object(D.a)(C.a.mark((function e(t){var n,a,i,r,o,c,l,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target,a=new FormData(n),i={},r=Object(w.a)(a.entries());try{for(r.s();!(o=r.n()).done;)c=o.value,l=c[0].split("-").join("."),u=["true","false"].includes(c[1])?"true"===c[1]:c[1],i=A.a.set(i,l,u)}catch(s){r.e(s)}finally{r.f()}y(i,!0),j(i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=Object(g.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join(".");if(f){var i=A.a.get(f,a);return i||null}var r=t.length-1;return ma[t[r]]}),[f]);return h.a.createElement("div",{style:Bu.container},h.a.createElement("form",{onSubmit:k,ref:O},n&&n.map((function(e){return h.a.createElement("div",{key:e,style:Bu.groupContainer},h.a.createElement("p",{style:Bu.header},h.a.createElement(Lr.a,{mf:e})),x.map((function(t){return h.a.createElement(Ul,{key:t.id,label:t.label,checked:E(e,t.checkController),format:E(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e})})))}))))})),Yu=Object(g.memo)(Vu);function Xu(e,t){return A.a.get(e,t,!1)}var Gu=function(e){var t=e.rowSpanTags,n=e.value,a=e.onHoverRange,i=e.format;return h.a.createElement("td",Object.assign({},t,a),Ll(n,i))};function Uu(){var e=Object(f.a)(["\n    position: relative;\n    padding: 0px 5px;\n    border: 0.55px solid #cacaca;\n    font-size: 14px;\n    width: ","px;\n    margin: 0;\n    height: 100%;\n    background: url(../img/br_down.png) no-repeat right white;\n    -webkit-appearance: none;\n    background-position-x: ","px;\n    background-size: 10px 10px;\n    border-radius: 5px;\n    margin: 0px 5px;\n    :focus,\n    input:focus {\n      outline: none;\n    }\n  "]);return Uu=function(){return e},e}var Wu=function(e){var t=e.data,n=e.style,a=e.onChange,i=e.value,r=Object(g.useCallback)((function(e){a(e.target.value)}),[a]),o=Object(m.b)(Uu(),n.width?n.width-5:95,n.width?n.width-18:77);return Object(m.c)("select",{css:[o,n],onChange:r,value:i},t.map((function(e){return Object(m.c)("option",{key:"".concat(e.key),value:e.value},e.label)})))};Wu.defaultProps={onChange:function(){return null}};var Zu=Wu,Ku=n(211),Ju=function(e){var t=e.onClick,n=Object(k.a)(e,["onClick"]);return Object(m.c)(g.Fragment,null,Object(m.c)("button",Object.assign({type:"button",onClick:t},n)))},qu=Object(g.memo)((function(){var e=Object(Ku.f)(),t=e.handleSubmit,n=e.isSubmitting;return Object(m.c)(Ju,{onClick:t,disabled:n},"Save")})),$u=Object(g.memo)((function(e){var t=e.onCancel,n=Object(Ku.f)().isSubmitting;return Object(m.c)(Ju,{onClick:t,disabled:n},"Cancel")})),Qu=function(e,t){var n={};return e.newSignalDelta?(e.newSignalDelta<t.from||e.newSignalDelta>t.to)&&(n.newSignalDelta=" ".concat(t.from.toFixed(5)," ppm out of the range")):n.newSignalDelta="required",e.newCouplingCoupling&&"number"!==typeof e.newCouplingCoupling&&(n.newCouplingCoupling="Must be a number"),e.selectedSignalCouplings?0===e.selectedSignalCouplings.length&&(n.selectedSignalCouplings="There has to be at least one coupling in signal"):n.selectedSignalCouplings="Invalid signal without couplings",n},es=function(e){var t=e.style,n=Object(k.a)(e,["style"]),a=Object(Ku.e)(n)[1];return Object(m.c)("div",null,a.error?Object(m.c)("p",{style:Object(b.a)({color:"red",margin:"0.5px"},t)},a.error):null)},ts=function(e){var t=e.onFocus,n=e.onBlur,a=Object(k.a)(e,["onFocus","onBlur"]),i=Object(Ku.e)(a),r=Object(p.a)(i,1)[0];return Object(m.c)("div",null,Object(m.c)("input",Object.assign({},r,a,{onFocus:function(){return t(r.name)},onBlur:function(){return n(r.name)}})),Object(m.c)(es,a))};ts.defaultProps={onFocus:function(){return null},onBlur:function(){return null}};var ns=ts;function as(){var e=Object(f.a)(["\n  text-align: center;\n\n  p {\n    margin-top: 5px;\n    // margin-bottom: 10px;\n  }\n\n  .infoText {\n    margin-top: 3px;\n    margin-bottom: 10px;\n    font-size: 11px;\n  }\n\n  input {\n    background-color: transparent;\n    border: 0.5px solid #dedede;\n    width: 50%;\n    text-align: center;\n  }\n\n  .bt {\n    width: 20px;\n    height: 20px;\n    padding: 2px;\n    background-color: white;\n  }\n\n  .bt.active {\n    background-color: gray;\n    color: white;\n  }\n\n  .addSignalButton {\n    margin-top: 15px;\n    margin-top: 20px;\n    background-color: transparent;\n    border: 0.5px solid #dedede;\n  }\n"]);return as=function(){return e},e}var is=Object(m.b)(as()),rs=Object(g.memo)((function(){var e=Object(Ku.f)(),t=e.values,n=e.setFieldValue,a=e.errors,i=Object(g.useState)(!1),r=Object(p.a)(i,2),o=r[0],c=r[1],l=Object(g.useState)(null),u=Object(p.a)(l,2),s=u[0],d=u[1];Object(g.useEffect)((function(){var e=la.subscribe("brushEnd",(function(e){s&&n(s,e.range[0]+e.range[1]/2)}));return function(){e()}}),[s,n]);var f=Object(g.useCallback)((function(){var e={multiplicity:"m",kind:"signal",delta:Number(t.newSignalDelta)},a=t.signals.slice().concat(e);n("signals",a),n("selectedSignalIndex",a.length-1)}),[n,t.newSignalDelta,t.signals]);return Object(g.useEffect)((function(){a.newSignalDelta?c(!0):c(!1)}),[a.newSignalDelta,t.signals]),Object(m.c)("div",{css:is},Object(m.c)("div",null,Object(m.c)("p",null,"Add delta value of new signal (ppm): "),Object(m.c)("p",{className:"infoText"},"Focus on the input field and then Press Shift + Left mouse button to to select new range."),Object(m.c)(ns,{name:"newSignalDelta",type:"number",placeholder:"\u0394".concat(" (ppm)"),onFocus:function(e){return d(e)}})),Object(m.c)("div",null,Object(m.c)(Ju,{className:"addSignalButton",onClick:f,disabled:o,style:{color:o?"grey":"blue"}},"Add Signal")))})),os=function(e){var t=e.values,n=Object(k.a)(e,["values"]),a=Object(Ku.e)(n),i=Object(p.a)(a,1)[0];return t&&t.length>0?Object(m.c)("div",null,Object(m.c)(Ku.a,Object.assign({as:"select"},i,n),t.map((function(e,t){return Object(m.c)("option",{key:t},e)}))),Object(m.c)(es,n)):null};os.protoTypes={valuePath:ba.a.instanceOf(Array).isRequired,valueSelectionTemplate:ba.a.func};var cs=os;function ls(){var e=Object(f.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  height: 100%;\n\n  th,\n  td {\n    text-align: center;\n    margin: 0;\n    padding: 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    button {\n      background-color: transparent;\n      border: none;\n    }\n    input {\n      background-color: transparent;\n      border: 0.5px solid #dedede;\n      height: 100%;\n      width: 100%;\n      text-align: center;\n    }\n    .selectBox {\n      background-color: transparent;\n      border: 0.5px solid #dedede;\n      height: 100%;\n      width: 100%;\n      text-align: center;\n    }\n  }\n\n  tr {\n    :last-child {\n      border-top: 3px solid #dedede;\n    }\n  }\n"]);return ls=function(){return e},e}var us=Object(m.b)(ls()),ss=Object(g.memo)((function(e){var t=e.push,n=e.remove,a=e.onAddCoupling,i=e.onDeleteCoupling,r=e.onEditCoupling,o=Object(Ku.f)(),c=o.values,l=o.setFieldValue,u=o.getFieldMeta,s=o.setFieldTouched,d=Object(g.useState)(null),f=Object(p.a)(d,2),b=f[0],h=f[1],v=Mt(),O=v.data,j=v.activeSpectrum;Object(g.useEffect)((function(){var e=la.subscribe("brushEnd",(function(e){var t=O[j.index].info.frequencyOffset;if(b&&t){var n=Math.abs(e.range[0]-e.range[1])*t/Math.pow(10,6);l(b,n)}}));return function(){e()}}),[b,j.index,O,l]);var y=u("newCouplingMultiplicity"),x=u("newCouplingCoupling"),k=Object(g.useCallback)((function(e,t){return e.error||t.error||!e.touched&&!t.touched||Qa(e.value)&&0===t.value.length}),[]),E=Object(g.useCallback)((function(e,t){s(e,!1),s(t,!1)}),[s]);return Object(g.useEffect)((function(){l("newCouplingMultiplicity",Ka[0].label),s("newCouplingMultiplicity",!0)}),[s,l]),Object(m.c)("table",{css:us},Object(m.c)("tbody",null,Object(m.c)("tr",null,Object(m.c)("th",null,"#"),Object(m.c)("th",null,"Multiplicity"),Object(m.c)("th",null,"J (Hz)"),Object(m.c)("th",null,""),Object(m.c)("th",null,"")),c.selectedSignalCouplings&&c.selectedSignalCouplings.length>0?c.selectedSignalCouplings.map((function(e,t){return Object(m.c)("tr",{key:"editCouplings".concat(t)},Object(m.c)("td",null,t+1),Object(m.c)("td",null,Object(m.c)(cs,{className:"selectBox",name:"selectedSignalCouplings.".concat(t,".multiplicity"),values:Ka.map((function(e){return e.label}))})),Object(m.c)("td",null,Qa(c.selectedSignalCouplings[t].multiplicity)?Object(m.c)(ns,{name:"selectedSignalCouplings.".concat(t,".coupling"),type:"number",placeholder:"J (Hz)",disabled:!1,onFocus:function(e){return h(e)}}):Object(m.c)(ns,{name:"selectedSignalCouplings.".concat(t,".coupling"),type:"number",placeholder:"none",disabled:!0})),Object(m.c)("td",null,Object(m.c)(Ju,{onClick:function(){r(t,{multiplicity:c.selectedSignalCouplings[t].multiplicity,coupling:c.selectedSignalCouplings[t].coupling}),E("selectedSignalCouplings.".concat(t,".multiplicity"),"selectedSignalCouplings.".concat(t,".coupling"))},disabled:k(u("selectedSignalCouplings.".concat(t,".multiplicity")),u("selectedSignalCouplings.".concat(t,".coupling")))},Object(m.c)(jn.b,{title:"Confirm Coupling Edition"}))),Object(m.c)("td",null,Object(m.c)(Ju,{onClick:function(){n(t),i(t,{multiplicity:c.selectedSignalCouplings[t].multiplicity,coupling:c.selectedSignalCouplings[t].coupling})}},Object(m.c)(jn.t,{title:"Delete Coupling"}))))})):null,Object(m.c)("tr",null,Object(m.c)("td",{colSpan:5},c.selectedSignalCouplings&&0!==c.selectedSignalCouplings.length?null:Object(m.c)("p",{style:{color:"red"}},"There must be at least one coupling!"))),Object(m.c)("tr",null,Object(m.c)("td",null,""),Object(m.c)("td",null,Object(m.c)(cs,{className:"selectBox",name:"newCouplingMultiplicity",values:Ka.map((function(e){return e.label}))})),Object(m.c)("td",null,Qa(c.newCouplingMultiplicity)?Object(m.c)(ns,{name:"newCouplingCoupling",type:"number",placeholder:"J (Hz)",disabled:!1,onFocus:function(e){return h(e)}}):Object(m.c)(ns,{name:"newCouplingCoupling",type:"number",placeholder:"none",disabled:!0})),Object(m.c)("td",{colSpan:2},Object(m.c)(Ju,{onClick:function(){var e={multiplicity:c.newCouplingMultiplicity,coupling:c.newCouplingCoupling};t(e),a(e),l("newCouplingMultiplicity",Ka[0].label),l("newCouplingCoupling","")},disabled:k(y,x)},Object(m.c)(jn.x,{title:"Add New Coupling"}))))))}));function ds(){var e=Object(f.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  height: 100%;\n\n  margin: 0;\n  padding: 0.4rem;\n  text-align: center;\n\n  .deleteSignalButton {\n    background-color: transparent;\n    border: 1px solid #dedede;\n    margin-top: 10px;\n    color: red;\n  }\n"]);return ds=function(){return e},e}var fs=Object(m.b)(ds()),bs=Object(g.memo)((function(){var e=Object(Ku.f)(),t=e.values,n=e.setFieldValue;Object(g.useEffect)((function(){var e=t.signals[t.selectedSignalIndex];if(e&&e.multiplicity){var a,i=0,r=[];e.multiplicity.split("").forEach((function(t){Qa(t)?(a=Object(b.a)({},e.j[i]),i++):a={multiplicity:t,coupling:""},a.multiplicity=$a(a.multiplicity),r.push(a)})),n("selectedSignalCouplings",r)}}),[n,t.selectedSignalIndex,t.signals]);var a=Object(g.useCallback)((function(e){Qa(e.multiplicity)||(e.coupling=""),e.multiplicity=$a(e.multiplicity);var a=t.signals.slice(),i=Object(b.a)({},a[t.selectedSignalIndex]);!i.j&&Qa(e.multiplicity)&&(i.j=[]),Qa(e.multiplicity)&&i.j.push(e),i.multiplicity=i.multiplicity.concat(e.multiplicity),a[t.selectedSignalIndex]=i,n("signals",a)}),[n,t.selectedSignalIndex,t.signals]),i=Object(g.useCallback)((function(e,a){Qa(a.multiplicity)||(a.coupling=""),a.multiplicity=$a(a.multiplicity);var i=t.signals.slice(),r=Object(b.a)({},i[t.selectedSignalIndex]);!r.j&&Qa(a.multiplicity)&&(r.j=[]);for(var o=0,c=r.multiplicity.split(""),l=0;l<c.length;l++){if(l===e){Qa(a.multiplicity)?r.j[o]=a:r.j&&r.j.splice(o,1),r.j&&0===r.j.length&&delete r.j;break}Qa(c[l])&&o++}r.multiplicity=r.multiplicity.substr(0,e)+a.multiplicity+r.multiplicity.substr(e+1),i[t.selectedSignalIndex]=r,n("signals",i)}),[n,t.selectedSignalIndex,t.signals]),r=Object(g.useCallback)((function(e,a){a.multiplicity=$a(a.multiplicity);for(var i=t.signals.slice(),r=Object(b.a)({},i[t.selectedSignalIndex]),o=0,c=r.multiplicity.split(""),l=0;l<c.length;l++){if(l===e){Qa(a.multiplicity)&&(r.j.splice(o,1),0===r.j.length&&delete r.j);break}Qa(c[l])&&o++}r.multiplicity=r.multiplicity.substr(0,e)+r.multiplicity.substr(e+1),i[t.selectedSignalIndex]=r,n("signals",i)}),[n,t.selectedSignalIndex,t.signals]);return Object(m.c)("div",{css:fs},Object(m.c)(Ku.b,{name:"selectedSignalCouplings",render:function(e){var t=e.push,n=e.remove;return Object(m.c)("div",null,Object(m.c)(ss,{push:t,remove:n,onAddCoupling:a,onDeleteCoupling:r,onEditCoupling:i}))}}))})),ps=Object(g.memo)((function(){var e=Object(Ku.f)(),t=e.values,n=e.setFieldValue,a=e.getFieldMeta,i=Object(g.useCallback)((function(e){var t=e.tabid;void 0!==t&&"number"===typeof t&&n("selectedSignalIndex",t)}),[n]),r=Object(g.useCallback)((function(){var e=t.signals.filter((function(e,n){return n!==t.selectedSignalIndex}));n("signals",e),n("selectedSignalIndex",e.length-1)}),[n,t.selectedSignalIndex,t.signals]),o=Object(g.useMemo)((function(){return t.signals.map((function(e,t){return Object(m.c)("div",{key:"signalForm".concat(t),tabid:t,tablabel:"\u0394".concat(": ",e.delta.toFixed(5)," (").concat(e.multiplicity,")")},Object(m.c)(bs,null))})).concat(Object(m.c)("div",{tablabel:"+",tabid:"addSignalTab",candelete:"false",key:"addSignalTab"},Object(m.c)(rs,null)))}),[t.signals]),c=a("signals");return Object(m.c)("div",null,c.error?Object(m.c)("p",{style:{color:"red",textAlign:"center"}},c.error):null,Object(m.c)(vo,{defaultTabID:t.selectedSignalIndex,onClick:i,canDelete:!0,onDelete:r},o))}));function ms(){var e=Object(f.a)(["\n  text-align: center;\n  button {\n    background-color: transparent;\n    border: 1px solid #dedede;\n    margin-top: 40px;\n  }\n"]);return ms=function(){return e},e}var gs=Object(m.b)(ms()),hs=function(e){var t=e.rangeData,n=e.handleOnClose,a=e.handleOnSave,i=Object(g.useMemo)((function(){var e=t.signal[0];if(e&&e.multiplicity){var n,a=0,i=[];return e.multiplicity.split("").forEach((function(t){Qa(t)?(n=Object(b.a)({},e.j[a]),a++):n={multiplicity:t,coupling:""},i.push(n)})),i}}),[t.signal]);return Object(m.c)(Ku.d,{initialValues:{from:t.from,to:t.to,signals:t.signal.slice(),newSignalDelta:(t.from+t.to)/2,selectedSignalIndex:0,selectedSignalCouplings:i,newCouplingMultiplicity:"",newCouplingCoupling:""},validate:function(e){return Qu(e,t)},onSubmit:function(e,t){var n=t.setSubmitting;a(e),n(!1)}},(function(){return Object(m.c)(Ku.c,null,Object(m.c)(ps,null),Object(m.c)("div",{css:gs},Object(m.c)(qu,null),Object(m.c)($u,{onCancel:n})))}))};function vs(){var e=Object(f.a)(["\n  overflow: auto;\n  width: 600px;\n  height: 500px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n    .zoom-button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n      margin-right: 10px;\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"]);return vs=function(){return e},e}var Os=Object(m.b)(vs()),js=function(e){var t=e.onSave,n=e.onClose,a=e.onZoom,i=e.range,r=Rt(),o=Object(g.useCallback)((function(){a(i)}),[a,i]);Object(g.useEffect)((function(){o()}),[r,o,i]);var c=Object(g.useCallback)((function(){n()}),[n]),l=Object(g.useCallback)(function(){var e=Object(D.a)(C.a.mark((function e(n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.signal=n.signals.slice(),e.next=3,t(i);case 3:c();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,t,i]);return Object(m.c)("div",{css:Os},Object(m.c)("div",{className:"header"},Object(m.c)("span",null,"Range Information and Editing"),Object(m.c)("button",{type:"button",onClick:o,className:"zoom-button"},Object(m.c)(jn.B,{title:"Set to default view on range in spectrum"})),Object(m.c)("button",{type:"button",onClick:c,title:"Close"},Object(m.c)(jn.D,null))),i&&Object(m.c)(hs,{rangeData:i,handleOnClose:c,handleOnSave:l}))};js.defaultProps={onSave:function(){return null},onClose:function(){return null},onZoom:function(){return null}};var ys=js,xs={marginLeft:2,marginRight:2,border:"none",height:"20px"},ks=function(e){var t=e.rowData,n=e.onHoverSignal,a=e.onUnlink,i=e.rowSpanTags,r=Rt(),o=bn(),c=Object(v.d)(),l=Object(g.useCallback)((function(){var e=Math.abs(t.from-t.to)/2;r({type:"SET_X_DOMAIN",xDomain:[t.from-e,t.to+e]})}),[r,t.from,t.to]),u=Object(g.useCallback)((function(e){a(e),r({type:"DELETE_RANGE",rangeID:t.id})}),[r,a,t]),s=Object(g.useCallback)((function(e){var n=A.a.cloneDeep(t);n.signal[n.tableMetaInfo.signalIndex].kind=e,r({type:"CHANGE_RANGE_DATA",data:n})}),[r,t]),d=Object(g.useCallback)((function(e){var t;a(),0===e.signal.length&&((t=e).signal.push({multiplicity:"m",kind:"signal",delta:(t.to+t.from)/2}),c.info('There must be at least one signal within a range. Default signal with "m" was therefore added!')),r({type:"CHANGE_RANGE_DATA",data:e})}),[c,r,a]),f=Object(g.useCallback)((function(){o.close()}),[o]),b=Object(g.useCallback)((function(){r({type:"RESET_SELECTED_TOOL"}),o.show(h.a.createElement(ys,{onClose:f,onSave:d,onZoom:l,range:t}),{position:v.b.CENTER_RIGHT,transition:v.c.SCALE,isBackgroundBlur:!1})}),[f,r,o,t,d,l]);return h.a.createElement(g.Fragment,null,h.a.createElement("td",n,h.a.createElement(Zu,{onChange:s,data:F,value:t.tableMetaInfo.signal.kind,style:xs})),h.a.createElement("td",i,h.a.createElement("button",{type:"button",className:"delete-button",onClick:u},h.a.createElement(jn.z,null)),h.a.createElement("button",{type:"button",className:"zoom-button",onClick:l},h.a.createElement(jn.B,{title:"Zoom to range in spectrum"})),h.a.createElement("button",{type:"button",className:"edit-button",onClick:b},h.a.createElement(jn.i,{color:"blue"}))))},Es=function(e){var t=e.rowData,n=e.onHoverSignal,a=A.a.get(t,"tableMetaInfo.signal.j");return h.a.createElement("td",n,a&&a.map((function(e){return e.coupling.toFixed(1)})).join(","))},Cs={color:"red",fontWeight:"bold"},ws=Object(g.memo)((function(e){var t=e.rowData,n=e.assignment,a=e.highlight,i=e.onUnlinkVisibilityChange,r=e.unlinkVisibility,o=e.onLink,c=e.onUnlink,l=e.rowSpanTags,u=e.onHover,s=e.highlightData,d=Object(g.useMemo)((function(){return A.a.get(t,"diaID",[])}),[t]),f=Object(g.useCallback)((function(e){i(e)}),[i]),b=Object(g.useMemo)((function(){return n.isActive||n.isOnHover||a.isActive&&!s.highlight.highlighted.find((function(e){var t=e.split("___");return t[0]===n.id&&t.length>1}))?{color:"red",fontWeight:"bold"}:{color:"black",fontWeight:"normal"}}),[n.id,n.isActive,n.isOnHover,a.isActive,s.highlight.highlighted]);return h.a.createElement("td",Object.assign({},l,u,{onClick:function(e){return o(e,n)}}),void 0!==t.pubIntegral&&t.pubIntegral>0?t.diaID&&t.diaID.length>0?h.a.createElement("div",{onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)}},t.pubIntegral," "," ( ",h.a.createElement("span",{style:b},d.length)," ) ",h.a.createElement("sup",null,h.a.createElement("button",{type:"button",style:{visibility:r?"visible":"hidden",padding:0,margin:0},onClick:function(e){return c(e,!0)}},h.a.createElement(jn.u,{color:"red"})))):n.isActive?h.a.createElement("div",null,"".concat(t.pubIntegral," ("),h.a.createElement("span",{style:Cs},"0"),")"):t.pubIntegral:n.isActive?h.a.createElement("div",null,"0 (",h.a.createElement("span",{style:Cs},"0"),")"):"")}));ws.defaultProps={onHover:function(){return null},onUnlinkVisibilityChange:function(){return null},onLink:function(){return null},onUnlink:function(){return null}};var Ds=ws,Ss=Object(g.memo)((function(e){var t=e.value,n=e.rowSpanTags,a=e.onHoverRange,i=e.format;return h.a.createElement("td",Object.assign({},n,a),Ll(t,i))})),Ts=function(e){var t=e.rowData,n=e.rowSpanTags,a=e.onHoverRange,i=e.SignalKindsToConsiderInIntegralsSum,r=e.format,o=Object(g.useMemo)((function(){var e=V(t,i),n=Ll(t.integral,r);return e?n:"[ ".concat(n," ]")}),[i,r,t]);return h.a.createElement("td",Object.assign({},n,a),o)},Is=Object(g.memo)((function(e){var t=e.rowData,n=e.onHover,a=e.assignment,i=e.highlight,r=e.onUnlinkVisibilityChange,o=e.unlinkVisibility,c=e.onLink,l=e.onUnlink,u=Object(g.useMemo)((function(){return A.a.get(t,"tableMetaInfo.signal.diaID",[])}),[t]),s=Object(g.useMemo)((function(){return a.isActive||i.isActive?{color:"red",fontWeight:"bold"}:null}),[a.isActive,i.isActive]),d=Object(g.useCallback)((function(e){r(e)}),[r]);return h.a.createElement("td",Object.assign({},n,{onClick:function(e){return c(e,a)}},{style:s}),u&&u.length>0?h.a.createElement("div",{onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)}},u.length," ",h.a.createElement("sup",null,h.a.createElement("button",{type:"button",style:{visibility:o?"visible":"hidden",padding:0,margin:0},onClick:function(e){return l(e,!1)}},h.a.createElement(jn.u,{color:"red"})))):a.isActive?"0":"")}));Is.defaultProps={onHover:function(){return null},onUnlinkVisibilityChange:function(){return null},onLink:function(){return null},onUnlink:function(){return null}};var As=Is;function Ms(e){return function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=A.a.get(e,n,"00.000");return Ll(t,r,a,i)}}var _s=function(e){var t=e.rowData,n=e.onHoverSignal,a=e.preferences,i=t.tableMetaInfo.signal,r=Ms(a);return i?h.a.createElement("td",n,qa(i.multiplicity,["m"])?i.delta.toFixed(3):"".concat(r(t.from,"fromFormat")," - ").concat(r(t.to,"toFormat"))):h.a.createElement("td",null,"")};function Ps(){var e=Object(f.a)(["\n  background-color: #f5f5dc;\n"]);return Ps=function(){return e},e}function Rs(){var e=Object(f.a)(["\n  background-color: #ff6f0057;\n"]);return Rs=function(){return e},e}var Ls=Object(m.b)(Rs()),Fs=Object(m.b)(Ps()),Ns=function(e){var t=e.rowData,n=e.onUnlink,a=e.onContextMenu,i=e.preferences,r=Za(t.id),o=Object(va.b)([r.id].concat(r.assigned.x||[])),c=Za(t.tableMetaInfo.id),l=Object(va.b)([c.id].concat(c.assigned.x||[])),u=Object(va.c)(),s=Object(g.useState)(!1),d=Object(p.a)(s,2),f=d[0],b=d[1],h=Object(g.useState)(!1),v=Object(p.a)(h,2),O=v[0],j=v[1],y=Ms(i),x=Object(g.useMemo)((function(){return{rowSpan:t.tableMetaInfo.rowSpan,style:A.a.get(t.tableMetaInfo,"hide",!1)?{display:"none"}:null}}),[t.tableMetaInfo]),k=Object(g.useCallback)((function(e,a){e&&e.stopPropagation(),n(t,a,A.a.get(t,"tableMetaInfo.signalIndex",void 0)),void 0!==a?a?(b(!1),r.removeAll("x")):(j(!1),c.removeAll("x")):(b(!1),j(!1))}),[r,c,n,t]),E=Object(g.useCallback)((function(e,t){t.onClick(e,"x")}),[]),C=Object(g.useMemo)((function(){return{onMouseEnter:function(){r.onMouseEnter("x"),o.show()},onMouseLeave:function(){r.onMouseLeave("x"),o.hide()}}}),[r,o]),w=Object(g.useMemo)((function(){return{onMouseEnter:function(){c.onMouseEnter("x"),l.show()},onMouseLeave:function(){c.onMouseLeave("x"),l.hide()}}}),[c,l]),D=Object(g.useMemo)((function(){return o.isActive||r.isActive?Ls:A.a.get(t,"tableMetaInfo.isConstantlyHighlighted",!1)?Fs:null}),[r.isActive,o.isActive,t]);return Object(m.c)("tr",Object.assign({onContextMenu:function(e){return a(e,t)},css:D},o.onHover),Object(m.c)("td",Object.assign({},x,C),t.tableMetaInfo.rowIndex+1),Xu(i,"showFrom")&&Object(m.c)(Ss,{value:t.from,rowSpanTags:x,onHoverRange:C,format:y("showFrom")}),Xu(i,"showTo")&&Object(m.c)(Ss,{value:t.to,rowSpanTags:x,onHoverRange:C,format:y("toFormat")}),Object(m.c)(_s,{rowData:t,onHoverSignal:w,preferences:i}),Xu(i,"showRelative")&&Object(m.c)(Ts,{rowData:t,rowSpanTags:x,onHoverRange:C,SignalKindsToConsiderInIntegralsSum:N,format:y("relativeFormat")}),Xu(i,"showAbsolute")&&Object(m.c)(Gu,{value:t.absolute,rowSpanTags:x,onHoverRange:C,format:y("absoluteFormat")}),Object(m.c)("td",w,A.a.get(t,"tableMetaInfo.signal.multiplicity","")),Object(m.c)(Es,{rowData:t,onHoverSignal:w}),Object(m.c)(As,{rowData:t,assignment:c,highlight:l,onHover:w,unlinkVisibility:O,onUnlinkVisibilityChange:function(e){return j(e)},onLink:E,onUnlink:k}),Object(m.c)(Ds,{rowData:t,assignment:r,highlight:o,onHover:C,unlinkVisibility:f,onUnlinkVisibilityChange:function(e){return b(e)},onLink:E,onUnlink:k,rowSpanTags:x,highlightData:u,HighlightSignalConcatenation:"___"}),Object(m.c)(ks,{rowData:t,onHoverSignal:w,onHoverRange:C,rowSpanTags:x,onUnlink:k}))},zs=function(e){return Object(g.useMemo)((function(){var t=[];return e.forEach((function(e,n){1===e.signal.length?t.push(Object(b.a)(Object(b.a)({},e),{},{tableMetaInfo:Object(b.a)(Object(b.a)({},e.tableMetaInfo),{},{signal:e.signal[0],rowIndex:n,signalIndex:0,id:"".concat(e.id).concat("___",0)})})):e.signal.length>1&&e.signal.forEach((function(a,i){var r=!1,o=null;i<e.signal.length-1&&0===i?o=e.signal.length:r=!0,t.push(Object(b.a)(Object(b.a)({},e),{},{tableMetaInfo:Object(b.a)(Object(b.a)({},e.tableMetaInfo),{},{signal:a,rowSpan:o,hide:r,rowIndex:n,signalIndex:i,id:"".concat(e.id).concat("___").concat(i)})}))}))})),t}),[e])};function Hs(){var e=Object(f.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  height: 100%;\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n  th,\n  td {\n    white-space: nowrap;\n    text-align: center;\n    margin: 0;\n    padding: 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n    }\n  }\n"]);return Hs=function(){return e},e}var Bs=Object(m.b)(Hs()),Vs=function(e){var t=e.tableData,n=e.onChangeKind,a=e.onDelete,i=e.onUnlink,r=e.onZoom,o=e.onEdit,c=e.context,l=e.preferences,u=e.element,s=Object(g.useRef)(),d=zs(t),f=function(e){return A.a.get(l,e,!1)},b=Object(g.useCallback)((function(e,t){e.preventDefault(),s.current.handleContextMenu(e,t)}),[s]);return Object(m.c)("div",null,Object(m.c)("table",{css:Bs},Object(m.c)("tbody",null,Object(m.c)("tr",null,Object(m.c)("th",null,"#"),f("showFrom")?Object(m.c)("th",null,"From"):null,f("showTo")?Object(m.c)("th",null,"To"):null,Object(m.c)("th",null,"\u03b4 (ppm)"),f("showRelative")?Object(m.c)("th",null,"Rel. ",u):null,f("showAbsolute")?Object(m.c)("th",null,"Absolute"):null,Object(m.c)("th",null,"Mult."),Object(m.c)("th",null,"J (Hz)"),Object(m.c)("th",null,Object(m.c)(jn.s,{style:{fontSize:10}})),Object(m.c)("th",null,"\u03a3"),Object(m.c)("th",null,"Kind"),Object(m.c)("th",null,"")),d&&d.map((function(e,t){return Object(m.c)(Ns,{key:"rangesTableRow".concat(t),rowData:d[t],onChangeKind:n,onDelete:a,onUnlink:i,onZoom:r,onEdit:o,onContextMenu:function(e,t){return b(e,t)},preferences:l})})))),Object(m.c)(Tl,{ref:s,context:c}))},Ys={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},sumButton:{borderRadius:"5px",marginTop:"3px",color:"white",backgroundColor:"#6d6d6d",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},removeAssignmentsButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"2px",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},setShowMultiplicityTreesButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"5px",color:"black",backgroundColor:"transparent",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},button:{backgroundColor:"transparent",border:"none"}},Xs=Pu(Object(g.memo)((function(e){var t=e.ranges,n=e.x,a=e.y,i=e.xDomain,r=e.preferences,o=e.activeTab,c=e.molecules,l=e.showMultiplicityTrees,u=e.nucleus,s=Object(g.useState)(!1),d=Object(p.a)(s,2),f=d[0],m=d[1],O=Wa(),j=Rt(),y=Object(v.d)(),x=Object(g.useState)(!1),k=Object(p.a)(x,2),E=k[0],C=k[1],w=Object(g.useRef)(),D=Object(g.useMemo)((function(){var e=function(e,t){return e*=1e4,(t*=1e4)>=1e4*i[0]&&e<=1e4*i[1]||e<=1e4*i[0]&&t>=1e4*i[1]};return t.values?(f?function(t){return t.filter((function(t){return e(t.from,t.to)}))}(t.values):t.values).map((function(t){return Object(b.a)(Object(b.a)({},t),{},{tableMetaInfo:{isConstantlyHighlighted:e(t.from,t.to)}})})):[]}),[f,t.values,i]),S=Object(g.useCallback)((function(e,t,n){void 0!==t?!0===t?O.dispatch({type:"REMOVE_ALL",payload:{id:e.id,axis:"x"}}):void 0!==n&&O.dispatch({type:"REMOVE_ALL",payload:{id:"".concat(e.id).concat("___").concat(n),axis:"x"}}):(O.dispatch({type:"REMOVE_ALL",payload:{id:e.id,axis:"x"}}),e.signal.forEach((function(t,n){return O.dispatch({type:"REMOVE_ALL",payload:{id:"".concat(e.id).concat("___").concat(n),axis:"x"}})}))),e=A.a.cloneDeep(e),B(e,t,n),j({type:"CHANGE_RANGE_DATA",data:e})}),[O,j]),T=Object(g.useCallback)((function(e){if(n&&a){var t=e.from,i=e.to,r=Object(L.g)(n,{from:t,to:i}),o=r.fromIndex,c=r.toIndex,l=Object(b.a)({x:n.slice(o,c),y:a.slice(o,c)},e);lu(JSON.stringify(l,void 0,2))?y.show("Data copied to clipboard"):y.error("copy to clipboard failed")}}),[n,a,y]),I=Object(g.useMemo)((function(){return A.a.get(r,"panels.ranges.[".concat(o,"]"))||ma}),[o,r]),M=Object(g.useMemo)((function(){return[{label:"Copy to clipboard",onClick:T}]}),[T]),_=Object(g.useCallback)((function(){m(!f)}),[f]),P=Object(g.useCallback)((function(){C(!E)}),[E]),R=Object(g.useCallback)((function(){w.current.saveSetting(),C(!1)}),[]);return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{style:Ys.container},!E&&h.a.createElement(Hu,{ranges:t,activeTab:o,molecules:c,onUnlink:S,onFilterActivated:_,onSettingClick:P,isFilterActive:f,filterCounter:D.length,showMultiplicityTrees:l}),E&&h.a.createElement(wl,{onSave:R,onClose:P}),h.a.createElement(Qc.a,{isFlipped:E,infinite:!0,containerStyle:{height:"100%"}},h.a.createElement("div",null,D&&D.length>0?h.a.createElement(Vs,{tableData:D,onUnlink:S,context:M,preferences:I,element:o&&o.replace(/[0-9]/g,"")}):h.a.createElement(Fl,null)),h.a.createElement(Yu,{ranges:t,ref:w,nucleus:u,preferences:r}))))})));var Gs=function(e,t){var n=function(n){var a=Mt(),i=a.data,r=a.activeSpectrum,o=a.preferences,c=a.activeTab,l=a.selectedTool,u=a.xDomain,s=a.yDomain,d=a.tabActiveSpectrum,f=a.molecules,p=a.showMultiplicityTrees,m=a.displayerMode,v=Object(g.useMemo)((function(){if(i&&r&&r.id){var e=i.find((function(e){return e.id===r.id}));return void 0!==t&&t.spectrum?1===t.spectrum.length?e[t.spectrum[0]]:t.spectrum.reduce((function(t,n){return Object(b.a)(Object(b.a)({},t),{},Object(P.a)({},n,e[n]))}),{}):e}}),[r,i]),O=Object(g.useMemo)((function(){return d&&Object.keys(d).length>0?Object.keys(d):null}),[d]),j=n.forwardedRef,y=Object(k.a)(n,["forwardedRef"]);return h.a.createElement(e,Object.assign({},y,{data:i,spectrum:v,nucleus:O,activeSpectrum:r,preferences:o,activeTab:c,selectedTool:l,xDomain:u,yDomain:s,tabActiveSpectrum:d,molecules:f,showMultiplicityTrees:p,displayerMode:m,ref:j}))};return Object(g.memo)(h.a.forwardRef((function(e,t){return h.a.createElement(n,Object.assign({},e,{forwardedRef:t}))})))},Us=function(e){return function(t){return t.reduce((function(t,n){var a=n.info[e];return t[a]=(t[a]||[]).concat(n),t}),{})}};function Ws(){var e=Object(f.a)(["\n  position: fixed;\n  z-index: 999999999;\n  display: flex;\n  flex-direction: row-reverse;\n  border-radius: 4px;\n  background-color: white;\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 0px 1px,\n    rgba(0, 0, 0, 0.15) 0px 8px 16px;\n\n  .sketch-picker {\n    border-radius: none !important;\n    box-shadow: none !important;\n  }\n\n  .sketch-picker > div:first-of-type {\n    // padding-bottom: 40% !important;\n  }\n"]);return Ws=function(){return e},e}var Zs=Object(m.b)(Ws()),Ks=function(e){var t=e.colorPickerPosition,n=e.selectedSpectrumData,a=e.onColorChanged,i=e.onMouseLeave,r=n.info,o=n.display,c=2===r.dimension?[{color:o.positiveColor,key:"positiveColor",label:"Positive"},{color:o.negativeColor,key:"negativeColor",label:"Negative"}]:[{color:o.color,key:"color",label:""}];return Object(m.c)("div",{css:[Zs,{left:2===r.dimension?t.x-450:t.x-220,padding:2===r.dimension?"10px 0":"",top:t.y}],onMouseLeave:i},c.map((function(e){return Object(m.c)("div",{key:e.key},Object(m.c)("span",{style:{padding:2===r.dimension?"0 10px":"0"}},e.label),Object(m.c)(Hl.SketchPicker,{color:{hex:e.color},presetColors:it,onChangeComplete:function(t){return a(t,e.key)}}))})))};function Js(){return!0}var qs=Object(g.memo)(Ks,Js),$s={button:{backgroundColor:"transparent",border:"none",width:"26px",minWidth:"26px"},row:{display:"flex",alignContent:"center",height:"25px",borderBottom:"0.55px solid #f1f1f1"},name:{flex:1,height:"100%",display:"flex"},info:{flex:"1 1 1px",height:"100%",display:"block",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"24px"},icon:{backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"18px 18px"},spectrumClassIcon:{backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"16px 16px",width:"16px",height:"100%",margin:"0px 2px"}},Qs=Object(g.memo)((function(e){var t,n,a=e.activated,i=e.markersVisible,r=e.data,o=e.onChangeVisibility,c=e.onChangeMarkersVisibility,l=e.onChangeActiveSpectrum,u=e.onOpenColorPicker,s=e.onContextMenu,d=function(e,t){return!r||r.display[t]},f=function(e){var t=e.id,n=e.color,i=e.width,r=void 0===i?"14px":i;return h.a.createElement("div",{style:{backgroundColor:n,height:"4px",width:r,opacity:a&&a.id===t?1:.1,display:"inline-block"}})},p=r.display,m=p.color,g=p.name,v=p.positiveColor,O=p.negativeColor;return h.a.createElement("div",{style:$s.row,key:r.id,onContextMenu:s},1===r.info.dimension&&h.a.createElement("button",{style:$s.button,type:"button",onClick:function(){return o(r,"isVisible")}},h.a.createElement(jn.k,{style:Object(b.a)({fill:m},d(r.id,"isVisible")?{opacity:1,strokeWidth:"1px",fill:m}:{opacity:.1,fill:m})})),2===r.info.dimension&&h.a.createElement("div",{style:{minWidth:"40px"}},h.a.createElement("button",{style:Object(b.a)(Object(b.a)({},$s.button),{},{width:"20px",minWidth:"20px"}),type:"button",onClick:function(){return o(r,"isPositiveVisible")}},h.a.createElement(jn.k,{style:Object(b.a)({fill:v},d(r.id,"isPositiveVisible")?{opacity:1,strokeWidth:"1px",fill:v}:{opacity:.1,fill:v})})),h.a.createElement("button",{style:Object(b.a)(Object(b.a)({},$s.button),{},{width:"20px",minWidth:"20px"}),type:"button",onClick:function(){return o(r,"isNegativeVisible")}},h.a.createElement(jn.k,{style:Object(b.a)({fill:O},d(r.id,"isNegativeVisible")?{opacity:1,strokeWidth:"1px",fill:O}:{opacity:.1,fill:O})}))),h.a.createElement("div",{style:$s.name,onClick:function(){return l(r)}},h.a.createElement("div",{style:$s.spectrumClassIcon,className:r.info.isFid?"ci-icon-nmr-fid":2===r.info.dimension?"ci-icon-nmr-2d":"ci-icon-nmr-ft"}),h.a.createElement("span",{style:$s.info},g),h.a.createElement("div",{style:$s.info,dangerouslySetInnerHTML:{__html:r.info&&(n=r.info.solvent,n&&(n=n.replace(/([0-9]+)/g,"<sub>$1</sub>")),n)}}),h.a.createElement("span",{style:$s.info},r.info&&r.info.pulse)),h.a.createElement("button",{style:Object(b.a)(Object(b.a)(Object(b.a)({},$s.button),$s.icon),{},{opacity:(t=r.id,-1!==i.findIndex((function(e){return e.id===t}))&&r.peaks&&r.peaks.length>0?1:.1)}),type:"button",onClick:function(){return c(r)},className:"ci-icon-nmr-peaks",disabled:r.peaks&&0===r.peaks.length}),h.a.createElement("button",{style:$s.button,type:"button",onClick:function(){return l(r)}},2===r.info.dimension?h.a.createElement(f,{id:r.id,color:v}):h.a.createElement(f,{id:r.id,color:m})),h.a.createElement("button",{style:$s.button,type:"button",className:"color-change-bt",onClick:function(e){return u(r,e)}},h.a.createElement(jn.v,null)))}));Qs.defaultProps={onContextMenu:function(){return null}};var ed=Qs,td=Gs((function(e){var t=e.data,n=e.activeSpectrum,a=e.activeTab,i=e.onTabChange,r=Object(g.useRef)(),o=Object(g.useState)(null),c=Object(p.a)(o,2),l=c[0],u=c[1],s=Object(g.useState)([]),d=Object(p.a)(s,2),f=d[0],b=d[1],m=Object(g.useState)(null),O=Object(p.a)(m,2),j=O[0],y=O[1],x=Object(g.useState)(null),k=Object(p.a)(x,2),E=k[0],C=k[1],w=Object(g.useState)(!1),D=Object(p.a)(w,2),S=D[0],T=D[1],I=Object(v.d)(),A=Rt();Object(g.useEffect)((function(){u(n)}),[n]),Object(g.useEffect)((function(){if(t){var e=t?t.filter((function(e){return!0===e.display.isPeaksMarkersVisible})):[];b(e)}}),[t,A]);var M=Object(g.useMemo)((function(){return t?Us("nucleus")(t):[]}),[t]);Object(g.useEffect)((function(){i({tab:a,data:M[a]})}),[a,i,M]);var _=Object(g.useCallback)((function(e){var t=f.findIndex((function(t){return t.id===e.id})),n=Object(La.a)(f);-1===t?n.push({id:e.id}):n.splice(t,1),A({type:"CHANGE_PEAKS_MARKERS_VISIBILITY",data:n}),b(n)}),[A,f]),P=Object(g.useCallback)((function(e){i({tab:e.tabid,data:M[e.tabid]}),A({type:"SET_ACTIVE_TAB",tab:e.tabid})}),[A,i,M]),R=Object(g.useMemo)((function(){return[{label:"Copy to Clipboard",onClick:function(e){var t=e.x,n=e.y,a=e.info;lu(JSON.stringify({x:t,y:n,info:a},void 0,2))?I.success("Data copied to clipboard"):I.error("Copy to clipboard failed")}}]}),[I]),L=Object(g.useCallback)((function(e,t){e.preventDefault(),r.current.handleContextMenu(e,t)}),[r]),F=Object(g.useCallback)((function(e,t){C({x:t.nativeEvent.clientX,y:t.nativeEvent.clientY}),y(e),T(!0)}),[]),N=Object(g.useCallback)((function(e,t){A({type:"CHANGE_VISIBILITY",id:e.id,key:t,value:!e.display[t]})}),[A]),z=Object(g.useCallback)((function(e){l&&l.id===e.id?A({type:"CHANGE_ACTIVE_SPECTRUM",data:null}):A({type:"CHANGE_ACTIVE_SPECTRUM",data:{id:e.id}})}),[l,A]),H=Object(g.useCallback)((function(){T(!1)}),[]),B=Object(g.useCallback)((function(e,t){null!==j&&A({type:"CHANGE_SPECTRUM_COLOR",data:{id:j.id,color:"".concat(e.hex).concat(Math.round(255*e.rgb.a).toString(16)),key:t}})}),[A,j]);return h.a.createElement(g.Fragment,null,h.a.createElement(vo,{defaultTabID:a,onClick:P},M&&Object.keys(M).map((function(e){return h.a.createElement("div",{tablabel:e,tabid:e,key:e},M[e]&&M[e].map((function(e){return h.a.createElement(ed,{key:e.id,activated:l,markersVisible:f,data:e,onChangeVisibility:N,onChangeMarkersVisibility:_,onChangeActiveSpectrum:z,onOpenColorPicker:F,onContextMenu:function(t){return 1===e.info.dimension?L(t,e):null}})})))}))),h.a.createElement(Tl,{ref:r,context:R}),S?h.a.createElement(qs,{onMouseLeave:H,selectedSpectrumData:j,colorPickerPosition:E,onColorChanged:B}):null)}),["data","activeSpectrum","activeTab"]),nd={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},button:{backgroundColor:"transparent",border:"none"}},ad=Gs(Object(g.memo)((function(e){var t=e.data,n=e.activeSpectrum,a=e.activeTab,i=Object(g.useState)([]),r=Object(p.a)(i,2),o=r[0],c=r[1],l=bn(),u=Object(v.d)(),s=Rt(),d=Object(g.useCallback)((function(e){c(e.data?e.data:[])}),[]),f=Object(g.useCallback)((function(){n?s({type:"DELETE_SPECTRA"}):l.showConfirmDialog("All records will be deleted,Are You sure?",{onYes:function(){s({type:"DELETE_SPECTRA"})}})}),[n,s,l]),b=Object(g.useCallback)((function(){var e=o.map((function(e){return e.id}));s({type:"CHANGE_VISIBILITY",id:e})}),[s,o]),m=Object(g.useCallback)((function(){s({type:"CHANGE_VISIBILITY",id:[]})}),[s]),O=Object(g.useCallback)((function(){var e=function(e){var t=a.split(",");t=t[0]===t[1]?[t[0]]:t;var n,i=[],r=Object(w.a)(t);try{var o=function(){var t=n.value;e.some((function(e){return e.info.nucleus===t}))||i.push(t)};for(r.s();!(n=r.n()).done;)o()}catch(c){r.e(c)}finally{r.f()}return i}(t);e.length>0?s({type:"ADD_MISSING_PROJECTION",nucleus:e}):u.error("Nothing to calculate")}),[a,u,t,s]);return h.a.createElement("div",{style:nd.container},h.a.createElement("div",{style:{overflow:"auto"}},h.a.createElement(kl,{onDelete:f,counter:o&&o.length,deleteToolTip:"Delete all spectra"},h.a.createElement(oo,{title:"Hide all spectra",popupPlacement:"right"},h.a.createElement("button",{style:nd.button,type:"button",onClick:m},h.a.createElement(jn.l,null))),h.a.createElement(oo,{title:"Show all spectra",popupPlacement:"right"},h.a.createElement("button",{style:nd.button,type:"button",onClick:b},h.a.createElement(jn.k,null))),n&&a&&a.split(",").length>1&&h.a.createElement(oo,{title:"Add missing projection",popupPlacement:"right"},h.a.createElement("button",{style:nd.button,type:"button",onClick:O},h.a.createElement(jn.f,null)))),h.a.createElement(td,{onTabChange:d})))})),["data","activeSpectrum","activeTab"]),id=function(){return h.a.createElement("div",null,"Summary")},rd={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%",flex:1},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},od=[{id:1,label:"From :",checkController:"showFrom",formatController:"fromFormat",defaultFormat:"0.00"},{id:2,label:"To :",checkController:"showTo",formatController:"toFormat",defaultFormat:"0.00"},{id:3,label:"Absolute :",checkController:"showAbsolute",formatController:"absoluteFormat",defaultFormat:"0.00"},{id:4,label:"Relative :",checkController:"showRelative",formatController:"relativeFormat",defaultFormat:"00.00"}],cd=Object(g.forwardRef)((function(e,t){var n=e.nucleus,a=e.preferences,i=Rt(),r=Object(v.d)(),o=Tn("settings"),c=Object(p.a)(o,2),l=c[0],u=c[1],s=Object(g.useState)(null),d=Object(p.a)(s,2),f=d[0],m=d[1],O=Object(g.useRef)();Object(g.useEffect)((function(){var e=ha(a,"ranges");e&&m(e)}),[a]);var j=function(e){var t=Object(b.a)({},l);t=A.a.set(t,"panels.ranges",e),u(JSON.stringify(t))},y=Object(g.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i({type:"SET_PREFERENCES",data:{type:"ranges",values:e}}),t&&r.success("ranges preferences saved successfully")}),[r,i]);Object(g.useImperativeHandle)(t,(function(){return{saveSetting:function(){O.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var x=function(){var e=Object(D.a)(C.a.mark((function e(t){var n,a,i,r,o,c,l,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target,a=new FormData(n),i={},r=Object(w.a)(a.entries());try{for(r.s();!(o=r.n()).done;)c=o.value,l=c[0].split("-").join("."),u=["true","false"].includes(c[1])?"true"===c[1]:c[1],i=A.a.set(i,l,u)}catch(s){r.e(s)}finally{r.f()}y(i,!0),j(i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(g.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join(".");if(f){var i=A.a.get(f,a);return i||null}var r=t.length-1;return ma[t[r]]}),[f]);return h.a.createElement("div",{style:rd.container},h.a.createElement("form",{onSubmit:x,ref:O},n&&n.map((function(e){return h.a.createElement("div",{key:e,style:rd.groupContainer},h.a.createElement("p",{style:rd.header},h.a.createElement(Lr.a,{mf:e})),od.map((function(t){return h.a.createElement(Ul,{key:t.id,label:t.label,checked:k(e,t.checkController),format:k(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e})})))}))))})),ld=Gs(Object(g.memo)(cd),["nucleus","preferences"]);function ud(){var e=Object(f.a)(["\n  background-color: #f5f5dc;\n"]);return ud=function(){return e},e}function sd(){var e=Object(f.a)(["\n  background-color: #ff6f0057;\n"]);return sd=function(){return e},e}var dd=Object(m.b)(sd()),fd=Object(m.b)(ud()),bd=function(e){var t=e.rowData,n=e.onDelete,a=e.onUnlink,i=e.onZoom,r=e.onContextMenu,o=Za(t.id),c=Object(va.b)([o.id]),l=Object(va.b)(["".concat(o.id).concat("___","X")].concat(o.assigned.x||[])),u=Object(va.b)(["".concat(o.id).concat("___","Y")].concat(o.assigned.y||[])),s=Za(t.tableMetaInfo.id),d=Object(va.b)(["".concat(s.id).concat("___","X")].concat(s.assigned.x||[])),f=Object(va.b)(["".concat(s.id).concat("___","Y")].concat(s.assigned.y||[])),b=Object(g.useState)(!1),h=Object(p.a)(b,2),v=h[0],O=h[1],j=Object(g.useState)(!1),y=Object(p.a)(j,2),x=y[0],k=y[1],E=Object(g.useState)(!1),C=Object(p.a)(E,2),w=C[0],D=C[1],S=Object(g.useState)(!1),T=Object(p.a)(S,2),I=T[0],A=T[1],M=Object(g.useMemo)((function(){return{rowSpan:t.tableMetaInfo.rowSpan,css:Object.prototype.hasOwnProperty.call(t.tableMetaInfo,"hide")&&!0===t.tableMetaInfo.hide?{display:"none"}:null}}),[t.tableMetaInfo]),_=Object(g.useCallback)((function(){var e=Object.assign({},t);return delete e.tableMetaInfo,e}),[t]),P=Object(g.useCallback)((function(e,n,i){e&&(e.preventDefault(),e.stopPropagation()),a(_(),n,t.tableMetaInfo.signalIndex,i),"x"===i?void 0!==n?n?(O(!1),o.removeAll("x")):(D(!1),s.removeAll("x")):(O(!1),D(!1)):"y"===i?void 0!==n?n?(k(!1),o.removeAll("y")):(A(!1),s.removeAll("y")):(k(!1),A(!1)):(O(!1),o.removeAll("x"),D(!1),s.removeAll("x"),k(!1),o.removeAll("y"),A(!1),s.removeAll("y"))}),[s,o,_,a,t.tableMetaInfo.signalIndex]),R=Object(g.useCallback)((function(){n(_())}),[_,n]),L=Object(g.useCallback)((function(){i(_())}),[_,i]),F=Object(g.useCallback)((function(e,t,n){t.onClick(e,n)}),[]),N=Object(g.useMemo)((function(){return{onMouseEnter:function(){o.onMouseEnter("x"),l.show()},onMouseLeave:function(){o.onMouseLeave("x"),l.hide()}}}),[o,l]),z=Object(g.useMemo)((function(){return{onMouseEnter:function(){o.onMouseEnter("y"),u.show()},onMouseLeave:function(){o.onMouseLeave("y"),u.hide()}}}),[o,u]),H=Object(g.useMemo)((function(){return{onMouseEnter:function(){s.onMouseEnter("x"),d.show()},onMouseLeave:function(){s.onMouseLeave("x"),d.hide()}}}),[s,d]),B=Object(g.useMemo)((function(){return{onMouseEnter:function(){s.onMouseEnter("y"),f.show()},onMouseLeave:function(){s.onMouseLeave("y"),f.hide()}}}),[s,f]);return Object(m.c)("tr",Object.assign({onContextMenu:function(e){return r(e,_())},css:c.isActive||o.isActive?dd:Object.prototype.hasOwnProperty.call(t.tableMetaInfo,"isConstantlyHighlighted")&&!0===t.tableMetaInfo.isConstantlyHighlighted?fd:null},c.onHover),Object(m.c)("td",M,t.tableMetaInfo.rowIndex+1),Object(m.c)("td",H,t.tableMetaInfo.signal.x.delta.toFixed(2)),Object(m.c)("td",B,t.tableMetaInfo.signal.y.delta.toFixed(2)),Object(m.c)("td",Object.assign({},H,{onClick:function(e){return F(e,s,"x")}},{css:d.isActive||s.isActive&&"x"===s.activeAxis?{color:"red",fontWeight:"bold"}:null}),t.tableMetaInfo.signal&&t.tableMetaInfo.signal.x.diaID&&t.tableMetaInfo.signal.x.diaID.length>0?Object(m.c)("div",{onMouseEnter:function(){return D(!0)},onMouseLeave:function(){return D(!1)}},t.tableMetaInfo.signal.x.diaID.length," ",Object(m.c)("sup",null,Object(m.c)("button",{type:"button",css:{visibility:w?"visible":"hidden",padding:0,margin:0},onClick:function(e){return P(e,!1,"x")}},Object(m.c)(jn.u,{color:"red"})))):s.isActive&&"x"===s.activeAxis?"0":""),Object(m.c)("td",Object.assign({},B,{onClick:function(e){return F(e,s,"y")}},{css:f.isActive||s.isActive&&"y"===s.activeAxis?{color:"red",fontWeight:"bold"}:null}),t.tableMetaInfo.signal&&t.tableMetaInfo.signal.y.diaID&&t.tableMetaInfo.signal.y.diaID.length>0?Object(m.c)("div",{onMouseEnter:function(){return A(!0)},onMouseLeave:function(){return A(!1)}},t.tableMetaInfo.signal.y.diaID.length," ",Object(m.c)("sup",null,Object(m.c)("button",{type:"button",css:{visibility:I?"visible":"hidden",padding:0,margin:0},onClick:function(e){return P(e,!1,"y")}},Object(m.c)(jn.u,{color:"red"})))):s.isActive&&"y"===s.activeAxis?"0":""),Object(m.c)("td",Object.assign({},M,N,{onClick:function(e){return F(e,o,"x")}}),void 0!==t.x.pubIntegral&&t.x.pubIntegral>0?t.x.diaID&&t.x.diaID.length>0?Object(m.c)("div",{onMouseEnter:function(){return O(!0)},onMouseLeave:function(){return O(!1)}},"".concat(t.x.pubIntegral)," ","(",Object(m.c)("span",{css:o.isActive&&"x"===o.activeAxis||o.isOnHover&&"x"===o.onHoverAxis||l.isActive?{color:"red",fontWeight:"bold"}:{color:"black",fontWeight:"normal"}},t.x.diaID?t.x.diaID.length:0),")"," ",Object(m.c)("sup",null,Object(m.c)("button",{type:"button",css:{visibility:v?"visible":"hidden",padding:0,margin:0},onClick:function(e){return P(e,!0,"x")}},Object(m.c)(jn.u,{color:"red"})))):o.isActive&&"x"===o.activeAxis?Object(m.c)("div",null,"".concat(t.x.pubIntegral," ("),Object(m.c)("span",{css:{color:"red",fontWeight:"bold"}},"0"),")"):t.x.pubIntegral:o.isActive&&"x"===o.activeAxis?Object(m.c)("div",null,"0 (",Object(m.c)("span",{css:{color:"red",fontWeight:"bold"}},"0"),")"):""),Object(m.c)("td",Object.assign({},M,z,{onClick:function(e){return F(e,o,"y")}}),void 0!==t.y.pubIntegral&&t.y.pubIntegral>0?t.y.diaID&&t.y.diaID.length>0?Object(m.c)("div",{onMouseEnter:function(){return k(!0)},onMouseLeave:function(){return k(!1)}},"".concat(t.y.pubIntegral)," ","(",Object(m.c)("span",{css:o.isActive&&"y"===o.activeAxis||o.isOnHover&&"y"===o.onHoverAxis||u.isActive?{color:"red",fontWeight:"bold"}:{color:"black",fontWeight:"normal"}},t.y.diaID?t.y.diaID.length:0),")"," ",Object(m.c)("sup",null,Object(m.c)("button",{type:"button",css:{visibility:x?"visible":"hidden",padding:0,margin:0},onClick:function(e){return P(e,!0,"y")}},Object(m.c)(jn.u,{color:"red"})))):o.isActive&&"y"===o.activeAxis?Object(m.c)("div",null,"".concat(t.y.pubIntegral," ("),Object(m.c)("span",{css:{color:"red",fontWeight:"bold"}},"0"),")"):t.y.pubIntegral:o.isActive&&"y"===o.activeAxis?Object(m.c)("div",null,"0 (",Object(m.c)("span",{css:{color:"red",fontWeight:"bold"}},"0"),")"):""),Object(m.c)("td",M,Object(m.c)("button",{type:"button",className:"delete-button",onClick:R},Object(m.c)(jn.z,null)),Object(m.c)("button",{type:"button",className:"zoom-button",onClick:L},Object(m.c)(jn.B,{title:"Zoom to zone in spectrum"}))))};function pd(){var e=Object(f.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  height: 100%;\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n  th,\n  td {\n    white-space: nowrap;\n    text-align: center;\n    margin: 0;\n    padding: 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n    }\n  }\n"]);return pd=function(){return e},e}var md=Object(m.b)(pd()),gd=function(e){var t=e.tableData,n=e.onDelete,a=e.onUnlink,i=e.onZoom,r=e.context,o=e.preferences,c=e.nuclei,l=Object(g.useRef)(),u=Object(g.useMemo)((function(){var e=[];return t.forEach((function(t,n){1===t.signal.length?e.push(Object(b.a)(Object(b.a)({},t),{},{tableMetaInfo:Object(b.a)(Object(b.a)({},t.tableMetaInfo),{},{signal:t.signal[0],rowIndex:n,signalIndex:0,id:"".concat(t.id).concat("___",0)})})):t.signal.length>1&&t.signal.forEach((function(a,i){var r=!1,o=null;i<t.signal.length-1&&0===i?o=t.signal.length:r=!0,e.push(Object(b.a)(Object(b.a)({},t),{},{tableMetaInfo:Object(b.a)(Object(b.a)({},t.tableMetaInfo),{},{signal:a,rowSpan:o,hide:r,rowIndex:n,signalIndex:i,id:"".concat(t.id).concat("___").concat(i)})}))}))})),e}),[t]),s=Object(g.useCallback)((function(e,t){e.preventDefault(),l.current.handleContextMenu(e,t)}),[l]);return Object(m.c)("div",null,Object(m.c)("table",{css:md},Object(m.c)("tbody",null,Object(m.c)("tr",null,Object(m.c)("th",{rowSpan:2},"#"),Object(m.c)("th",{colSpan:2},"\u03b4 (ppm)"),Object(m.c)("th",{colSpan:2},Object(m.c)(jn.s,null)),Object(m.c)("th",{colSpan:2},"\u03a3"),Object(m.c)("th",{rowSpan:2},"")),Object(m.c)("tr",null,Object(m.c)("th",null,c[0]),Object(m.c)("th",null,c[1]),Object(m.c)("th",null,c[0]),Object(m.c)("th",null,c[1]),Object(m.c)("th",null,c[0]),Object(m.c)("th",null,c[1])),u&&u.map((function(e,t){return Object(m.c)(bd,{key:"zonesTableRow".concat(t),rowData:u[t],onDelete:n,onUnlink:a,onZoom:i,onContextMenu:function(e,t){return s(e,t)},preferences:o})})))),Object(m.c)(Tl,{ref:l,context:r}))},hd={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},sumButton:{borderRadius:"5px",marginTop:"3px",color:"white",backgroundColor:"#6d6d6d",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},removeAssignmentsButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"2px",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},button:{backgroundColor:"transparent",border:"none"}},vd=Gs(Object(g.memo)((function(e){var t=e.spectrum,n=e.activeTab,a=e.preferences,i=e.xDomain,r=e.yDomain,o=Object(g.useState)(!1),c=Object(p.a)(o,2),l=c[0],u=c[1],s=Object(g.useState)(0),d=Object(p.a)(s,2),f=d[0],m=d[1],O=Wa(),j=Rt(),y=bn(),x=Object(v.d)(),k=Object(g.useState)(!1),E=Object(p.a)(k,2),C=E[0],w=E[1],D=Object(g.useRef)(),S=Object(g.useMemo)((function(){return t&&t.zones&&t.zones.values?(m(t.zones.values.length),t.zones.values):(m(0),[])}),[t]),T=Object(g.useMemo)((function(){var e=function(e,t,n,a){return e*=1e4,n*=1e4,a*=1e4,((t*=1e4)>=1e4*i[0]&&e<=1e4*i[1]||e<=1e4*i[0]&&t>=1e4*i[1])&&(a>=1e4*r[0]&&n<=1e4*r[1]||n<=1e4*r[0]&&a>=1e4*r[1])};return(l?function(t){return t.filter((function(t){return e(t.x.from,t.x.to,t.y.from,t.y.to)}))}(S):S).map((function(t){return Object(b.a)(Object(b.a)({},t),{},{tableMetaInfo:{isConstantlyHighlighted:e(t.x.from,t.x.to,t.y.from,t.y.to)}})}))}),[S,S.length,l,i,r]),I=Object(g.useCallback)((function(){u(!l)}),[l]),M=Object(g.useCallback)((function(e,t,n,a){void 0!==t&&void 0!==a?!0===t?O.dispatch({type:"REMOVE_ALL",payload:{id:e.id,axis:a}}):void 0!==n&&O.dispatch({type:"REMOVE_ALL",payload:{id:"".concat(e.id).concat("___").concat(n),axis:a}}):void 0!==a?(O.dispatch({type:"REMOVE_ALL",payload:{id:e.id,axis:a}}),e.signal.forEach((function(t,n){O.dispatch({type:"REMOVE_ALL",payload:{id:"".concat(e.id).concat("___").concat(n),axis:a}})}))):(O.dispatch({type:"REMOVE_ALL",payload:{id:e.id,axis:"x"}}),e.signal.forEach((function(t,n){O.dispatch({type:"REMOVE_ALL",payload:{id:"".concat(e.id).concat("___").concat(n),axis:"x"}})})),O.dispatch({type:"REMOVE_ALL",payload:{id:e.id,axis:"y"}}),e.signal.forEach((function(t,n){O.dispatch({type:"REMOVE_ALL",payload:{id:"".concat(e.id).concat("___").concat(n),axis:"y"}})}))),gu(e,t,n,a),j({type:"CHANGE_ZONE_DATA",data:e})}),[O,j]),_=Object(g.useCallback)((function(){S.forEach((function(e){return M(e)}))}),[S,M]),P=Object(g.useCallback)((function(){y.showConfirmDialog("All assignments will be removed. Are you sure?",{onYes:_})}),[_,y]),R=Object(g.useCallback)((function(){y.showConfirmDialog("All zones will be deleted. Are You sure?",{onYes:function(){_(),j({type:"DELETE_2D_ZONE"})}})}),[j,y,_]),F=Object(g.useCallback)((function(e){var t=10*Math.abs(e.x.from-e.x.to);j({type:"SET_X_DOMAIN",xDomain:e.x.from<=e.x.to?[e.x.from-t,e.x.to+t]:[e.x.to-t,e.x.from+t]});var n=10*Math.abs(e.y.from-e.y.to);j({type:"SET_Y_DOMAIN",yDomain:e.y.from<=e.y.to?[e.y.from-n,e.y.to+n]:[e.y.to-n,e.y.from+n]})}),[j]),N=Object(g.useCallback)((function(e){M(e),j({type:"DELETE_2D_ZONE",zoneID:e.id})}),[j,M]),z=Object(g.useCallback)((function(e){lu(e)?x.success("Data copied to clipboard"):x.error("copy to clipboard failed")}),[x]),H=Object(g.useCallback)((function(e){if(t){var n=e.from,a=e.to,i=t.x,r=t.y,o=Object(L.g)(i,{from:n,to:a}),c=o.fromIndex,l=o.toIndex,u=Object(b.a)({x:i.slice(c,l),y:r.slice(c,l)},e);lu(JSON.stringify(u,void 0,2))?x.show("Data copied to clipboard"):x.error("copy to clipboard failed")}}),[t,x]),B=Object(g.useCallback)((function(){y.close()}),[y]),V=Object(g.useCallback)((function(){var e=Object(Ru.a)(S);y.show(h.a.createElement(Nu,{text:e,onCopyClick:z,onClose:B}),{})}),[B,S,y,z]),Y=Object(g.useMemo)((function(){return A.a.get(a,"panels.zones.[".concat(n,"]"))}),[n,a]),X=[{label:"Copy to clipboard",onClick:H}],G=Object(g.useCallback)((function(){w(!C)}),[C]),U=Object(g.useCallback)((function(){D.current.saveSetting(),w(!1)}),[]);return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{style:hd},!C&&h.a.createElement(kl,{counter:f,onDelete:R,deleteToolTip:"Delete All Zones",onFilter:I,filterToolTip:l?"Show all zones":"Hide zones out of view",filterIsActive:l,counterFiltered:T&&T.length,showSettingButton:"true",onSettingClick:G},h.a.createElement(oo,{title:"Preview publication string",popupPlacement:"right"},h.a.createElement("button",{style:hd.button,type:"button",onClick:V},h.a.createElement(jn.o,null))),h.a.createElement(oo,{title:"Remove all Assignments",popupPlacement:"right"},h.a.createElement("button",{style:hd.removeAssignmentsButton,type:"button",onClick:P,disabled:!S||0===S.length},h.a.createElement(jn.E,null)))),C&&h.a.createElement(wl,{onSave:U,onClose:G}),h.a.createElement(Qc.a,{isFlipped:C,infinite:!0,containerStyle:{height:"100%"}},h.a.createElement("div",null,T&&T.length>0?h.a.createElement(gd,{tableData:T,onDelete:N,onZoom:F,onUnlink:M,context:X,preferences:Y,nuclei:n&&2===n.split(",").length?n.split(","):["?","?"]}):h.a.createElement(Fl,null)),h.a.createElement(ld,{ref:D}))))})),["spectrum","activeTab","preferences","xDomain","yDomain"],{spectrum:["zones","x","y"]}),Od={width:"100%",height:"100%",padding:"0px",display:"flex",flexDirection:"column"},jd=Object(g.memo)((function(e){var t=e.children,n=e.className,a=e.style;return h.a.createElement("div",{className:n,style:Object(b.a)(Object(b.a)({},Od),a)},t)})),yd={width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",padding:"5px 0px",color:"gray"},xd=Object(g.memo)((function(e){var t=e.children,n=e.className,a=e.style,i=Object(g.useMemo)((function(){return h.a.Children.map(t,(function(e){return h.a.cloneElement(e,{style:Object(b.a)({borderBottom:"0.55px solid #d8d8d8"},e.props.style)})}))}),[t]);return h.a.createElement("div",{className:n,style:Object(b.a)(Object(b.a)({},yd),{},{style:a})},i)})),kd={width:"100%",display:"flex",alignItems:"flex-start"};function Ed(e){return"top"===e.toLowerCase()?"flex-start":"bottom"===e.toLowerCase()?"flex-end":"center"}var Cd=Object(g.memo)((function(e){var t=e.children,n=e.className,a=e.style,i=e.align,r=void 0===i?"center":i,o=e.vAlign,c=void 0===o?"center":o,l=e.size,u=void 0===l?1:l,s=e.onClick;return h.a.createElement("div",{className:n,style:Object(b.a)(Object(b.a)({},kd),{},{alignItems:Ed(c),textAlign:r,flex:u},a),onClick:s},t)}));Cd.defaultProps={onClick:function(){return null}};var wd=Cd,Dd={width:"100%",display:"flex",padding:"0px 5px",color:"#424242",backgroundColor:"#d8d8d8",borderBottom:"0.55px solid #d8d8d8",fontSize:11,fontWeight:"bold"},Sd=Object(g.memo)((function(e){var t=e.children,n=e.className,a=e.style;return h.a.createElement("div",{className:n,style:Object(b.a)(Object(b.a)({},Dd),a)},t)})),Td={width:"100%",display:"flex",padding:"5px 0px"},Id=Object(g.memo)((function(e){var t=e.children,n=e.className,a=e.style,i=e.onClick;return h.a.createElement("div",{className:n,style:Object(b.a)(Object(b.a)({},Td),a),onClick:i},t)}));Id.defaultProps={onClick:function(){return null}};var Ad=Id;var Md=function(e){var t=function(t){var n=Mt(),a=n.data,i=n.activeSpectrum,r=Object(g.useMemo)((function(){return a&&i&&i.id?{filters:a.find((function(e){return e.id===i.id})).filters}:{}}),[i,a]).filters,o=void 0===r?[]:r,c=t.forwardedRef,l=Object(k.a)(t,["forwardedRef"]);return h.a.createElement(e,Object.assign({},l,{filters:o,ref:c}))};return h.a.forwardRef((function(e,n){return h.a.createElement(t,Object.assign({},e,{forwardedRef:n}))}))},_d=n(765),Pd=function(e){var t=e.checked,n=e.onChange,a=Object(g.useState)(t),i=Object(p.a)(a,2),r=i[0],o=i[1],c=Object(g.useCallback)((function(){var e=!r;o(e),n(e)}),[r,n]);return h.a.createElement("input",{type:"checkbox",onChange:c,defaultChecked:r})};Pd.defaultProps={onChange:function(){return null}};var Rd=Pd,Ld={button:{backgroundColor:"transparent",border:"none",height:25,width:25},active:{backgroundColor:"#fbfbfb",borderTop:"1px solid #817066",borderBottom:"1px solid #817066"}},Fd=Object(g.memo)((function(e){var t=e.filters,n=Rt(),a=Object(g.useState)(),i=Object(p.a)(a,2),r=i[0],o=i[1],c=Object(g.useCallback)((function(e,t){n({type:"ENABLE_FILTER",id:e,checked:t})}),[n]),l=Object(g.useCallback)((function(e){n({type:"DELETE_FILTER",id:e})}),[n]),u=Object(g.useCallback)((function(e){o((function(t){var a=t===e?null:e;return n({type:"SET_FILTER_SNAPSHOT",id:a}),a}))}),[n]);return Object(g.useMemo)((function(){return t&&t.map((function(e){return h.a.createElement(Ad,{key:e.id,onClick:function(){return u(e.id)},style:e.id===r?Object(b.a)({},Ld.active):{}},h.a.createElement(wd,{align:"center",size:"2"},e.label),h.a.createElement(wd,{align:"left",size:"3"},h.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},h.a.createElement(_d.a,{data:e.error?e.error:e.value}))),h.a.createElement(wd,{align:"center",vAlign:"center",size:"1"},h.a.createElement(Rd,{checked:e.flag,onChange:function(t){return c(e.id,t)}}),e.isDeleteAllow&&h.a.createElement("button",{style:Ld.button,type:"button",onClick:function(){return l(e.id)}},h.a.createElement(jn.z,null))))}))}),[u,t,l,c,r])})),Nd=Md(Object(g.memo)((function(e){var t=e.filters;return Object(g.useMemo)((function(){return t?h.a.createElement(jd,null,h.a.createElement(Sd,null,h.a.createElement(Ad,null,h.a.createElement(wd,{align:"center",size:"1"},"Label"),h.a.createElement(wd,{align:"center",size:"2"},"Properties"))),h.a.createElement(xd,null,h.a.createElement(Fd,{filters:t}))):h.a.createElement(Fl,null)}),[t])}))),zd=[{title:"Spectra",component:h.a.createElement(ad,null),openWhen:null,style:"",hidePreferenceKey:"hideSpectraPanel"},{title:"Information",component:h.a.createElement(qc,null),openWhen:null,style:{overflow:"hidden"},hidePreferenceKey:"hideInformationPanel"},{title:"Peaks",component:h.a.createElement(_u,null),openWhen:[Kn.peakPicking.id],style:"",hidePreferenceKey:"hidePeaksPanel"},{title:"Filters",component:h.a.createElement(Nd,null),openWhen:null,style:"",hidePreferenceKey:"hideFiltersPanel"},{title:"Integrals",component:h.a.createElement(Jl,null),openWhen:[Kn.integral.id],style:"",hidePreferenceKey:"hideIntegralsPanel"},{title:"Ranges",component:h.a.createElement(Xs,null),openWhen:[Kn.rangesPicking.id],style:"",hidePreferenceKey:"hideRangesPanel"},{title:"Zones",component:h.a.createElement(vd,null),openWhen:[Kn.zone2D.id],style:"",hidePreferenceKey:"hideZonesPanel"},{title:"Summary",component:h.a.createElement(id,null),openWhen:[],style:"",hidePreferenceKey:"hideSummaryPanel"},{title:"Structures",component:h.a.createElement(Cu,null),openWhen:[Kn.rangesPicking.id],style:"",hidePreferenceKey:"hideStructuresPanel"}],Hd=Object(g.memo)((function(e){var t=e.selectedTool,n=Object(g.useState)(0),a=Object(p.a)(n,2),i=a[0],r=a[1],o=Nt(),c=Object(g.useCallback)((function(){var e=zd.findIndex((function(e){return e.openWhen&&e.openWhen.includes(t)}));return-1===e?i:e}),[i,t]);return Object(g.useEffect)((function(){t&&r(c())}),[c,t]),h.a.createElement(Hc,{defaultOpenIndex:i},zd.map((function(e){return A.a.get(o,"panels.".concat(e.hidePreferenceKey))?h.a.createElement("span",null):h.a.createElement(Fc,{key:e.title,title:e.title,style:e.style},e.component)})))}));function Bd(e){if(e.activeTab){var t=Us("nucleus")(e.data)[e.activeTab];if(e.displayerMode===ur.DM_2D)return t;if(e.activeSpectrum){var n=t.findIndex((function(t){return t.id===e.activeSpectrum.id}));if(-1!==n){var a=t[n].info.isFid||!1;t=t.filter((function(e){return e.info.isFid===a}))}}else t=t?t.filter((function(e){return!1===e.info.isFid})):[];var i,r=Object(w.a)(e.data);try{var o=function(){var e=i.value;t.some((function(t){return t.id===e.id}))?(Vr.getDatum(e.id).isVisibleInDomain=!0,e.isVisibleInDomain=!0):(Vr.getDatum(e.id).isVisibleInDomain=!1,e.isVisibleInDomain=!1)};for(r.s();!(i=r.n()).done;)o()}catch(c){r.e(c)}finally{r.f()}return e.data}return e.data}function Vd(e){var t=[],n=[],a={},i={},r={};try{t=e.reduce((function(e,t){if(t.isVisibleInDomain){var n=[t.x[0],t.x[t.x.length-1]];return i[t.id]=n,e.concat(n)}return e.concat([])}),[]),n=e.reduce((function(e,t){if(t.isVisibleInDomain){var n=Object(Sn.c)(t.y);if(a[t.id]=n,t.integrals.values&&t.integrals.values.length>0){var i=t.integrals.values[0],o=i.from,c=i.to,l=t.x,u=t.y,s=Object(L.i)({x:l,y:u},{from:o,to:c,reverse:!0});r[t.id]=Object(Sn.c)(s.y)}return e.concat(n)}return e.concat([])}),[])}catch(o){console.log(o)}return{xDomain:Object(Sn.c)(t),yDomain:Object(Sn.c)(n),yDomains:a,xDomains:i,integralYDomain:r}}function Yd(e){var t={},n={},a=e.activeTab,i=e.tabActiveSpectrum,r=e.data,o=a.split(","),c=r.find((function(e){return e.id===i[a].id})),l=c.minX,u=c.maxX,s=c.minY,d=c.maxY,f=o.map((function(e){return i[e]&&i[e].id})),b=r.reduce((function(e,t){return f.includes(t.id)&&1===t.info.dimension?e.concat(t):e.concat([])}),[]);try{n=b.reduce((function(e,t){var n=[t.x[0],t.x[t.x.length-1]];return e[t.id]=n,e}),{}),t=b.reduce((function(e,t){var n=Object(Sn.c)(t.y);return e[t.id]=n,e}),{})}catch(p){console.log(p)}return{xDomain:[l,u],yDomain:[s,d],yDomains:t,xDomains:n}}function Xd(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=Bd(e);e.activeTab&&[ur.DM_1D,ur.DM_2D].includes(e.displayerMode)&&(t=e.displayerMode===ur.DM_1D?Vd(a):Yd(e),e.xDomain=t.xDomain,e.xDomains=t.xDomains,n?(e.yDomain=t.yDomain,e.yDomains=t.yDomains,e.originDomain=t,e.integralsYDomains=t.integralYDomain&&t.integralYDomain,e.originIntegralYDomain=t.integralYDomain&&t.integralYDomain):e.originDomain=Object(b.a)(Object(b.a)({},e.originDomain),{},{xDomain:t.xDomain,xDomains:t.xDomains}))}function Gd(e){var t=Bd(e).filter((function(e){return!0===e.isVisibleInDomain}));e.mode=t&&t[0]&&t[0].info.isFid?"LTR":"RTL"}var Ud=function(e,t){var n=t.exportType,a=e.data;if(a.length>0){var i=a[0].name;switch(n){case"json":!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"experiment",n=JSON.stringify(e,void 0,2),a=new Blob([n],{type:"text/plain"});Object(cu.saveAs)(a,"".concat(t,".nmrium"))}(Vr.toJSON(),i);break;case"svg":su(i,"nmrSVG");break;case"png":!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"experiment",t=arguments.length>1?arguments[1]:void 0,n=fu(t),a=n.blob,i=n.width,r=n.height;try{var o=document.createElement("canvas");o.width=i,o.height=r;var c=o.getContext("2d");c.fillStyle="white",c.fillRect(0,0,o.width,o.height);var l=new Image,u=URL.createObjectURL(a);l.onload=Object(D.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.drawImage(l,0,0),n=o.toDataURL("image/png",1),Object(cu.saveAs)(n,"".concat(e,".png")),URL.revokeObjectURL(n);case 4:case"end":return t.stop()}}),t)}))),l.src=u}catch(s){console.log(s)}}(i,"nmrSVG");break;case"copy":du("nmrSVG")}}return e};var Wd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.reduce((function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e}));return n},Zd=function(){function e(){if(Object(S.a)(this,e),this.stack=[],this.instance)return this.instance;this.instance=this}return Object(T.a)(e,[{key:"push",value:function(e){this.stack.push(e)}},{key:"pop",value:function(){return 0===this.stack.length?null:this.stack.pop()}}],[{key:"getInstance",value:function(){if(this.instance)return this.instance;this.instance=new e}}]),e}(),Kd=function(e,t,n){var a=n.center,i=e.height;if(a){var r=i/2;t.verticalAlign.flag=!0,t.verticalAlign.value=r,t.verticalAlign.stacked=!1,Vr.setPreferences({display:{center:!0}})}else t.verticalAlign.flag=!1,t.verticalAlign.value=20,t.verticalAlign.stacked=!1,Vr.setPreferences({display:{center:!1}})};function Jd(e,t,n){var a=t.activeSpectrum.id,i=Vr.getDatum(a);if(n===Ye.phaseCorrection.id){e.tempData=t.data;var r=function(e){var t=e.activeSpectrum,n=e.data,a=t.id,i=n.find((function(e){return e.id===a})),r=Object(Sn.e)(i.y),o=i.y.findIndex((function(e){return e===r}));return{xValue:i.x[o],yValue:r,index:o}}(t).xValue;e.pivot=r}else if(e.selectedTool===Kn.phaseCorrection.id){var o=e.data.findIndex((function(e){return e.id===a}));i.data.x=t.tempData[o].x,i.data.re=t.tempData[o].y,i.data.im=t.tempData[o].im,e.data[o].x=t.tempData[o].x,e.data[o].y=t.tempData[o].y,e.tempData=null,e.selectedTool=null,Xd(e)}}function qd(e,t,n){if(e&&e.length>0)if(e[0].info.isFid&&!e.some((function(e){return!1===e.info.isFid}))){var a=n/2;t.verticalAlign.flag=!0,t.verticalAlign.value=a,t.verticalAlign.stacked=!1}else t.verticalAlign.flag=!1,t.verticalAlign.value=20,t.verticalAlign.stacked=!1}function $d(e,t){var n=e.activeTab.split(",");return e.tabActiveSpectrum[n[t]]&&!e.data[e.tabActiveSpectrum[n[t]].index].info.isFid}var Qd=function(e){if(e.displayerMode===ur.DM_2D){var t=$d(e,0)?sr.top:dr.top,n=$d(e,1)?sr.left:dr.left;e.margin=Object(b.a)(Object(b.a)({},sr),{},{top:t,left:n})}else e.margin=dr};function ef(e,t){if(e.displayerMode===ur.DM_2D){var n,a={},i=Object(w.a)(t[e.activeTab]);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=Vr.getDatum(r.id);a[r.id]=o.getContourLines()}}catch(c){i.e(c)}finally{i.f()}e.contours=a}}var tf=function(e,t){e.displayerMode=t.some((function(e){return 2===e.info.dimension}))?ur.DM_2D:ur.DM_1D},nf=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Object.keys(t).sort((function(e,t){return e.split(",").length>t.split(",").length?-1:1}));if(JSON.stringify(i)!==JSON.stringify(Object.keys(e.tabActiveSpectrum))||a){var r,o=[],c=Object.keys(t).sort((function(e,t){return e.split(",").length>t.split(",").length?-1:1})),l=Object(w.a)(c);try{var u=function(){var n=r.value,a=t[n];if(2===n.split(",").length&&o.push(n),1===a.length){var i=e.data.findIndex((function(e){return e.id===a[0].id}));e.tabActiveSpectrum[n]={id:a[0].id,index:i}}else if(2===t[n].length){var c=t[n].filter((function(e){return!e.info.isFid}));if(c&&c.length>0){var l=e.data.findIndex((function(e){return e.id===c[0].id}));e.tabActiveSpectrum[n]={id:c[0].id,index:l}}else e.tabActiveSpectrum[n]=null}else e.tabActiveSpectrum[n]=null};for(l.s();!(r=l.n()).done;)u()}catch(s){l.e(s)}finally{l.f()}o.length>0?(e.activeSpectrum=e.tabActiveSpectrum[o[0]],e.activeTab=o[0]):(e.activeSpectrum=e.tabActiveSpectrum[n],e.activeTab=n)}else e.activeTab=n,e.activeSpectrum=e.tabActiveSpectrum[n];tf(e,t[e.activeTab]),Qd(e)},af=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Us("nucleus"),a=n(e.data),i=Object.keys(a)[0];i&&(nf(e,a,t||i),ef(e,a),Xd(e),Gd(e))};function rf(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t.getData(),r=i.x,o=i.re,c=i.im,l=e.data.findIndex((function(e){return e.id===n}));a&&(e.selectedOptionPanel=null,e.selectedTool=Kn.zoom.id),e.data[l].x=r,e.data[l].y=o,e.data[l].im=c,e.data[l].filters=t.getFilters(),e.data[l].info=t.getInfo()}function of(){return(of=Object(D.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr.fromZip(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cf=function(e,t){return Object(Xn.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum.id,i=e.data.findIndex((function(e){return e.id===a})),r=function(e,t,n){var a=Gn(null,n),i=n.activeSpectrum,r=a.invert(t.x-e),o=a.invert(t.x+e),c=[];return r>o?(c[0]=o,c[1]=r):(c[0]=r,c[1]=o),Vr.getDatum(i.id).lookupPeak(c[0],c[1])}(10,t,e);if(-1!==i&&r){var o={xIndex:r.xIndex},c=Vr.getDatum(a).addPeak(o);c&&n.data[i].peaks.values.push(c)}}}))};function lf(e,t){2===e.info.dimension?(e.display.isPositiveVisible=t,e.display.isNegativeVisible=t):e.display.isVisible=t}var uf=1;la.subscribe("noiseFactorChanged",(function(e){uf=e}));var sf={data:null,contours:null,tempData:null,xDomain:[],yDomain:[],yDomains:{},xDomains:{},originDomain:{},integralsYDomains:{},originIntegralYDomain:{},selectedTool:Kn.zoom.id,selectedFilter:null,selectedOptionPanel:null,activeTab:null,width:0,height:0,margin:{top:10,right:20,bottom:70,left:0},activeSpectrum:null,mode:"RTL",zoomFactor:{scale:1},integralZoomFactor:{scale:.5},molecules:[],verticalAlign:{flag:!1,stacked:!1,value:20},history:{past:[],present:null,future:[],hasUndo:!1,hasRedo:!1},pivot:0,isLoading:!1,preferences:{},baseLineZones:[],keysPreferences:{},displayerMode:ur.DM_1D,tabActiveSpectrum:{},showMultiplicityTrees:!1};function df(e){return function(t){switch(t.type){case"LOAD_ZIP_FILE":(function(e){return of.apply(this,arguments)})(t.files).then((function(){e(t)}));break;default:return e(t)}}}function ff(e,t){switch(t.type){case"INITIATE":return function(e,t){Yr(t.AnalysisObj);var n=Vr.getSpectraData(),a=Vr.getMolecules(),i=Vr.getPreferences("1d");return Object(Xn.a)(e,(function(t){t.data=n,t.molecules=a,t.isLoading=!1,i.display&&Object.prototype.hasOwnProperty.call(i.display,"center")?Kd(e,t,{center:i.display.center}):qd(n,t,e.height),af(t)}))}(e,t.data);case"SET_LOADING_FLAG":return function(e,t){return Object(b.a)(Object(b.a)({},e),{},{isLoading:t})}(e,t.isLoading);case"LOAD_JSON_FILE":return function(e,t){Yr(t.AnalysisObj);var n=Vr.getSpectraData(),a=Vr.getMolecules(),i=Vr.getPreferences("1d");return Object(Xn.a)(e,(function(t){t.data=n,t.molecules=a,t.preferences=i,i.display&&Object.prototype.hasOwnProperty.call(i.display,"center")?Kd(e,t,{center:i.display.center}):qd(n,t,e.height),af(t),t.isLoading=!1}))}(e,t.data);case"LOAD_JCAMP_FILE":return function(e,t){return Object(Xn.a)(e,(function(e){for(var n=e.data.map((function(e){return e.color})),a=t.length,i=0;i<a;i++){var r=ct(!1,n);Vr.addJcamp(t[i].binary.toString(),{display:{name:t[i].name,color:r},source:{jcampURL:t[i].jcampURL?t[i].jcampURL:null}}),n.push(r)}e.data=Vr.getSpectraData(),af(e),e.isLoading=!1}))}(e,t.files);case"LOAD_JDF_FILE":return function(e,t){return Object(Xn.a)(e,(function(e){for(var n=e.data.map((function(e){return e.color})),a=t.length,i=0;i<a;i++){var r=ct(!1,n);Vr.addJDF(t[i].binary,{display:{name:t[i].name,color:r,isVisible:!0,isPeaksMarkersVisible:!0},source:{jcampURL:t[i].jcampURL?t[i].jcampURL:null}}),n.push(r)}e.data=Vr.getSpectraData(),Xd(e),Gd(e),e.isLoading=!1}))}(e,t.files);case"LOAD_MOL_FILE":return function(e,t){for(var n=t.length,a=0;a<n;a++)Vr.addMolfile(t[a].binary.toString());var i=Vr.getMolecules();return Object(Xn.a)(e,(function(e){e.molecules=i,e.isLoading=!1}))}(e,t.files);case"LOAD_ZIP_FILE":return function(e){return Object(Xn.a)(e,(function(e){e.data=Vr.getSpectraData(),Xd(e),Gd(e),e.isLoading=!1}))}(e,t.files);case"EXPORT_DATA":return Ud(e,t);case"ADD_PEAK":return cf(e,t.mouseCoordinates);case"ADD_PEAKS":return function(e,t){return Object(Xn.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum.id,i=e.data.findIndex((function(e){return e.id===a})),r=Gn(null,e),o=r.invert(t.startX),c=r.invert(t.endX),l=[];if(o>c?(l[0]=c,l[1]=o):(l[0]=o,l[1]=c),-1!==i){var u=Vr.getDatum(a).addPeaks(l[0],l[1]);u&&n.data[i].peaks.values.push(u)}}}))}(e,t);case"DELETE_PEAK_NOTATION":return function(e,t){var n=e.activeSpectrum,a=n.id,i=n.index,r=Vr.getDatum(a).deletePeak(t);return Object(Xn.a)(e,(function(e){e.data[i].peaks.values=r}))}(e,t.data);case"ADD_INTEGRAL":return function(e,t){var n=Gn(null,e);return Object(Xn.a)(e,(function(a){var i=n.invert(t.startX),r=n.invert(t.endX),o=[];if(o=i>r?[r,i]:[i,r],e.activeSpectrum){var c=e.activeSpectrum,l=c.id,u=c.index,s=Vr.getDatum(l);s.addIntegral(o),a.data[u].integrals=s.getIntegrals();var d=a.data[u].integrals.values;if(1===d.length){var f=d[0],b=f.from,p=f.to,m=a.data[u],g=m.x,h=m.y,v=Object(L.i)({x:g,y:h},{from:b,to:p,reverse:!0}),O=Object(Sn.c)(v.y);a.integralsYDomains[l]=O,a.originIntegralYDomain[l]=O,Yn(e,a.integralZoomFactor.scale,a)}}}))}(e,t);case"DELETE_INTEGRAL":return function(e,t){return Object(Xn.a)(e,(function(n){var a=t.integralID,i=e.activeSpectrum,r=i.id,o=i.index,c=Vr.getDatum(r);c.deleteIntegral(a),n.data[o].integrals=c.getIntegrals()}))}(e,t);case"CHANGE_INTEGRAL_DATA":return function(e,t){return Object(Xn.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,i=a.id,r=a.index,o=Vr.getDatum(i);o.setIntegral(t.data),n.data[r].integrals=o.getIntegrals()}}))}(e,t);case"RESIZE_INTEGRAL":return function(e,t){return Object(Xn.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,i=a.id,r=a.index,o=Vr.getDatum(i);o.changeIntegral(t.data),n.data[r].integrals=o.getIntegrals()}}))}(e,t);case"SET_ORIGINAL_DOMAIN":return function(e,t){return Object(Xn.a)(e,(function(e){e.originDomain=t}))}(e,t.domain);case"SET_X_DOMAIN":return function(e,t){return Object(Xn.a)(e,(function(e){e.xDomain=t}))}(e,t.xDomain);case"SET_Y_DOMAIN":return function(e,t){return Object(Xn.a)(e,(function(e){e.yDomain=t}))}(e,t.yDomain);case"SET_WIDTH":return function(e,t){return Object(b.a)(Object(b.a)({},e),{},{width:t})}(e,t.width);case"SET_DIMENSIONS":return function(e,t,n){return Object(b.a)(Object(b.a)({},e),{},{width:t,height:n})}(e,t.width,t.height);case"SET_SELECTED_TOOL":return function(e,t){return Object(Xn.a)(e,(function(n){t?(n.selectedTool=t,Kn[t].hasOptionPanel?n.selectedOptionPanel=t:n.selectedOptionPanel=null,Kn[t].isFilter&&Jd(n,e,t)):(n.selectedTool=null,Kn[e.selectedTool].hasOptionPanel&&(n.selectedOptionPanel=null))}))}(e,t.selectedTool);case"RESET_SELECTED_TOOL":return function(e){return Object(Xn.a)(e,(function(t){t.selectedOptionPanel=null,t.selectedTool=Kn.zoom.id,t.baseLineZones=[],e.tempData&&(t.tempData=null,Xd(t))}))}(e);case"SET_SELECTED_OPTIONS_PANEL":return function(e,t){return Object(b.a)(Object(b.a)({},e),{},{selectedOptionPanel:t})}(e,t.selectedOptionPanel);case"SET_DATA":return function(e,t){var n,a=Object(w.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;Vr.pushDatum(new Je(i))}}catch(c){a.e(c)}finally{a.f()}var r=Vr.getSpectraData(),o=Vr.getMolecules();return Object(Xn.a)(e,(function(e){e.data=r,e.molecules=o,e.isLoading=!1,af(e)}))}(e,t.data);case"FULL_ZOOM_OUT":return function(e,t){var n=t.zoomType,a=t.trackID;return Object(Xn.a)(e,(function(t){if(t.displayerMode===ur.DM_1D){var i=Zd.getInstance();switch(n){case Nn:t.xDomain=e.originDomain.xDomain;break;case zn:Ln.setScale(.8),Bn(e,t,.8);break;case Hn:Ln.setScale(.8);var r=i.pop();t.xDomain=r||e.originDomain.xDomain,Bn(e,t,.8);break;default:Ln.setScale(.8),t.xDomain=e.originDomain.xDomain,Bn(e,t,.8)}}else{var o=e.originDomain,c=o.xDomain,l=o.yDomain,u=o.yDomains;switch(a){case nr.TOP_1D:var s=t.tabActiveSpectrum[t.activeTab.split(",")[0]].id;t.xDomain=c,t.yDomains[s]=u[s];break;case nr.LEFT_1D:var d=t.tabActiveSpectrum[t.activeTab.split(",")[1]].id;t.yDomain=l,t.yDomains[d]=u[d];break;case nr.CENTER_2D:t.xDomain=c,t.yDomain=l;break;default:t.xDomain=c,t.yDomain=l,t.yDomains=u}}}))}(e,t);case"SHIFT_SPECTRUM":return function(e,t){return Object(Xn.a)(e,(function(n){var a=e.activeSpectrum.id,i=Vr.getDatum(a);i.applyFilter([{name:Ye.shiftX.id,options:t}]),rf(n,i,a),Xd(n)}))}(e,t.shiftValue);case"APPLY_ZERO_FILLING_FILTER":return function(e,t){return Object(Xn.a)(e,(function(n){var a=e.activeSpectrum.id,i=Vr.getDatum(a);i.applyFilter([{name:Ye.zeroFilling.id,options:t.zeroFillingSize},{name:Ye.lineBroadening.id,options:t.lineBroadeningValue}]),rf(n,i,a),Xd(n),Gd(n)}))}(e,t.value);case"APPLY_FFT_FILTER":return function(e){return Object(Xn.a)(e,(function(t){var n=e.activeSpectrum.id,a=Vr.getDatum(n);a.applyFilter([{name:Ye.fft.id,options:{}}]),rf(t,a,n),qd([{info:a.getInfo()}],t,e.height),Xd(t),Gd(t)}))}(e);case"APPLY_MANUAL_PHASE_CORRECTION_FILTER":return function(e,t){return Object(Xn.a)(e,(function(n){var a=n.activeSpectrum,i=a.id,r=a.index,o=t.ph0,c=t.ph1,l=Vr.getDatum(i),u=Wd(n.data[r].x,e.pivot);o-=c*n.data[r].x.indexOf(u)/n.data[r].y.length,l.applyFilter([{name:Ye.phaseCorrection.id,options:{ph0:o,ph1:c}}]),rf(n,l,i),n.dataSnapshot=null,n.tempData=null,Xd(n)}))}(e,t.value);case"APPLY_AUTO_PHASE_CORRECTION_FILTER":return function(e){return Object(Xn.a)(e,(function(t){var n=e.tempData,a=e.activeSpectrum.index,i=n[a],r=i.x,o=i.y,c=i.im,l=i.info,u=t.activeSpectrum.id,s=Vr.getDatum(u),d=ee({data:{x:r,re:o,im:c},info:l}),f=d.data,b=d.ph0,p=d.ph1,m=f.im,g=f.re;t.tempData[a].im=m,t.tempData[a].y=g,s.applyFilter([{name:Ye.phaseCorrection.id,options:{ph0:b,ph1:p}}]),rf(t,s,u,!1),Xd(t)}))}(e,t.value);case"APPLY_ABSOLUTE_FILTER":return function(e){return Object(Xn.a)(e,(function(e){var t=e.activeSpectrum.id,n=Vr.getDatum(t);n.applyFilter([{name:Ye.absolute.id,options:{}}]),rf(e,n,t),Xd(e)}))}(e);case"CALCULATE_MANUAL_PHASE_CORRECTION_FILTER":return function(e,t){return Object(Xn.a)(e,(function(n){var a=e.tempData,i=e.activeSpectrum.index,r=a[i],o=r.x,c=r.y,l=r.im,u=r.info,s=t.ph0,d=t.ph1,f=Wd(a[i].x,e.pivot),b={data:{x:o,re:c,im:l},info:u};Ie(b,{ph0:s-=d*a[i].x.indexOf(f)/c.length,ph1:d});var p=b.data,m=p.im,g=p.re;n.tempData[i].im=m,n.tempData[i].y=g}))}(e,t.value);case"ENABLE_FILTER":return function(e,t,n){return Object(Xn.a)(e,(function(a){var i=e.activeSpectrum.id,r=Vr.getDatum(i);r.enableFilter(t,n);var o=r.getReal(),c=e.data.findIndex((function(e){return e.id===i}));a.data[c].x=o.x,a.data[c].y=o.y,a.data[c].filters=r.getFilters(),a.data[c].info.isFid=r.info.isFid,Xd(a),Gd(a)}))}(e,t.id,t.checked);case"DELETE_FILTER":return function(e,t){return Object(Xn.a)(e,(function(n){var a=e.activeSpectrum.id,i=Vr.getDatum(a);i.deleteFilter(t);var r=i.getReal(),o=e.data.findIndex((function(e){return e.id===a}));n.data[o].x=r.x,n.data[o].y=r.y,n.data[o].filters=i.getFilters(),n.data[o].info.isFid=i.info.isFid,Xd(n),Gd(n)}))}(e,t.id);case"SET_FILTER_SNAPSHOT":return function(e,t){return Object(Xn.a)(e,(function(n){if(e.activeSpectrum&&e.activeSpectrum.id){var a=e.activeSpectrum.id,i=Vr.getDatum(a);i.applyFilterSnapshot(t.id),rf(n,i,a),Xd(n),Gd(n)}}))}(e,t);case"CHANGE_VISIBILITY":return function(e,t){return Object(Xn.a)(e,(function(e){if(Array.isArray(t.id)){var n=t.id;if(0===n.length){var a,i=Object(w.a)(e.data);try{for(i.s();!(a=i.n()).done;){lf(a.value,!1)}}catch(u){i.e(u)}finally{i.f()}}else{var r,o=Object(w.a)(e.data);try{for(o.s();!(r=o.n()).done;){var c=r.value;n.includes(c.id)?lf(c,!0):lf(c,!1)}}catch(u){o.e(u)}finally{o.f()}}}else{var l=e.data.findIndex((function(e){return e.id===t.id}));e.data[l].display[t.key]=t.value}}))}(e,t);case"CHANGE_PEAKS_MARKERS_VISIBILITY":return function(e,t){return Object(Xn.a)(e,(function(e){var n,a=Object(w.a)(e.data);try{var i=function(){var e=n.value,a=Vr.getDatum(e.id);t.some((function(t){return t.id===e.id}))?(a.setDisplay({isPeaksMarkersVisible:!0}),e.display.isPeaksMarkersVisible=!0):(a.setDisplay({isPeaksMarkersVisible:!1}),e.display.isPeaksMarkersVisible=!1)};for(a.s();!(n=a.n()).done;)i()}catch(r){a.e(r)}finally{a.f()}}))}(e,t.data);case"CHANGE_ACTIVE_SPECTRUM":return function(e,t){return Object(Xn.a)(e,(function(e){var n=!1;if(t){Vr.getDatum(t.id).setDisplay({isVisible:!0});var a=e.data.findIndex((function(e){return e.id===t.id})),i=e.data.findIndex((function(t){var n;return t.id===(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id)}));-1!==a&&(e.data[a].display.isVisible=!0),n=-1!==i?e.data[i].info.isFid!==e.data[a].info.isFid:e.data[a].info.isFid,t=Object(b.a)(Object(b.a)({},t),{},{index:a}),e.activeSpectrum=t,e.tabActiveSpectrum[e.activeTab]=t}else e.activeSpectrum=null,e.tabActiveSpectrum[e.activeTab]=null,n=!1;n&&(Xd(e),delete e.tabActiveSpectrum[e.activeTab],Gd(e))}))}(e,t.data);case"CHANGE_SPECTRUM_COLOR":return function(e,t){var n=t.id,a=t.color,i=t.key;return Object(Xn.a)(e,(function(e){var t=e.data.findIndex((function(e){return e.id===n}));-1!==t&&(e.data[t].display[i]=a,Vr.getDatum(n).setDisplay(Object(P.a)({},i,a)))}))}(e,t.data);case"TOGGLE_REAL_IMAGINARY_VISIBILITY":return function(e){return Object(Xn.a)(e,(function(t){if(null!==e.activeSpectrum){var n=e.activeSpectrum.id,a=Vr.getDatum(n);if(a){var i=a.getReal().y,r=a.getImaginary().y,o=e.data.findIndex((function(e){return e.id===n}));if(a.setIsRealSpectrumVisible(!t.data[o]),t.data[o].display.isRealSpectrumVisible=!t.data[o].display.isRealSpectrumVisible,a.setIsRealSpectrumVisible(),t.data[o].display.isRealSpectrumVisible){if(null!==i&&void 0!==i){t.data[o].y=i;var c=Vd(t.data);t.xDomain=c.xDomain,t.yDomain=c.yDomain,t.xDomains=c.xDomains,t.yDomains=c.yDomains}}else if(null!==r&&void 0!==r){t.data[o].y=r;var l=Vd(t.data);t.xDomain=l.xDomain,t.yDomain=l.yDomain,t.xDomains=l.xDomains,t.yDomains=l.yDomains}}}}))}(e);case"SET_ZOOM_FACTOR":return function(e,t){return Object(Xn.a)(e,(function(n){var a=t.deltaY,i=t.deltaMode,r=t.trackID;if(Ln.wheel(a,i),r)switch(r){case nr.TOP_1D:Vn(n,Ln.getScale(),e.margin.top,10,0);break;case nr.LEFT_1D:Vn(n,Ln.getScale(),e.margin.left,10,1);break;default:return e}else Bn(e,n,Ln.getScale())}))}(e,t);case"CHANGE_SPECTRUM_DISPLAY_VIEW_MODE":return function(e,t){var n=t.flag;return Object(Xn.a)(e,(function(t){var a=e.activeSpectrum,i=e.data,r=e.height,o=20;a&&(i[a.index].isFid&&(o=r/2));t.verticalAlign.flag=n,t.verticalAlign.stacked=n,t.verticalAlign.value=n?Math.floor(r/(e.data.length+2)):o}))}(e,t);case"ADD_MOLECULE":return function(e,t){return Vr.addMolfile(t),Object(Xn.a)(e,(function(e){e.molecules=Vr.getMolecules()}))}(e,t.molfile);case"SET_MOLECULE":return function(e,t,n){return Object(Xn.a)(e,(function(e){e.molecules=Vr.setMolfile(t,n)}))}(e,t.molfile,t.key);case"DELETE_MOLECULE":return function(e,t){return Object(Xn.a)(e,(function(e){Vr.removeMolecule(t),e.molecules=Vr.getMolecules()}))}(e,t.key);case"DELETE_SPECTRA":return function(e,t){return Object(Xn.a)(e,(function(e){var n=e.activeSpectrum;if(n&&n.id)Vr.deleteDatumByIDs([n.id]),e.activeSpectrum=null,e.data=Vr.getSpectraData(),Xd(e),Gd(e);else{var a=t.IDs;Vr.deleteDatumByIDs(a),e.data=Vr.getSpectraData()}}))}(e,t);case"SET_INTEGRAL_Y_DOMAIN":return function(e,t){return Object(Xn.a)(e,(function(e){var n=e.activeSpectrum;n&&(e.integralsYDomains[n.id]=t)}))}(e,t.yDomain);case"CHANGE_INTEGRAL_ZOOM":return function(e,t){return Object(Xn.a)(e,(function(n){var a=t.deltaY,i=t.deltaMode;Fn.wheel(a,i),Yn(e,Fn.getScale(),n)}))}(e,t);case"CHANGE_INTEGRAL_SUM":return function(e,t){return Object(Xn.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,i=a.id,r=a.index,o=Vr.getDatum(i);o.changeIntegralSum(t),n.data[r].integrals=o.getIntegrals(),e.data.integralsYDomain||(n.integralsYDomains[i]=n.yDomains[i])}}))}(e,t.value);case"BRUSH_END":return function(e,t){return Object(Xn.a)(e,(function(n){var a=n.displayerMode===ur.DM_2D,i=Gn(null,e),r=a?rr(e):Un(null,e),o=i.invert(t.startX),c=i.invert(t.endX),l=r.invert(t.startY),u=r.invert(t.endY),s=o>c?[c,o]:[o,c],d=l>u?[u,l]:[l,u];if(n.displayerMode===ur.DM_2D)switch(t.trackID){case nr.CENTER_2D:n.xDomain=s,n.yDomain=d;break;case nr.TOP_1D:n.xDomain=s;break;case nr.LEFT_1D:n.yDomain=d}else Zd.getInstance().push(e.xDomain),n.xDomain=s}))}(e,t);case"SET_VERTICAL_INDICATOR_X_POSITION":return function(e,t){return Object(Xn.a)(e,(function(n){var a=Gn(null,e);n.pivot=a.invert(t)}))}(e,t.position);case"SET_SPECTRUMS_VERTICAL_AlIGN":return function(e,t){return Object(Xn.a)(e,(function(n){Kd(e,n,{center:t})}))}(e,t.flag);case"AUTO_PEAK_PICKING":return function(e,t){return Object(Xn.a)(e,(function(n){n.selectedTool=Kn.zoom.id,n.selectedOptionPanel=null;var a=e.activeSpectrum.id,i=Vr.getDatum(a).applyAutoPeakPicking(t),r=e.data.findIndex((function(e){return e.id===a}));-1!==r&&(n.data[r].peaks=i)}))}(e,t.options);case"AUTO_RANGES_DETECTION":return function(e,t){return Object(Xn.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,i=a.id,r=a.index,o=Vr.getDatum(i).detectRanges(t);n.data[r].ranges=o}}))}(e,t.options);case"AUTO_ZONES_DETECTION":return function(e,t){return Object(Xn.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,i=a.id,r=a.index,o=Vr.getDatum(i).detectZones(t);n.data[r].zones=o}}))}(e,t.options);case"ADD_RANGE":return function(e,t){return Object(Xn.a)(e,(function(n){var a=Gn(null,e),i=a.invert(t.startX),r=a.invert(t.endX),o=[];if(o=i>r?[r,i]:[i,r],n.activeSpectrum){var c=e.activeSpectrum,l=c.id,u=c.index,s=Vr.getDatum(l);s.addRange(o[0],o[1]),n.data[u].ranges=s.getRanges()}}))}(e,t);case"DELETE_RANGE":return function(e,t){return Object(Xn.a)(e,(function(n){var a=e.activeSpectrum,i=a.id,r=a.index,o=Vr.getDatum(i);o.deleteRange(t),n.data[r].ranges=o.getRanges()}))}(e,t.rangeID);case"CHANGE_RANGE_DATA":return function(e,t){return Object(Xn.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,i=a.id,r=a.index,o=Vr.getDatum(i);o.setRange(t.data),n.data[r].ranges=o.getRanges()}}))}(e,t);case"RESIZE_RANGE":return function(e,t){return Object(Xn.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,i=a.id,r=a.index,o=Vr.getDatum(i);o.changeRange(t.data),n.data[r].ranges=o.getRanges()}}))}(e,t);case"CHANGE_RANGE_SUM":return function(e,t){return Object(Xn.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,i=a.id,r=a.index,o=Vr.getDatum(i);o.changeRangesSum(t),n.data[r].ranges=o.getRanges()}}))}(e,t.value);case"SET_PREFERENCES":return function(e,t){var n=t.type,a=t.values;return Object(Xn.a)(e,(function(e){var t=Vr.getPreferences(),i=t&&Object.prototype.hasOwnProperty.call(t,"panels")?t.panels:{};Vr.setPreferences({panels:Object(b.a)(Object(b.a)({},i),{},Object(P.a)({},n,a))}),e.preferences=Vr.getPreferences()}))}(e,t.data);case"SET_ACTIVE_TAB":return function(e,t){return Object(Xn.a)(e,(function(e){t&&af(e,t)}))}(e,t.tab);case"ADD_BASE_LINE_ZONE":return function(e,t){var n=t.from,a=t.to,i=Gn(null,e);return Object(Xn.a)(e,(function(t){var r=i.invert(n),o=i.invert(a),c=[];c=r>o?[o,r]:[r,o];var l=e.baseLineZones.slice();l.push({id:G(),from:c[0],to:c[1]}),t.baseLineZones=l}))}(e,t.zone);case"DELETE_BASE_LINE_ZONE":return function(e,t){return Object(Xn.a)(e,(function(n){n.baseLineZones=e.baseLineZones.filter((function(e){return e.id!==t}))}))}(e,t.id);case"APPLY_BASE_LINE_CORRECTION_FILTER":return function(e,t){return Object(Xn.a)(e,(function(n){var a=e.activeSpectrum.id,i=Vr.getDatum(a);i.applyFilter([{name:Ye.baselineCorrection.id,options:Object(b.a)({zones:e.baseLineZones},t.options)}]),n.baseLineZones=[];var r=n.xDomain.slice();rf(n,i,a),Xd(n),n.xDomain=r}))}(e,t);case"SET_KEY_PREFERENCES":return function(e,t){return Object(Xn.a)(e,(function(n){var a=e.activeTab,i=e.data,r=e.activeSpectrum,o=e.zoomFactor,c=e.xDomain,l=e.xDomains,u=e.yDomain,s=e.yDomains,d=e.margin,f=e.displayerMode,b=e.tabActiveSpectrum;if(a){var p=Us("nucleus")(i),m=f===ur.DM_2D?p[a].reduce((function(e,t){return e[t.id]=Vr.getDatum(t.id).getProcessingController().getLevel(),e}),{}):null;n.keysPreferences[t]={activeTab:a,activeSpectrum:r,displayerMode:f,tabActiveSpectrum:b,zoomFactor:o,xDomain:c,xDomains:l,yDomain:u,yDomains:s,level:m,margin:d,data:p[a].reduce((function(e,t){return e[t.id]={color:t.display.color,isVisible:t.display.isVisible,isPeaksMarkersVisible:t.display.isPeaksMarkersVisible},e}),{})}}}))}(e,t.keyCode);case"APPLY_KEY_PREFERENCES":return function(e,t){return Object(Xn.a)(e,(function(n){var a=e.keysPreferences[t];if(a)if(n.activeTab=a.activeTab,n.data=e.data.map((function(e){return Object(b.a)(Object(b.a)({},e),e.info.nucleus===a.activeTab?a.data[e.id]:{display:e.display})})),n.displayerMode=a.displayerMode,n.tabActiveSpectrum=a.tabActiveSpectrum,n.activeSpectrum=a.activeSpectrum,n.margin=a.margin,Xd(n),n.xDomain=a.xDomain,n.xDomains=a.xDomains,n.yDomain=a.yDomain,n.displayerMode===ur.DM_2D){n.yDomains=a.yDomains;for(var i=0,r=Object.keys(a.level);i<r.length;i++){var o=r[i],c=a.level[o],l=c.levelPositive,u=c.levelNegative,s=Vr.getDatum(o).getProcessingController();s.setLevel(l,u),n.contours[o]=s.drawContours()}}else Ln.setScale(a.zoomFactor.scale),Bn(e,n,a.zoomFactor.scale)}))}(e,t.keyCode);case"SET_2D_LEVEL":return function(e,t){var n=t.deltaY,a=t.shiftKey;try{if(e.activeSpectrum){var i=e.activeSpectrum.id,r=Vr.getDatum(i);if(r instanceof nt){var o=r.getProcessingController();return a?o.shiftWheel(n):o.wheel(n),Object(Xn.a)(e,(function(e){var t=o.drawContours();e.contours[i]=t}))}return e}return e}catch(c){return e}}(e,t);case"ADD_2D_ZONE":return function(e,t){return Object(Xn.a)(e,(function(n){var a=t.startX,i=t.startY,r=t.endX,o=t.endY,c=ir(e),l=rr(e),u=1e6*a>1e6*r?r:a,s=1e6*a>1e6*r?a:r,d=1e6*i>1e6*o?o:i,f=1e6*i>1e6*o?i:o,b=e.activeSpectrum&&e.activeSpectrum.id?Vr.getDatum(e.activeSpectrum.id):null;if(b&&b instanceof nt){var p=l.invert(d),m=c.invert(u),g=l.invert(f),h=c.invert(s),v=b.detectZones({selectedZone:{fromX:m,fromY:p,toX:h,toY:g},thresholdFactor:uf,convolutionByFFT:!1});n.data[e.activeSpectrum.index].zones=v}}))}(e,t);case"DELETE_2D_ZONE":return function(e,t){return Object(Xn.a)(e,(function(n){if(e.activeSpectrum&&e.activeSpectrum.id){var a=Vr.getDatum(e.activeSpectrum.id);a.deleteZone(t);var i=a.getZones();n.data[e.activeSpectrum.index].zones=i}}))}(e,t.zoneID);case"ADD_MISSING_PROJECTION":return function(e,t){return Object(Xn.a)(e,(function(n){var a=t.nucleus;if(e.activeSpectrum&&e.activeSpectrum.id){Vr.addMissingProjection(e.activeSpectrum.id,a),n.data=Vr.getSpectraData();var i=Us("nucleus")(n.data);nf(n,i,n.activeTab,!0),Xd(n),Gd(n)}}))}(e,t);case"SET_SHOW_MULTIPLICITY_TREES":return function(e,t){return Object(Xn.a)(e,(function(e){e.showMultiplicityTrees=!e.showMultiplicityTrees}))}(e);case"RESET_X_DOMAIN":return function(e){return Object(Xn.a)(e,(function(t){var n=e.originDomain,a=n.xDomain,i=n.yDomain,r=n.xDomains,o=n.yDomains;t.xDomain=a,t.yDomain=i,t.xDomains=r,t.yDomains=o}))}(e);case"undo":return function(e){var t=e.history,n=t.past,a=t.present,i=t.future,r=n[n.length-1],o=n.slice(0,n.length-1),c=[a].concat(Object(La.a)(i)),l=0!==c.length,u=0!==n.length;Vr.undoFilter(n);var s=Vr.getSpectraData(),d=Vd(s),f={past:o,present:r,future:c,hasRedo:l,hasUndo:u};return Object(b.a)(Object(b.a)({},e),{},{data:s,xDomain:d.xDomain,yDomain:d.yDomain,originDomain:d,history:f})}(e);case"redo":return function(e){return Object(Xn.a)(e,(function(e){var t=e.history,n=t.future[0],a=t.future.shift();t.past.push(t.present),t.present=a,t.hasUndo=!0,t.hasRedo=t.future.length>0,Vr.redoFilter(n),e.data=Vr.getSpectraData(),Xd(e)}))}(e);case"reset":return function(e,t){return Object(Xn.a)(e,(function(e){e.history={past:[],present:t,future:[],hasRedo:!1,hasUndo:!1}}))}(e,t);case"CHANGE_ZONE_DATA":return function(e,t){return Object(Xn.a)(e,(function(n){if(e.activeSpectrum){var a=e.activeSpectrum,i=a.id,r=a.index,o=Vr.getDatum(i);o.setZone(t.data),n.data[r].zones=o.getZones()}}))}(e,t);default:return e}}var bf=function(e){var t=function(t){var n=Mt(),a=n.data,i=n.activeSpectrum,r=n.verticalAlign,o=n.displayerMode,c=Object(g.useMemo)((function(){if(a&&i&&i.id){var e=a.find((function(e){return e.id===i.id}));return null!==e&&void 0!==e?{info:e.info,spectrumsCount:e.length}:{}}return{}}),[i,a]),l=c.info,u=void 0===l?{}:l,s=c.spectrumsCount,d=void 0===s?0:s,f=t.forwardedRef,b=Object(k.a)(t,["forwardedRef"]);return h.a.createElement(e,Object.assign({},b,{info:u,activeSpectrum:i,spectrumsCount:d,verticalAlign:r,displayerMode:o,ref:f}))};return Object(g.memo)(h.a.forwardRef((function(e,n){return h.a.createElement(t,Object.assign({},e,{forwardedRef:n}))})))};function pf(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 450px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"]);return pf=function(){return e},e}var mf=Object(m.b)(pf()),gf=["dx","jdx"],hf=function(e){var t=e.onLoadClick,n=e.onClose,a=e.startLoading,i=Object(g.useRef)(),r=Object(g.useCallback)((function(){var e=i.current.value,n=function(e){var t=e.replace(/^.*[\\\/]/,"").split(".");return{name:t[0].toLowerCase(),extension:t[1].toLowerCase()}}(e);gf.includes(n.extension)?(a(),Eo(e).then((function(a){var i={binary:a,name:n.name,jcampURL:e};t(i)}))):t(null)}),[t,a]);return Object(m.c)("div",{css:mf},Object(m.c)("div",{className:"header"},Object(m.c)("span",null,"Load JCAMP Dialog"),Object(m.c)("button",{onClick:n,type:"button"},Object(m.c)(jn.D,null))),Object(m.c)("div",{className:"container"},Object(m.c)("input",{ref:i,type:"text",placeholder:"Enter JCAMP file relative path ex: ./path/file.dx"}),Object(m.c)("button",{type:"button",onClick:r},"Load")))};hf.defaultProps={onLoadButtonClick:function(){return null},onClose:function(){return null},startLoading:function(){return null}};var vf=hf;function Of(){var e=Object(f.a)(["\n  background-color: transparent;\n  border: none;\n  border-bottom: 0.55px solid whitesmoke;\n  height: 35px;\n  outline: outline;\n  display: flex;\n  justify-content: flex-start;\n\n  :focus {\n    outline: none !important;\n  }\n  span {\n    font-size: 10px;\n    padding: 0px 10px;\n  }\n"]);return Of=function(){return e},e}function jf(){var e=Object(f.a)(["\n  background-color: transparent;\n  border: none;\n  width: 35px;\n  height: 35px;\n  min-height: 35px;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  outline: outline;\n  :focus {\n    outline: none !important;\n  }\n"]);return jf=function(){return e},e}var yf=Object(m.b)(jf()),xf=Object(m.b)(Of()),kf=function(e){var t=e.isViewButtonVisible,n=void 0===t||t,a=e.info,i=e.verticalAlign,r=e.displayerMode,o=e.spectrumsCount,c=Rt(),l=Nt(),u=Object(g.useState)(!1),s=Object(p.a)(u,2),d=s[0],f=s[1],h=Object(g.useState)(!1),O=Object(p.a)(h,2),j=O[0],y=O[1],x=Object(v.d)(),k=bn(),E=Object(b.a)({isComplex:!1,isFid:!1},a),C=Object(g.useCallback)((function(){c({type:"EXPORT_DATA",exportType:"svg"})}),[c]),w=Object(g.useCallback)((function(){return c({type:"EXPORT_DATA",exportType:"png"})}),[c]),D=Object(g.useCallback)((function(){c({type:"EXPORT_DATA",exportType:"copy"}),x.show("Spectrum copied to clipboard")}),[x,c]),S=Object(g.useCallback)((function(){return c({type:"EXPORT_DATA",exportType:"json"})}),[c]),T=Object(g.useCallback)((function(){var e=!j;y(e),c({type:"CHANGE_SPECTRUM_DISPLAY_VIEW_MODE",flag:e})}),[c,j]),I=Object(g.useCallback)((function(){c({type:"TOGGLE_REAL_IMAGINARY_VISIBILITY",isRealSpectrumVisible:!d}),f(!d)}),[c,d]),M=Object(g.useCallback)((function(){c({type:"SET_SPECTRUMS_VERTICAL_AlIGN",flag:!i.flag})}),[c,i.flag]),_=Object(g.useCallback)((function(e){if("input"!==e.target.localName&&!e.shiftKey&&!e.metaKey&&!e.ctrlKey)switch(e.key){case"c":M();break;case"s":T()}if(!e.shiftKey&&(e.metaKey||e.ctrlKey))switch(e.key){case"c":D(),e.preventDefault();break;case"s":S(),e.preventDefault()}}),[M,T,S,D]),P=Object(g.useCallback)((function(e){e?(c({type:"LOAD_JCAMP_FILE",files:[e]}),k.close()):x.error("you file must be one of those extensions [ .jdx, dx ] ")}),[x,c,k]),R=Object(g.useCallback)((function(){k.close(),c({type:"SET_LOADING_FLAG",isLoading:!0})}),[c,k]),L=Object(g.useCallback)((function(){k.show(Object(m.c)(vf,{onLoadClick:P,onClose:function(){return k.close()},startLoading:R}),{})}),[P,k,R]);Object(g.useEffect)((function(){return document.addEventListener("keydown",_,!1),function(){document.removeEventListener("keydown",_,!1)}}),[_]);var F=Object(g.useCallback)((function(e){return!A.a.get(l,"toolsBarButtons.".concat(e))}),[l]);return Object(m.c)(g.Fragment,null,F("hideImport")&&Object(m.c)(tu,{style:yf,component:Object(m.c)(jn.q,null),toolTip:"Import"},Object(m.c)("button",{type:"button",css:xf,onClick:L},Object(m.c)(jn.m,null),Object(m.c)("span",null,"Add jcamp from URL"))),F("hideExportAs")&&Object(m.c)(tu,{style:yf,component:Object(m.c)(jn.o,null),toolTip:"Export As"},Object(m.c)("button",{type:"button",css:xf,onClick:C},Object(m.c)(jn.h,null),Object(m.c)("span",null,"Export as SVG")),Object(m.c)("button",{type:"button",css:xf,onClick:w},Object(m.c)(jn.p,null),Object(m.c)("span",null,"Export as PNG")),Object(m.c)("button",{type:"button",css:xf,onClick:S},Object(m.c)(jn.n,null),Object(m.c)("span",null,"Save data ( Press Ctrl + S )")),Object(m.c)("button",{type:"button",css:xf,onClick:D},Object(m.c)(jn.e,null),Object(m.c)("span",null,"Copy image to Clipboard ( Press Ctrl + C )"))),r===ur.DM_1D&&F("hideSpectraStackAlignments")&&n&&o>1&&Object(m.c)("button",{type:"button",css:[yf,{display:"block"}],onClick:T,className:j?"ci-icon-nmr-overlay3":"ci-icon-nmr-overlay3-aligned"},Object(m.c)(oo,{title:"Spectra alignment",popupPlacement:"right"},Object(m.c)("div",null))),r===ur.DM_1D&&F("hideRealImaginary")&&E&&E.isComplex&&Object(m.c)("button",{css:yf,type:"button",onClick:I,className:"ci-icon-nmr-real-imag"},Object(m.c)(oo,{title:d?"Real Spectrum":"Imaginary Spectrum",popupPlacement:"right"})),r===ur.DM_1D&&F("hideSpectraCenterAlignments")&&Object(m.c)("button",{css:yf,type:"button",onClick:M},Object(m.c)(oo,{title:i.flag?"Bottom Align":"Align Center",popupPlacement:"right"},i.flag?"BA":"CA")))},Ef=bf(Object(g.memo)(kf));function Cf(){var e=Object(f.a)(["\n  color: black;\n  background-color: #f3f3f3 !important;\n"]);return Cf=function(){return e},e}function wf(){var e=Object(f.a)(["\n  width: 35px;\n  height: 35px;\n  background-color: white;\n  padding: 5px;\n  margin: 0px;\n  border: none;\n  outline: none;\n\n  :focus {\n    outline: none !important;\n  }\n"]);return wf=function(){return e},e}var Df=Object(m.b)(wf()),Sf=Object(m.b)(Cf()),Tf=function(e){var t=e.children,n=e.value,a=e.disabled,i=e.isActive,r=e.onChange,o=e.className,c=e.style,l=e.isVisible,u=e.onMouseEnter,s=e.onMouseLeave,d=e.helpID,f=Object(g.useState)(i),b=Object(p.a)(f,2),h=b[0],v=b[1],O=Object(g.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var t=!h;v(t),r(t?n:null)}),[h,r,n]);return Object(g.useEffect)((function(){v(i)}),[i]),l?Object(m.c)("button",{type:"button",onClick:O,css:[Df,h&&Sf],style:c,className:" ".concat(o,h?"  active":" "),disabled:a,onMouseEnter:u,onMouseLeave:s,"data-helpid":d},Object(g.cloneElement)(t,{style:{fontSize:"10px"}})):null};Tf.displayName="ToggleButton",Tf.defaultProps={isActive:!1,disabled:!1,isVisible:!0,value:null,className:"",onChange:function(){return null},onValueReady:function(){return null}};var If=Tf,Af={display:"flex",flexDirection:"column"},Mf=function(e){var t=e.children,n=e.value,a=e.onChange,i=Object(g.useState)([]),r=Object(p.a)(i,2),o=r[0],c=r[1],l=Object(g.useCallback)((function(e){var t=Object(La.a)(o).map((function(t){return{value:t.value,isActive:t.value===e}}));c(t),a(e)}),[a,o]),u=Object(g.useMemo)((function(){var e=0;return h.a.Children.map(t,(function(t){if(t){if("ToggleButton"===t.type.displayName){var n=h.a.cloneElement(t,{onChange:l,isActive:o[e]&&o[e].isActive&&o[e].isActive,index:e});return e++,n}return h.a.cloneElement(t)}}))}),[t,l,o]);return Object(g.useEffect)((function(){var e=h.a.Children.map(t,(function(e){if(e&&"ToggleButton"===e.type.displayName)return{value:e.props.value,isActive:e.props.value===n}}));c(e)}),[t,n]),h.a.createElement("div",{style:Af}," ",u," ")};Mf.defaultProps={onChange:function(){return null}};var _f=Mf,Pf={icon:{backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"18px 18px"},button:{backgroundColor:"transparent",border:"none",width:"35px",height:"35px",outline:"outline"},faIcon:{display:"flex",justifyContent:"center"}},Rf=[],Lf=function(e){var t=e.defaultValue,n=e.activeSpectrum,a=e.info,i=e.displayerMode,r=Object(g.useState)(),o=Object(p.a)(r,2),c=o[0],l=o[1],u=vi(),s=Object(v.d)(),d=Nt(),f=Rt(),m={info:Object(b.a)({isComplex:!1,isFid:!1},a)},O=Object(g.useCallback)((function(e){[Kn.peakPicking.id,Kn.integral.id,Kn.zone2D.id].includes(e)&&s.show("Press Shift + Left Mouse button to select zone for integral and peak picking"),f({type:"SET_SELECTED_TOOL",selectedTool:e})}),[s,f]),j=Object(g.useCallback)((function(e){l(e),O(e)}),[O]),y=Object(g.useCallback)((function(){0===Rf.length&&f({type:"FULL_ZOOM_OUT",zoomType:Nn});var e=A.a.debounce((function(){Rf=[]}),500);Rf.push(e),e(),Rf.length>1&&(A.a.map(Rf,(function(e){return e.cancel()})),Rf=[],f({type:"FULL_ZOOM_OUT"}))}),[f]),x=Object(g.useCallback)((function(e){if("input"!==e.target.localName&&!e.shiftKey&&!e.metaKey)switch(e.key){case"f":y();break;case"z":case"Escape":l(Kn.zoom.id),O(Kn.zoom.id);break;case"r":l(Kn.rangesPicking.id),O(Kn.rangesPicking.id);break;case"b":l(Kn.baseLineCorrection.id),O(Kn.baseLineCorrection.id);break;case"p":l(Kn.peakPicking.id),O(Kn.peakPicking.id);break;case"i":var t=i===ur.DM_2D?Kn.zone2D.id:i===ur.DM_1D?Kn.integral.id:"";l(t),O(t);break;case"a":l(Kn.phaseCorrection.id),O(Kn.phaseCorrection.id)}}),[i,O,y]);Object(g.useEffect)((function(){return l(t),document.addEventListener("keydown",x,!1),function(){document.removeEventListener("keydown",x,!1)}}),[t,x]);var k=Object(g.useCallback)((function(){f({type:"APPLY_FFT_FILTER",value:""}),f({type:"SET_SELECTED_FILTER",selectedFilter:null})}),[f]),E=Object(g.useCallback)((function(e){return!A.a.get(d,"toolsBarButtons.".concat(e))}),[d]);return h.a.createElement(h.a.Fragment,null,h.a.createElement(_f,{value:c,onChange:j},E("hideZoomTool")&&h.a.createElement(If,Object.assign({key:Kn.zoom.id,value:Kn.zoom.id},u.onHover,{helpID:"zoomIn"}),h.a.createElement(oo,{title:"".concat(Kn.zoom.label," ( Press z )"),popupPlacement:"right",offset:{x:10,y:0}},h.a.createElement(jn.B,null))),E("hideZoomOutTool")&&h.a.createElement("button",{type:"button",style:Object(b.a)(Object(b.a)({},Pf.button),Pf.faIcon),onClick:y},h.a.createElement(oo,{title:"Horizontal zoom out ( Press f ), Horizontal and Vertical zoom out, double click ( Press ff )",popupPlacement:"right"},h.a.createElement(jn.j,null))),i===ur.DM_1D&&E("hidePeakTool")&&h.a.createElement(If,Object.assign({key:Kn.peakPicking.id,value:Kn.peakPicking.id,className:"ci-icon-nmr-peak-picking",style:Pf.icon,isVisible:n&&m&&!m.info.isFid},u.onHover,{helpID:"peakPicking"}),h.a.createElement(oo,{title:"".concat(Kn.peakPicking.label," ( Press p )"),popupPlacement:"right",offset:{x:10,y:0}})),i===ur.DM_1D&&E("hideIntegralTool")&&h.a.createElement(If,Object.assign({key:Kn.integral.id,value:Kn.integral.id,className:"ci-icon-nmr-integrate",style:Pf.icon,isVisible:n&&m&&!m.info.isFid},u.onHover,{helpID:"integralPicking"}),h.a.createElement(oo,{title:"".concat(Kn.integral.label," ( Press i )"),popupPlacement:"right",offset:{x:10,y:0}})),i===ur.DM_2D&&E("hideIntegralTool")&&h.a.createElement(If,{key:Kn.zone2D.id,value:Kn.zone2D.id},h.a.createElement(oo,{title:"".concat(Kn.zone2D.label," ( Press i  )"),popupPlacement:"right",offset:{x:10,y:0}},h.a.createElement(jn.g,null))),i===ur.DM_2D&&h.a.createElement(If,{key:Kn.slicingTool.id,value:Kn.slicingTool.id,style:Pf.icon},h.a.createElement(oo,{title:"".concat(Kn.slicingTool.label),popupPlacement:"right",offset:{x:10,y:0}},"Slic")),i===ur.DM_1D&&E("hideAutoRangesTool")&&h.a.createElement(If,{key:Kn.rangesPicking.id,value:Kn.rangesPicking.id,className:"ci-icon-nmr-range-picking",style:Pf.icon,isVisible:n&&m&&!m.info.isFid},h.a.createElement(oo,{title:Kn.rangesPicking.label,popupPlacement:"right",offset:{x:10,y:0}})),i===ur.DM_1D&&E("hideZeroFillingTool")&&h.a.createElement(If,{key:Kn.zeroFilling.id,value:Kn.zeroFilling.id,className:"ci-icon-nmr-zero-filling",style:Pf.icon,isVisible:m&&Ye.zeroFilling.isApplicable(m)},h.a.createElement(oo,{title:Kn.zeroFilling.label,popupPlacement:"right",offset:{x:10,y:0}})),i===ur.DM_1D&&E("hidePhaseCorrectionTool")&&h.a.createElement(If,{key:Kn.phaseCorrection.id,value:Kn.phaseCorrection.id,className:"ci-icon-nmr-phase-correction",style:Pf.icon,isVisible:n&&m&&Ye.phaseCorrection.isApplicable(m)},h.a.createElement(oo,{title:Kn.phaseCorrection.label,popupPlacement:"right",offset:{x:10,y:0}})),i===ur.DM_1D&&E("hideBaseLineCorrectionTool")&&h.a.createElement(If,{key:Kn.baseLineCorrection.id,value:Kn.baseLineCorrection.id,className:"ci-icon-nmr-base-line-correction",style:Pf.icon,isVisible:n&&m&&Ye.baselineCorrection.isApplicable(m)},h.a.createElement(oo,{title:Kn.baseLineCorrection.label,popupPlacement:"right",offset:{x:10,y:0}},"BLC"))),i===ur.DM_1D&&E("hideFFTTool")&&m&&Ye.fft.isApplicable(m)&&h.a.createElement("button",{className:"ci-icon-nmr-fourier-transform",style:Object(b.a)(Object(b.a)({},Pf.icon),Pf.button),type:"button",onClick:k},h.a.createElement(oo,{title:"FFT Filter",popupPlacement:"right",offset:{x:10,y:0}})))},Ff=bf(Object(g.memo)(Lf));Lf.defaultProps={defaultValue:Kn.zoom.id};var Nf={display:"flex",flexDirection:"column",alignItems:"start",borderRight:"0.55px solid #f7f7f7",paddingRight:"1px"},zf=function(e){var t=e.selectedTool;return h.a.createElement("div",{style:Nf},h.a.createElement(Ff,{defaultValue:t}),h.a.createElement(Ef,null))};function Hf(){var e=Object(f.a)(["\n                          background-color: white;\n                          height: 100%;\n                          display: flex;\n                          flex-direction: column;\n                          div:focus {\n                            outline: none !important;\n                          }\n                          button:active,\n                          button:hover,\n                          button:focus,\n                          [type='button']:focus,\n                          button {\n                            outline: none !important;\n                          }\n                        "]);return Hf=function(){return e},e}var Bf={position:v.b.BOTTOM_CENTER,timeout:5e3,offset:"30px",transition:v.c.SCALE,containerStyle:{fontSize:"18px",zIndex:999999}},Vf={container:{position:"relative",height:"none"},pane1:{maxWidth:"80%"},resizer:{width:10,backgroundColor:"#f7f7f7",cursor:"ew-resize"},pane:{overflow:"hidden"}},Yf=Object(g.memo)((function(e){var t=e.data,n=e.preferences,a=Object(g.useRef)(),i=Object(y.a)(!1),r=Object(p.a)(i,2),o=r[0],c=r[1],l=Object(x.a)(a,o,{onClose:function(){c(!1)}}),u=Object(g.useState)(!1),s=Object(p.a)(u,2),d=s[0],f=s[1],h=Object(g.useReducer)(ff,sf),k=Object(p.a)(h,2),E=k[0],C=k[1],w=E.selectedTool,D=E.displayerMode;Object(g.useEffect)((function(){C({type:"SET_LOADING_FLAG",isLoading:!0}),Ot.build(t||{}).then((function(e){C({type:"INITIATE",data:{AnalysisObj:e}})}))}),[t]);var S=Object(g.useCallback)((function(e){f(!1),C({type:"SET_WIDTH",width:e})}),[]),T=Object(g.useMemo)((function(){return df(C)}),[C]);return Object(m.c)(to,null,Object(m.c)(Ft,{value:n},Object(m.c)(zi,{data:ko,wrapperID:"main-wrapper"},Object(m.c)(v.a,Object.assign({template:O.a},Bf),Object(m.c)(Pt,{value:T},Object(m.c)(At,{value:Object(b.a)(Object(b.a)({},E),{},{isResizeEventStart:d})},Object(m.c)(fn,{wrapperID:"main-wrapper"},Object(m.c)(ao,{parentRef:a}),Object(m.c)(va.a,null,Object(m.c)(Ua,null,Object(m.c)("div",{ref:a,css:Object(m.b)(Hf())},Object(m.c)(Ec,{isFullscreen:l,onMaximize:c}),Object(m.c)("div",{style:{flex:1}},Object(m.c)(Ic,null,Object(m.c)(zf,null),Object(m.c)(j.a,{style:Vf.container,paneStyle:Vf.pane,resizerStyle:Vf.resizer,pane1Style:Vf.pane1,split:"vertical",defaultSize:"calc(100% - 600px)",minSize:"80%",onDragFinished:S,onDragStarted:function(){f(!0)}},D===ur.DM_1D?Object(m.c)(tr,null):Object(m.c)(qr,null),Object(m.c)(Hd,{selectedTool:w})))),Object(m.c)("div",{id:"main-wrapper"})))))))))))}));Yf.defaultProps={height:600,width:800,preferences:{general:{disableMultipletAnalysis:!1,hideSetSumFromMolecule:!1},panels:{hideSpectraPanel:!1,hideInformationPanel:!1,hidePeaksPanel:!1,hideIntegralsPanel:!1,hideRangesPanel:!1,hideStructuresPanel:!1,hideFiltersPanel:!1,hideZonesPanel:!1,hideSummaryPanel:!1},toolsBarButtons:{hideZoomTool:!1,hideZoomOutTool:!1,hideImport:!1,hideExportAs:!1,hideSpectraStackAlignments:!1,hideSpectraCenterAlignments:!1,hideRealImaginary:!1,hidePeakTool:!1,hideIntegralTool:!1,hideAutoRangesTool:!1,hideZeroFillingTool:!1,hidePhaseCorrectionTool:!1,hideBaseLineCorrectionTool:!1,hideFFTTool:!1}}};t.a=Yf}}]);
//# sourceMappingURL=2.78deb184.chunk.js.map